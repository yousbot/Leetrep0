<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-731.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-731.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>731 - My Calendar II</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode 731. My Calendar II Description You are implementing a program to use as your calendar. We can add a new event if adding the event will not cause a triple booking. A triple booking happens when three events have some non-empty intersection (i.e., some moment...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-731.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-731.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-731.html" rel="stylesheet"/>
   <link href="solution-731.html" rel="stylesheet"/>
   <link href="solution-731.html" rel="stylesheet"/>
   <link href="solution-731.html" rel="stylesheet"/>
   <link href="solution-731.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="731 - My Calendar II" property="og:title"/>
   <meta content="Leetcode 731. My Calendar II Description You are implementing a program to use as your calendar. We can add a new event if adding the event will not cause a triple booking. A triple booking happens when three events have some non-empty intersection (i.e., some moment is common to all the three events.). The event can be represented as a pair of integers start and end that represents a booking on the half-open interval [start, end), the range of real numbers x such that start &amp;lt;= x &amp;lt; end. Implement the MyCalendarTwo class: MyCalendarTwo() Initializes the calendar object. boolean book(int start, int end) Returns true if the event can be added to the calendar successfully without causing a triple booking. Otherwise, return false and do not add the event to the calendar. &amp;nbsp; Example 1: Input [&amp;quot;MyCalendarTwo&amp;quot;, &amp;quot;book&amp;quot;, &amp;quot;book&amp;quot;, &amp;quot;book&amp;quot;, &amp;quot;book&amp;quot;, &amp;quot;book&amp;quot;, &amp;quot;book&amp;quot;] [[], [10, 20], [50, 60], [10, 40], [5, 15], [5, 10], [25, 55]] Output [null, true, true, true, false, true, true] Explanation MyCalendarTwo myCalendarTwo = new MyCalendarTwo(); myCalendarTwo.book(10, 20); // return True, The event can be booked. myCalendarTwo.book(50, 60); // return True, The event can be booked. myCalendarTwo.book(10, 40); // return True, The event can be double booked. myCalendarTwo.book(5, 15); // return False, The event cannot be booked, because it would result in a triple booking. myCalendarTwo.book(5, 10); // return True, The event can be booked, as it does not use time 10 which is already double booked. myCalendarTwo.book(25, 55); // return True, The event can be booked, as the time in [25, 40) will be double booked with the third event, the time [40, 50) will be single booked, and the time [50, 55) will be double booked with the second event. &amp;nbsp; Constraints: 0 &amp;lt;= start &amp;lt; end &amp;lt;= 109 At most 1000 calls will be made to book. Solutions Use two lists to store the intervals of booking and the overlapping intervals, which are both sorted. Each time book(int start, int end) is called, loop over the list of overlaps to see whether there will be a new overlap. If so, then adding the new interval will cause a triple booking, so return false. Otherwise, add the new interval and the new overlapping intervals into the two list respectively, sort the two lists, and return true. Java C++ Python Go TypeScript Javascript class MyCalendarTwo { private Map&amp;lt;Integer, Integer&amp;gt; tm = new TreeMap&amp;lt;&amp;gt;(); public MyCalendarTwo() { } public boolean book(int start, int end) { tm.put(start, tm.getOrDefault(start, 0) + 1); tm.put(end, tm.getOrDefault(end, 0) - 1); int s = 0; for (int v : tm.values()) { s += v; if (s &amp;gt; 2) { tm.put(start, tm.get(start) - 1); tm.put(end, tm.get(end) + 1); return false; } } return true; } } /** * Your MyCalendarTwo object will be instantiated and called as such: * MyCalendarTwo obj = new MyCalendarTwo(); * boolean param_1 = obj.book(start,end); */ class MyCalendarTwo { public: map&amp;lt;int, int&amp;gt; m; MyCalendarTwo() { } bool book(int start, int end) { ++m[start]; --m[end]; int..." property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2017-11-30T00:00:00-08:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2017-11-30-731-My-Calendar-II/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-731.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="731 - My Calendar II" property="twitter:title"/>
   <meta content="Leetcode 731. My Calendar II Description You are implementing a program to use as your calendar. We can add a new event if adding the event will not cause a triple booking. A triple booking happens when three events have some non-empty intersection (i.e., some moment is common to all the three events.). The event can be represented as a pair of integers start and end that represents a booking on the half-open interval [start, end), the range of real numbers x such that start &amp;lt;= x &amp;lt; end. Implement the MyCalendarTwo class: MyCalendarTwo() Initializes the calendar object. boolean book(int start, int end) Returns true if the event can be added to the calendar successfully without causing a triple booking. Otherwise, return false and do not add the event to the calendar. &amp;nbsp; Example 1: Input [&amp;quot;MyCalendarTwo&amp;quot;, &amp;quot;book&amp;quot;, &amp;quot;book&amp;quot;, &amp;quot;book&amp;quot;, &amp;quot;book&amp;quot;, &amp;quot;book&amp;quot;, &amp;quot;book&amp;quot;] [[], [10, 20], [50, 60], [10, 40], [5, 15], [5, 10], [25, 55]] Output [null, true, true, true, false, true, true] Explanation MyCalendarTwo myCalendarTwo = new MyCalendarTwo(); myCalendarTwo.book(10, 20); // return True, The event can be booked. myCalendarTwo.book(50, 60); // return True, The event can be booked. myCalendarTwo.book(10, 40); // return True, The event can be double booked. myCalendarTwo.book(5, 15); // return False, The event cannot be booked, because it would result in a triple booking. myCalendarTwo.book(5, 10); // return True, The event can be booked, as it does not use time 10 which is already double booked. myCalendarTwo.book(25, 55); // return True, The event can be booked, as the time in [25, 40) will be double booked with the third event, the time [40, 50) will be single booked, and the time [50, 55) will be double booked with the second event. &amp;nbsp; Constraints: 0 &amp;lt;= start &amp;lt; end &amp;lt;= 109 At most 1000 calls will be made to book. Solutions Use two lists to store the intervals of booking and the overlapping intervals, which are both sorted. Each time book(int start, int end) is called, loop over the list of overlaps to see whether there will be a new overlap. If so, then adding the new interval will cause a triple booking, so return false. Otherwise, add the new interval and the new overlapping intervals into the two list respectively, sort the two lists, and return true. Java C++ Python Go TypeScript Javascript class MyCalendarTwo { private Map&amp;lt;Integer, Integer&amp;gt; tm = new TreeMap&amp;lt;&amp;gt;(); public MyCalendarTwo() { } public boolean book(int start, int end) { tm.put(start, tm.getOrDefault(start, 0) + 1); tm.put(end, tm.getOrDefault(end, 0) - 1); int s = 0; for (int v : tm.values()) { s += v; if (s &amp;gt; 2) { tm.put(start, tm.get(start) - 1); tm.put(end, tm.get(end) + 1); return false; } } return true; } } /** * Your MyCalendarTwo object will be instantiated and called as such: * MyCalendarTwo obj = new MyCalendarTwo(); * boolean param_1 = obj.book(start,end); */ class MyCalendarTwo { public: map&amp;lt;int, int&amp;gt; m; MyCalendarTwo() { } bool book(int start, int end) { ++m[start]; --m[end]; int..." property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    731 - My Calendar II | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="731 - My Calendar II" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-731.html" rel="canonical">
          <meta content="https://leetcode.ca/2017-11-30-731-My-Calendar-II/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2017-11-30T00:00:00-08:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"731 - My Calendar II","dateModified":"2017-11-30T00:00:00-08:00","datePublished":"2017-11-30T00:00:00-08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2017-11-30-731-My-Calendar-II/"},"url":"https://leetcode.ca/2017-11-30-731-My-Calendar-II/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <h1 id="731-my-calendar-ii">
       <a href="solution-731.html">
        731. My Calendar II
       </a>
      </h1>
      <h2 id="description">
       Description
      </h2>
      <p>
       You are implementing a program to use as your calendar. We can add a new event if adding the event will not cause a
       <strong>
        triple booking
       </strong>
       .
      </p>
      <p>
       A
       <strong>
        triple booking
       </strong>
       happens when three events have some non-empty intersection (i.e., some moment is common to all the three events.).
      </p>
      <p>
       The event can be represented as a pair of integers
       <code>
        start
       </code>
       and
       <code>
        end
       </code>
       that represents a booking on the half-open interval
       <code>
        [start, end)
       </code>
       , the range of real numbers
       <code>
        x
       </code>
       such that
       <code>
        start &lt;= x &lt; end
       </code>
       .
      </p>
      <p>
       Implement the
       <code>
        MyCalendarTwo
       </code>
       class:
      </p>
      <ul>
       <li>
        <code>
         MyCalendarTwo()
        </code>
        Initializes the calendar object.
       </li>
       <li>
        <code>
         boolean book(int start, int end)
        </code>
        Returns
        <code>
         true
        </code>
        if the event can be added to the calendar successfully without causing a
        <strong>
         triple booking
        </strong>
        . Otherwise, return
        <code>
         false
        </code>
        and do not add the event to the calendar.
       </li>
      </ul>
      <p>
      </p>
      <p>
       <strong class="example">
        Example 1:
       </strong>
      </p>
      <pre>
<strong>Input</strong>
["MyCalendarTwo", "book", "book", "book", "book", "book", "book"]
[[], [10, 20], [50, 60], [10, 40], [5, 15], [5, 10], [25, 55]]
<strong>Output</strong>
[null, true, true, true, false, true, true]

<strong>Explanation</strong>
MyCalendarTwo myCalendarTwo = new MyCalendarTwo();
myCalendarTwo.book(10, 20); // return True, The event can be booked. 
myCalendarTwo.book(50, 60); // return True, The event can be booked. 
myCalendarTwo.book(10, 40); // return True, The event can be double booked. 
myCalendarTwo.book(5, 15);  // return False, The event cannot be booked, because it would result in a triple booking.
myCalendarTwo.book(5, 10); // return True, The event can be booked, as it does not use time 10 which is already double booked.
myCalendarTwo.book(25, 55); // return True, The event can be booked, as the time in [25, 40) will be double booked with the third event, the time [40, 50) will be single booked, and the time [50, 55) will be double booked with the second event.
</pre>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         0 &lt;= start &lt; end &lt;= 10
         <sup>
          9
         </sup>
        </code>
       </li>
       <li>
        At most
        <code>
         1000
        </code>
        calls will be made to
        <code>
         book
        </code>
        .
       </li>
      </ul>
      <h2 id="solutions">
       Solutions
      </h2>
      <p>
       Use two lists to store the intervals of booking and the overlapping intervals, which are both sorted. Each time
       <code class="language-plaintext highlighter-rouge">
        book(int start, int end)
       </code>
       is called, loop over the list of overlaps to see whether there will be a new overlap.
      </p>
      <ul>
       <li>
        If so, then adding the new interval will cause a triple booking, so return
        <code class="language-plaintext highlighter-rouge">
         false
        </code>
        .
       </li>
       <li>
        Otherwise, add the new interval and the new overlapping intervals into the two list respectively, sort the two lists, and return
        <code class="language-plaintext highlighter-rouge">
         true
        </code>
        .
       </li>
      </ul>
      <ul class="uk-tab" data-uk-switcher="{connect:'#876a847e-b46c-40bb-b4da-dd222fe97830'}">
       <li class="uk-active">
        <a href="solution-731.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-731.html">
         C++
        </a>
       </li>
       <li>
        <a href="solution-731.html">
         Python
        </a>
       </li>
       <li>
        <a href="solution-731.html">
         Go
        </a>
       </li>
       <li>
        <a href="solution-731.html">
         TypeScript
        </a>
       </li>
       <li>
        <a href="solution-731.html">
         Javascript
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="876a847e-b46c-40bb-b4da-dd222fe97830">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">MyCalendarTwo</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">tm</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeMap</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">MyCalendarTwo</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">book</span><span class="o">(</span><span class="kt">int</span> <span class="n">start</span><span class="o">,</span> <span class="kt">int</span> <span class="n">end</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">tm</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="n">tm</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
        <span class="n">tm</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">end</span><span class="o">,</span> <span class="n">tm</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">end</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">v</span> <span class="o">:</span> <span class="n">tm</span><span class="o">.</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">v</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">s</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">tm</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="n">tm</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">start</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
                <span class="n">tm</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">end</span><span class="o">,</span> <span class="n">tm</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">end</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/**
 * Your MyCalendarTwo object will be instantiated and called as such:
 * MyCalendarTwo obj = new MyCalendarTwo();
 * boolean param_1 = obj.book(start,end);
 */</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-cpp highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">MyCalendarTwo</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">m</span><span class="p">;</span>

    <span class="n">MyCalendarTwo</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="kt">bool</span> <span class="n">book</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span> <span class="p">{</span>
        <span class="o">++</span><span class="n">m</span><span class="p">[</span><span class="n">start</span><span class="p">];</span>
        <span class="o">--</span><span class="n">m</span><span class="p">[</span><span class="n">end</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="p">[</span><span class="n">_</span><span class="p">,</span> <span class="n">v</span><span class="p">]</span> <span class="o">:</span> <span class="n">m</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">v</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
                <span class="o">--</span><span class="n">m</span><span class="p">[</span><span class="n">start</span><span class="p">];</span>
                <span class="o">++</span><span class="n">m</span><span class="p">[</span><span class="n">end</span><span class="p">];</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="cm">/**
 * Your MyCalendarTwo object will be instantiated and called as such:
 * MyCalendarTwo* obj = new MyCalendarTwo();
 * bool param_1 = obj-&gt;book(start,end);
 */</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-py highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kn">from</span> <span class="nn">sortedcontainers</span> <span class="kn">import</span> <span class="n">SortedDict</span>

<span class="k">class</span> <span class="nc">MyCalendarTwo</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">sd</span> <span class="o">=</span> <span class="n">SortedDict</span><span class="p">()</span> <span class="c1"># cannot be dict like self.sd={}
</span>
    <span class="k">def</span> <span class="nf">book</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">sd</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">sd</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">sd</span><span class="p">[</span><span class="n">end</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">sd</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">sd</span><span class="p">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">v</span>
            <span class="k">if</span> <span class="n">s</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">sd</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">sd</span><span class="p">[</span><span class="n">end</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>


<span class="c1"># Your MyCalendarTwo object will be instantiated and called as such:
# obj = MyCalendarTwo()
# param_1 = obj.book(start,end)
</span>
<span class="c1">############
</span>
<span class="k">class</span> <span class="nc">MyCalendarTwo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># æ¯ä¸ªè¢«bookäºçåºé´
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">booked</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="c1"># æ¯ä¸ªéå äºçåºé´
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">overlaped</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">book</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
        <span class="s">"""
        :type start: int
        :type end: int
        :rtype: bool
        """</span>
        <span class="k">for</span> <span class="n">os</span><span class="p">,</span> <span class="n">oe</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">overlaped</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">max</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">min</span><span class="p">(</span><span class="n">oe</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">bs</span><span class="p">,</span> <span class="n">be</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">booked</span><span class="p">:</span>
            <span class="n">ss</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">bs</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span>
            <span class="n">ee</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">be</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ss</span> <span class="o">&lt;</span> <span class="n">ee</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">overlaped</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">ss</span><span class="p">,</span> <span class="n">ee</span><span class="p">))</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">booked</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">True</span>


<span class="c1"># Your MyCalendarTwo object will be instantiated and called as such:
# obj = MyCalendarTwo()
# param_1 = obj.book(start,end)
</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-go highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">type</span> <span class="n">MyCalendarTwo</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="o">*</span><span class="n">redblacktree</span><span class="o">.</span><span class="n">Tree</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">Constructor</span><span class="p">()</span> <span class="n">MyCalendarTwo</span> <span class="p">{</span>
	<span class="k">return</span> <span class="n">MyCalendarTwo</span><span class="p">{</span><span class="n">redblacktree</span><span class="o">.</span><span class="n">NewWithIntComparator</span><span class="p">()}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">this</span> <span class="o">*</span><span class="n">MyCalendarTwo</span><span class="p">)</span> <span class="n">Book</span><span class="p">(</span><span class="n">start</span> <span class="kt">int</span><span class="p">,</span> <span class="n">end</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
	<span class="n">add</span> <span class="o">:=</span> <span class="k">func</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="n">v</span><span class="p">,</span> <span class="n">ok</span> <span class="o">:=</span> <span class="n">this</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">key</span><span class="p">);</span> <span class="n">ok</span> <span class="p">{</span>
			<span class="n">this</span><span class="o">.</span><span class="n">Put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="o">+</span><span class="n">val</span><span class="p">)</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">this</span><span class="o">.</span><span class="n">Put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">add</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
	<span class="n">add</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="o">-</span><span class="m">1</span><span class="p">)</span>
	<span class="n">s</span> <span class="o">:=</span> <span class="m">0</span>
	<span class="n">it</span> <span class="o">:=</span> <span class="n">this</span><span class="o">.</span><span class="n">Iterator</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">it</span><span class="o">.</span><span class="n">Next</span><span class="p">()</span> <span class="p">{</span>
		<span class="n">s</span> <span class="o">+=</span> <span class="n">it</span><span class="o">.</span><span class="n">Value</span><span class="p">()</span><span class="o">.</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">s</span> <span class="o">&gt;</span> <span class="m">2</span> <span class="p">{</span>
			<span class="n">add</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="o">-</span><span class="m">1</span><span class="p">)</span>
			<span class="n">add</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
			<span class="k">return</span> <span class="no">false</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="no">true</span>
<span class="p">}</span>

<span class="c">/**
 * Your MyCalendarTwo object will be instantiated and called as such:
 * obj := Constructor();
 * param_1 := obj.Book(start,end);
 */</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-ts highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nx">MyCalendarTwo</span> <span class="p">{</span>
    <span class="k">private</span> <span class="nx">events</span><span class="p">:</span> <span class="p">[</span><span class="kr">number</span><span class="p">,</span> <span class="kr">number</span><span class="p">][];</span>
    <span class="k">private</span> <span class="nx">overlaps</span><span class="p">:</span> <span class="p">[</span><span class="kr">number</span><span class="p">,</span> <span class="kr">number</span><span class="p">][];</span>

    <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">events</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">overlaps</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="p">}</span>

    <span class="nx">book</span><span class="p">(</span><span class="nx">start</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">end</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="p">[</span><span class="nx">s</span><span class="p">,</span> <span class="nx">e</span><span class="p">]</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">overlaps</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">end</span><span class="p">,</span> <span class="nx">e</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="p">[</span><span class="nx">s</span><span class="p">,</span> <span class="nx">e</span><span class="p">]</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">events</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">end</span><span class="p">,</span> <span class="nx">e</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">overlaps</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">s</span><span class="p">),</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">end</span><span class="p">,</span> <span class="nx">e</span><span class="p">)]);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">]);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**
 * Your MyCalendarTwo object will be instantiated and called as such:
 * var obj = new MyCalendarTwo()
 * var param_1 = obj.book(start,end)
 */</span>

</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-js highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">var</span> <span class="nx">MyCalendarTwo</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">events</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">overlaps</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">};</span>

<span class="cm">/**
 * @param {number} start
 * @param {number} end
 * @return {boolean}
 */</span>
<span class="nx">MyCalendarTwo</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">book</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="p">[</span><span class="nx">s</span><span class="p">,</span> <span class="nx">e</span><span class="p">]</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">overlaps</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">end</span><span class="p">,</span> <span class="nx">e</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="p">[</span><span class="nx">s</span><span class="p">,</span> <span class="nx">e</span><span class="p">]</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">events</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">end</span><span class="p">,</span> <span class="nx">e</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">overlaps</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">s</span><span class="p">),</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">end</span><span class="p">,</span> <span class="nx">e</span><span class="p">)]);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">]);</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**
 * Your MyCalendarTwo object will be instantiated and called as such:
 * var obj = new MyCalendarTwo()
 * var param_1 = obj.book(start,end)
 */</span>

</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-731.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
