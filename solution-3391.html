<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-3391.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-3391.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>3391 - Design a 3D Binary Matrix with Efficient Layer Tracking</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode 3391. Design a 3D Binary Matrix with Efficient Layer Tracking ð Description You are given a n x n x n binary 3D array matrix. Implement the Matrix3D class: Matrix3D(int n) Initializes the object with the 3D binary array matrix, where all elements are initially...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-3391.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-3391.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-3391.html" rel="stylesheet"/>
   <link href="solution-3391.html" rel="stylesheet"/>
   <link href="solution-3391.html" rel="stylesheet"/>
   <link href="solution-3391.html" rel="stylesheet"/>
   <link href="solution-3391.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="3391 - Design a 3D Binary Matrix with Efficient Layer Tracking" property="og:title"/>
   <meta content="Leetcode 3391. Design a 3D Binary Matrix with Efficient Layer Tracking ð Description You are given a n x n x n binary 3D array matrix. Implement the Matrix3D class: Matrix3D(int n) Initializes the object with the 3D binary array matrix, where all elements are initially set to 0. void setCell(int x, int y, int z) Sets the value at matrix[x][y][z] to 1. void unsetCell(int x, int y, int z) Sets the value at matrix[x][y][z] to 0. int largestMatrix() Returns the index x where matrix[x] contains the most number of 1&amp;#39;s. If there are multiple such indices, return the largest x. &amp;nbsp; Example 1: Input: [&amp;quot;Matrix3D&amp;quot;, &amp;quot;setCell&amp;quot;, &amp;quot;largestMatrix&amp;quot;, &amp;quot;setCell&amp;quot;, &amp;quot;largestMatrix&amp;quot;, &amp;quot;setCell&amp;quot;, &amp;quot;largestMatrix&amp;quot;] [[3], [0, 0, 0], [], [1, 1, 2], [], [0, 0, 1], []] Output: [null, null, 0, null, 1, null, 0] Explanation Matrix3D matrix3D = new Matrix3D(3); // Initializes a 3 x 3 x 3 3D array matrix, filled with all 0&amp;#39;s. matrix3D.setCell(0, 0, 0); // Sets matrix[0][0][0] to 1. matrix3D.largestMatrix(); // Returns 0. matrix[0] has the most number of 1&amp;#39;s. matrix3D.setCell(1, 1, 2); // Sets matrix[1][1][2] to 1. matrix3D.largestMatrix(); // Returns 1. matrix[0] and matrix[1] tie with the most number of 1&amp;#39;s, but index 1 is bigger. matrix3D.setCell(0, 0, 1); // Sets matrix[0][0][1] to 1. matrix3D.largestMatrix(); // Returns 0. matrix[0] has the most number of 1&amp;#39;s. Example 2: Input: [&amp;quot;Matrix3D&amp;quot;, &amp;quot;setCell&amp;quot;, &amp;quot;largestMatrix&amp;quot;, &amp;quot;unsetCell&amp;quot;, &amp;quot;largestMatrix&amp;quot;] [[4], [2, 1, 1], [], [2, 1, 1], []] Output: [null, null, 2, null, 3] Explanation Matrix3D matrix3D = new Matrix3D(4); // Initializes a 4 x 4 x 4 3D array matrix, filled with all 0&amp;#39;s. matrix3D.setCell(2, 1, 1); // Sets matrix[2][1][1] to 1. matrix3D.largestMatrix(); // Returns 2. matrix[2] has the most number of 1&amp;#39;s. matrix3D.unsetCell(2, 1, 1); // Sets matrix[2][1][1] to 0. matrix3D.largestMatrix(); // Returns 3. All indices from 0 to 3 tie with the same number of 1&amp;#39;s, but index 3 is the biggest. &amp;nbsp; Constraints: 1 &amp;lt;= n &amp;lt;= 100 0 &amp;lt;= x, y, z &amp;lt; n At most 105 calls are made in total to setCell and unsetCell. At most 104 calls are made to largestMatrix. Solutions Solution 1: Counting + Ordered Set We use a three-dimensional array $\textit{g}$ to represent the matrix, where $\textit{g}[x][y][z]$ represents the value at coordinate $(x, y, z)$ in the matrix. We use an array $\textit{cnt}$ of length $n$ to record the number of 1s in each layer. We use an ordered set $\textit{sl}$ to maintain the number of 1s and the layer number for each layer. The elements in $\textit{sl}$ are $(\textit{cnt}[x], x)$, so $\textit{sl}$ can be sorted in descending order by the number of 1s, and in descending order by layer number if the number of 1s is the same. When calling the setCell method, we first check if $(x, y, z)$ has already been set to 1. If it has, we return directly. Otherwise, we set $\textit{g}[x][y][z]$ to 1, remove $(\textit{cnt}[x], x)$ from $\textit{sl}$, increment $\textit{cnt}[x]$ by 1, and add $(\textit{cnt}[x], x)$ to $\textit{sl}$. When calling the..." property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2025-01-04T00:00:00-08:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2025-01-04-3391-Design-a-3D-Binary-Matrix-with-Efficient-Layer-Tracking/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-3391.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="3391 - Design a 3D Binary Matrix with Efficient Layer Tracking" property="twitter:title"/>
   <meta content="Leetcode 3391. Design a 3D Binary Matrix with Efficient Layer Tracking ð Description You are given a n x n x n binary 3D array matrix. Implement the Matrix3D class: Matrix3D(int n) Initializes the object with the 3D binary array matrix, where all elements are initially set to 0. void setCell(int x, int y, int z) Sets the value at matrix[x][y][z] to 1. void unsetCell(int x, int y, int z) Sets the value at matrix[x][y][z] to 0. int largestMatrix() Returns the index x where matrix[x] contains the most number of 1&amp;#39;s. If there are multiple such indices, return the largest x. &amp;nbsp; Example 1: Input: [&amp;quot;Matrix3D&amp;quot;, &amp;quot;setCell&amp;quot;, &amp;quot;largestMatrix&amp;quot;, &amp;quot;setCell&amp;quot;, &amp;quot;largestMatrix&amp;quot;, &amp;quot;setCell&amp;quot;, &amp;quot;largestMatrix&amp;quot;] [[3], [0, 0, 0], [], [1, 1, 2], [], [0, 0, 1], []] Output: [null, null, 0, null, 1, null, 0] Explanation Matrix3D matrix3D = new Matrix3D(3); // Initializes a 3 x 3 x 3 3D array matrix, filled with all 0&amp;#39;s. matrix3D.setCell(0, 0, 0); // Sets matrix[0][0][0] to 1. matrix3D.largestMatrix(); // Returns 0. matrix[0] has the most number of 1&amp;#39;s. matrix3D.setCell(1, 1, 2); // Sets matrix[1][1][2] to 1. matrix3D.largestMatrix(); // Returns 1. matrix[0] and matrix[1] tie with the most number of 1&amp;#39;s, but index 1 is bigger. matrix3D.setCell(0, 0, 1); // Sets matrix[0][0][1] to 1. matrix3D.largestMatrix(); // Returns 0. matrix[0] has the most number of 1&amp;#39;s. Example 2: Input: [&amp;quot;Matrix3D&amp;quot;, &amp;quot;setCell&amp;quot;, &amp;quot;largestMatrix&amp;quot;, &amp;quot;unsetCell&amp;quot;, &amp;quot;largestMatrix&amp;quot;] [[4], [2, 1, 1], [], [2, 1, 1], []] Output: [null, null, 2, null, 3] Explanation Matrix3D matrix3D = new Matrix3D(4); // Initializes a 4 x 4 x 4 3D array matrix, filled with all 0&amp;#39;s. matrix3D.setCell(2, 1, 1); // Sets matrix[2][1][1] to 1. matrix3D.largestMatrix(); // Returns 2. matrix[2] has the most number of 1&amp;#39;s. matrix3D.unsetCell(2, 1, 1); // Sets matrix[2][1][1] to 0. matrix3D.largestMatrix(); // Returns 3. All indices from 0 to 3 tie with the same number of 1&amp;#39;s, but index 3 is the biggest. &amp;nbsp; Constraints: 1 &amp;lt;= n &amp;lt;= 100 0 &amp;lt;= x, y, z &amp;lt; n At most 105 calls are made in total to setCell and unsetCell. At most 104 calls are made to largestMatrix. Solutions Solution 1: Counting + Ordered Set We use a three-dimensional array $\textit{g}$ to represent the matrix, where $\textit{g}[x][y][z]$ represents the value at coordinate $(x, y, z)$ in the matrix. We use an array $\textit{cnt}$ of length $n$ to record the number of 1s in each layer. We use an ordered set $\textit{sl}$ to maintain the number of 1s and the layer number for each layer. The elements in $\textit{sl}$ are $(\textit{cnt}[x], x)$, so $\textit{sl}$ can be sorted in descending order by the number of 1s, and in descending order by layer number if the number of 1s is the same. When calling the setCell method, we first check if $(x, y, z)$ has already been set to 1. If it has, we return directly. Otherwise, we set $\textit{g}[x][y][z]$ to 1, remove $(\textit{cnt}[x], x)$ from $\textit{sl}$, increment $\textit{cnt}[x]$ by 1, and add $(\textit{cnt}[x], x)$ to $\textit{sl}$. When calling the..." property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    3391 - Design a 3D Binary Matrix with Efficient Layer Tracking | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="3391 - Design a 3D Binary Matrix with Efficient Layer Tracking" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-3391.html" rel="canonical">
          <meta content="https://leetcode.ca/2025-01-04-3391-Design-a-3D-Binary-Matrix-with-Efficient-Layer-Tracking/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2025-01-04T00:00:00-08:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"3391 - Design a 3D Binary Matrix with Efficient Layer Tracking","dateModified":"2025-01-04T00:00:00-08:00","datePublished":"2025-01-04T00:00:00-08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2025-01-04-3391-Design-a-3D-Binary-Matrix-with-Efficient-Layer-Tracking/"},"url":"https://leetcode.ca/2025-01-04-3391-Design-a-3D-Binary-Matrix-with-Efficient-Layer-Tracking/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <!-- problem:start -->
      <h1 id="3391-design-a-3d-binary-matrix-with-efficient-layer-tracking-">
       <a href="solution-3391.html">
        3391. Design a 3D Binary Matrix with Efficient Layer Tracking ð
       </a>
      </h1>
      <h2 id="description">
       Description
      </h2>
      <!-- description:start -->
      <p>
       You are given a
       <code>
        n x n x n
       </code>
       <strong>
        binary
       </strong>
       3D array
       <code>
        matrix
       </code>
       .
      </p>
      <p>
       Implement the
       <code>
        Matrix3D
       </code>
       class:
      </p>
      <ul>
       <li>
        <code>
         Matrix3D(int n)
        </code>
        Initializes the object with the 3D binary array
        <code>
         matrix
        </code>
        , where
        <strong>
         all
        </strong>
        elements are initially set to 0.
       </li>
       <li>
        <code>
         void setCell(int x, int y, int z)
        </code>
        Sets the value at
        <code>
         matrix[x][y][z]
        </code>
        to 1.
       </li>
       <li>
        <code>
         void unsetCell(int x, int y, int z)
        </code>
        Sets the value at
        <code>
         matrix[x][y][z]
        </code>
        to 0.
       </li>
       <li>
        <code>
         int largestMatrix()
        </code>
        Returns the index
        <code>
         x
        </code>
        where
        <code>
         matrix[x]
        </code>
        contains the most number of 1's. If there are multiple such indices, return the
        <strong>
         largest
        </strong>
        <code>
         x
        </code>
        .
       </li>
      </ul>
      <p>
      </p>
      <p>
       <strong class="example">
        Example 1:
       </strong>
      </p>
      <div class="example-block">
       <p>
        <strong>
         Input:
        </strong>
        <br/>
        <span class="example-io">
         ["Matrix3D", "setCell", "largestMatrix", "setCell", "largestMatrix", "setCell", "largestMatrix"]
         <br/>
         [[3], [0, 0, 0], [], [1, 1, 2], [], [0, 0, 1], []]
        </span>
       </p>
       <p>
        <strong>
         Output:
        </strong>
        <br/>
        <span class="example-io">
         [null, null, 0, null, 1, null, 0]
        </span>
       </p>
       <p>
        <strong>
         Explanation
        </strong>
       </p>
       Matrix3D matrix3D = new Matrix3D(3); // Initializes a
       <code>
        3 x 3 x 3
       </code>
       3D array
       <code>
        matrix
       </code>
       , filled with all 0's.
       <br/>
       matrix3D.setCell(0, 0, 0); // Sets
       <code>
        matrix[0][0][0]
       </code>
       to 1.
       <br/>
       matrix3D.largestMatrix(); // Returns 0.
       <code>
        matrix[0]
       </code>
       has the most number of 1's.
       <br/>
       matrix3D.setCell(1, 1, 2); // Sets
       <code>
        matrix[1][1][2]
       </code>
       to 1.
       <br/>
       matrix3D.largestMatrix(); // Returns 1.
       <code>
        matrix[0]
       </code>
       and
       <code>
        matrix[1]
       </code>
       tie with the most number of 1's, but index 1 is bigger.
       <br/>
       matrix3D.setCell(0, 0, 1); // Sets
       <code>
        matrix[0][0][1]
       </code>
       to 1.
       <br/>
       matrix3D.largestMatrix(); // Returns 0.
       <code>
        matrix[0]
       </code>
       has the most number of 1's.
      </div>
      <p>
       <strong class="example">
        Example 2:
       </strong>
      </p>
      <div class="example-block">
       <p>
        <strong>
         Input:
        </strong>
        <br/>
        <span class="example-io">
         ["Matrix3D", "setCell", "largestMatrix", "unsetCell", "largestMatrix"]
         <br/>
         [[4], [2, 1, 1], [], [2, 1, 1], []]
        </span>
       </p>
       <p>
        <strong>
         Output:
        </strong>
        <br/>
        <span class="example-io">
         [null, null, 2, null, 3]
        </span>
       </p>
       <p>
        <strong>
         Explanation
        </strong>
       </p>
       Matrix3D matrix3D = new Matrix3D(4); // Initializes a
       <code>
        4 x 4 x 4
       </code>
       3D array
       <code>
        matrix
       </code>
       , filled with all 0's.
       <br/>
       matrix3D.setCell(2, 1, 1); // Sets
       <code>
        matrix[2][1][1]
       </code>
       to 1.
       <br/>
       matrix3D.largestMatrix(); // Returns 2.
       <code>
        matrix[2]
       </code>
       has the most number of 1's.
       <br/>
       matrix3D.unsetCell(2, 1, 1); // Sets
       <code>
        matrix[2][1][1]
       </code>
       to 0.
       <br/>
       matrix3D.largestMatrix(); // Returns 3. All indices from 0 to 3 tie with the same number of 1's, but index 3 is the biggest.
      </div>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         1 &lt;= n &lt;= 100
        </code>
       </li>
       <li>
        <code>
         0 &lt;= x, y, z &lt; n
        </code>
       </li>
       <li>
        At most
        <code>
         10
         <sup>
          5
         </sup>
        </code>
        calls are made in total to
        <code>
         setCell
        </code>
        and
        <code>
         unsetCell
        </code>
        .
       </li>
       <li>
        At most
        <code>
         10
         <sup>
          4
         </sup>
        </code>
        calls are made to
        <code>
         largestMatrix
        </code>
        .
       </li>
      </ul>
      <!-- description:end -->
      <h2 id="solutions">
       Solutions
      </h2>
      <!-- solution:start -->
      <h3 id="solution-1-counting--ordered-set">
       Solution 1: Counting + Ordered Set
      </h3>
      <p>
       We use a three-dimensional array $\textit{g}$ to represent the matrix, where $\textit{g}[x][y][z]$ represents the value at coordinate $(x, y, z)$ in the matrix. We use an array $\textit{cnt}$ of length $n$ to record the number of 1s in each layer. We use an ordered set $\textit{sl}$ to maintain the number of 1s and the layer number for each layer. The elements in $\textit{sl}$ are $(\textit{cnt}[x], x)$, so $\textit{sl}$ can be sorted in descending order by the number of 1s, and in descending order by layer number if the number of 1s is the same.
      </p>
      <p>
       When calling the
       <code class="language-plaintext highlighter-rouge">
        setCell
       </code>
       method, we first check if $(x, y, z)$ has already been set to 1. If it has, we return directly. Otherwise, we set $\textit{g}[x][y][z]$ to 1, remove $(\textit{cnt}[x], x)$ from $\textit{sl}$, increment $\textit{cnt}[x]$ by 1, and add $(\textit{cnt}[x], x)$ to $\textit{sl}$.
      </p>
      <p>
       When calling the
       <code class="language-plaintext highlighter-rouge">
        unsetCell
       </code>
       method, we first check if $(x, y, z)$ has already been set to 0. If it has, we return directly. Otherwise, we set $\textit{g}[x][y][z]$ to 0, remove $(\textit{cnt}[x], x)$ from $\textit{sl}$, decrement $\textit{cnt}[x]$ by 1, and if $\textit{cnt}[x]$ is greater than 0, add $(\textit{cnt}[x], x)$ to $\textit{sl}$.
      </p>
      <p>
       When calling the
       <code class="language-plaintext highlighter-rouge">
        largestMatrix
       </code>
       method, we return the second value of the first element in $\textit{sl}$. If $\textit{sl}$ is empty, we return $n - 1$.
      </p>
      <p>
       In terms of time complexity, the
       <code class="language-plaintext highlighter-rouge">
        setCell
       </code>
       and
       <code class="language-plaintext highlighter-rouge">
        unsetCell
       </code>
       methods both have a time complexity of $O(\log n)$, and the
       <code class="language-plaintext highlighter-rouge">
        largestMatrix
       </code>
       method has a time complexity of $O(1)$. The space complexity is $O(n^3)$.
      </p>
      <ul class="uk-tab" data-uk-switcher="{connect:'#2348bc13-efb0-45c7-8057-0812e90e6ae4'}">
       <li class="uk-active">
        <a href="solution-3391.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-3391.html">
         C++
        </a>
       </li>
       <li>
        <a href="solution-3391.html">
         Python
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="2348bc13-efb0-45c7-8057-0812e90e6ae4">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">matrix3D</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span><span class="o">[][][]</span> <span class="n">g</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">cnt</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">TreeSet</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;</span> <span class="n">sl</span>
        <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeSet</span><span class="o">&lt;&gt;((</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">==</span> <span class="n">b</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">?</span> <span class="n">b</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">-</span> <span class="n">a</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">:</span> <span class="n">b</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">-</span> <span class="n">a</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>

    <span class="kd">public</span> <span class="nf">matrix3D</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">g</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">n</span><span class="o">][</span><span class="n">n</span><span class="o">][</span><span class="n">n</span><span class="o">];</span>
        <span class="n">cnt</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCell</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">,</span> <span class="kt">int</span> <span class="n">z</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">g</span><span class="o">[</span><span class="n">x</span><span class="o">][</span><span class="n">y</span><span class="o">][</span><span class="n">z</span><span class="o">]</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">g</span><span class="o">[</span><span class="n">x</span><span class="o">][</span><span class="n">y</span><span class="o">][</span><span class="n">z</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="n">sl</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span><span class="n">cnt</span><span class="o">[</span><span class="n">x</span><span class="o">],</span> <span class="n">x</span><span class="o">});</span>
        <span class="n">cnt</span><span class="o">[</span><span class="n">x</span><span class="o">]++;</span>
        <span class="n">sl</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span><span class="n">cnt</span><span class="o">[</span><span class="n">x</span><span class="o">],</span> <span class="n">x</span><span class="o">});</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">unsetCell</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">,</span> <span class="kt">int</span> <span class="n">z</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">g</span><span class="o">[</span><span class="n">x</span><span class="o">][</span><span class="n">y</span><span class="o">][</span><span class="n">z</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">g</span><span class="o">[</span><span class="n">x</span><span class="o">][</span><span class="n">y</span><span class="o">][</span><span class="n">z</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="n">sl</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span><span class="n">cnt</span><span class="o">[</span><span class="n">x</span><span class="o">],</span> <span class="n">x</span><span class="o">});</span>
        <span class="n">cnt</span><span class="o">[</span><span class="n">x</span><span class="o">]--;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">cnt</span><span class="o">[</span><span class="n">x</span><span class="o">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">sl</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span><span class="n">cnt</span><span class="o">[</span><span class="n">x</span><span class="o">],</span> <span class="n">x</span><span class="o">});</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">largestMatrix</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">sl</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">?</span> <span class="n">g</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">sl</span><span class="o">.</span><span class="na">first</span><span class="o">()[</span><span class="mi">1</span><span class="o">];</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/**
 * Your matrix3D object will be instantiated and called as such:
 * matrix3D obj = new matrix3D(n);
 * obj.setCell(x,y,z);
 * obj.unsetCell(x,y,z);
 * int param_3 = obj.largestMatrix();
 */</span>

</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-cpp highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">matrix3D</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&gt;</span> <span class="n">g</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">cnt</span><span class="p">;</span>
    <span class="n">set</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">sl</span><span class="p">;</span>

<span class="nl">public:</span>
    <span class="n">matrix3D</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">g</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">)));</span>
        <span class="n">cnt</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">setCell</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">z</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">g</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">sl</span><span class="p">.</span><span class="n">erase</span><span class="p">({</span><span class="o">-</span><span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="o">-</span><span class="n">x</span><span class="p">});</span>
        <span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
        <span class="n">sl</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="o">-</span><span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="o">-</span><span class="n">x</span><span class="p">});</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">unsetCell</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">z</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">g</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">sl</span><span class="p">.</span><span class="n">erase</span><span class="p">({</span><span class="o">-</span><span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="o">-</span><span class="n">x</span><span class="p">});</span>
        <span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">--</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="p">{</span>
            <span class="n">sl</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="o">-</span><span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="o">-</span><span class="n">x</span><span class="p">});</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">largestMatrix</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">sl</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">?</span> <span class="n">g</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="n">sl</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="cm">/**
 * Your matrix3D object will be instantiated and called as such:
 * matrix3D* obj = new matrix3D(n);
 * obj-&gt;setCell(x,y,z);
 * obj-&gt;unsetCell(x,y,z);
 * int param_3 = obj-&gt;largestMatrix();
 */</span>

</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-py highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kn">from</span> <span class="nn">sortedcontainers</span> <span class="kn">import</span> <span class="n">SortedList</span>


<span class="k">class</span> <span class="nc">matrix3D</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">g</span> <span class="o">=</span> <span class="p">[[[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">cnt</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">sl</span> <span class="o">=</span> <span class="n">SortedList</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">setCell</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">g</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">g</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">sl</span><span class="p">.</span><span class="n">discard</span><span class="p">((</span><span class="bp">self</span><span class="p">.</span><span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">x</span><span class="p">))</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">sl</span><span class="p">.</span><span class="n">add</span><span class="p">((</span><span class="bp">self</span><span class="p">.</span><span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">x</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">unsetCell</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">g</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">g</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">sl</span><span class="p">.</span><span class="n">discard</span><span class="p">((</span><span class="bp">self</span><span class="p">.</span><span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">x</span><span class="p">))</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">]:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">sl</span><span class="p">.</span><span class="n">add</span><span class="p">((</span><span class="bp">self</span><span class="p">.</span><span class="n">cnt</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">x</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">largestMatrix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">sl</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">sl</span> <span class="k">else</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">g</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>


<span class="c1"># Your matrix3D object will be instantiated and called as such:
# obj = matrix3D(n)
# obj.setCell(x,y,z)
# obj.unsetCell(x,y,z)
# param_3 = obj.largestMatrix()
</span>
</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-3391.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
