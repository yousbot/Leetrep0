<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-1117.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-1117.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>1117 - Building H2O</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode 1117. Building H2O Description There are two kinds of threads: oxygen and hydrogen. Your goal is to group these threads to form water molecules. There is a barrier where each thread has to wait until a complete molecule can be formed. Hydrogen and oxygen threads...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-1117.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-1117.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-1117.html" rel="stylesheet"/>
   <link href="solution-1117.html" rel="stylesheet"/>
   <link href="solution-1117.html" rel="stylesheet"/>
   <link href="solution-1117.html" rel="stylesheet"/>
   <link href="solution-1117.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="1117 - Building H2O" property="og:title"/>
   <meta content='Leetcode 1117. Building H2O Description There are two kinds of threads: oxygen and hydrogen. Your goal is to group these threads to form water molecules. There is a barrier where each thread has to wait until a complete molecule can be formed. Hydrogen and oxygen threads will be given releaseHydrogen and releaseOxygen methods respectively, which will allow them to pass the barrier. These threads should pass the barrier in groups of three, and they must immediately bond with each other to form a water molecule. You must guarantee that all the threads from one molecule bond before any other threads from the next molecule do. In other words: If an oxygen thread arrives at the barrier when no hydrogen threads are present, it must wait for two hydrogen threads. If a hydrogen thread arrives at the barrier when no other threads are present, it must wait for an oxygen thread and another hydrogen thread. We do not have to worry about matching the threads up explicitly; the threads do not necessarily know which other threads they are paired up with. The key is that threads pass the barriers in complete sets; thus, if we examine the sequence of threads that bind and divide them into groups of three, each group should contain one oxygen and two hydrogen threads. Write synchronization code for oxygen and hydrogen molecules that enforces these constraints. &amp;nbsp; Example 1: Input: water = &amp;quot;HOH&amp;quot; Output: &amp;quot;HHO&amp;quot; Explanation: &amp;quot;HOH&amp;quot; and &amp;quot;OHH&amp;quot; are also valid answers. Example 2: Input: water = &amp;quot;OOHHHH&amp;quot; Output: &amp;quot;HHOHHO&amp;quot; Explanation: &amp;quot;HOHHHO&amp;quot;, &amp;quot;OHHHHO&amp;quot;, &amp;quot;HHOHOH&amp;quot;, &amp;quot;HOHHOH&amp;quot;, &amp;quot;OHHHOH&amp;quot;, &amp;quot;HHOOHH&amp;quot;, &amp;quot;HOHOHH&amp;quot; and &amp;quot;OHHOHH&amp;quot; are also valid answers. &amp;nbsp; Constraints: 3 * n == water.length 1 &amp;lt;= n &amp;lt;= 20 water[i] is either &amp;#39;H&amp;#39; or &amp;#39;O&amp;#39;. There will be exactly 2 * n &amp;#39;H&amp;#39; in water. There will be exactly n &amp;#39;O&amp;#39; in water. Solutions This problem can be solved using semaphores. In the class, create two semaphores semaphoreHydrogen and semaphoreOxygen for methods hydrogen() and oxygen() respectively. Initially, semaphoreHydrogen has 2 permits, while semaphoreOxygen has 0 permits. For method hydrogen, acquire a permit from semaphoreHydrogen, call releaseHydrogen.run() and release a permit back to semaphoreOxygen. For method oxygen, adquire two permits from semaphoreOxygen, call releaseOxygen.run() and release two permits back to semaphoreHydrogen. Java C++ Python class H2O { private Semaphore h = new Semaphore(2); private Semaphore o = new Semaphore(0); public H2O() { } public void hydrogen(Runnable releaseHydrogen) throws InterruptedException { h.acquire(); // releaseHydrogen.run() outputs "H". Do not change or remove this line. releaseHydrogen.run(); o.release(); } public void oxygen(Runnable releaseOxygen) throws InterruptedException { o.acquire(2); // releaseOxygen.run() outputs "O". Do not change or remove this line. releaseOxygen.run(); h.release(2); } } #include &amp;lt;semaphore.h&amp;gt; class H2O { private: sem_t h, o; int st; public: H2O() { sem_init(&amp;amp;h, 0, 2); sem_init(&amp;amp;o, 0, 0); st = 0; } void hydrogen(function&amp;lt;void()&amp;gt; releaseHydrogen) { sem_wait(&amp;amp;h); // releaseHydrogen() outputs "H". Do not change or remove this line. releaseHydrogen(); ++st; if (st == 2) { sem_post(&amp;amp;o); } } void oxygen(function&amp;lt;void()&amp;gt; releaseOxygen) { sem_wait(&amp;amp;o); // releaseOxygen()...' property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2018-12-21T00:00:00-08:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2018-12-21-1117-Building-H2O/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-1117.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="1117 - Building H2O" property="twitter:title"/>
   <meta content='Leetcode 1117. Building H2O Description There are two kinds of threads: oxygen and hydrogen. Your goal is to group these threads to form water molecules. There is a barrier where each thread has to wait until a complete molecule can be formed. Hydrogen and oxygen threads will be given releaseHydrogen and releaseOxygen methods respectively, which will allow them to pass the barrier. These threads should pass the barrier in groups of three, and they must immediately bond with each other to form a water molecule. You must guarantee that all the threads from one molecule bond before any other threads from the next molecule do. In other words: If an oxygen thread arrives at the barrier when no hydrogen threads are present, it must wait for two hydrogen threads. If a hydrogen thread arrives at the barrier when no other threads are present, it must wait for an oxygen thread and another hydrogen thread. We do not have to worry about matching the threads up explicitly; the threads do not necessarily know which other threads they are paired up with. The key is that threads pass the barriers in complete sets; thus, if we examine the sequence of threads that bind and divide them into groups of three, each group should contain one oxygen and two hydrogen threads. Write synchronization code for oxygen and hydrogen molecules that enforces these constraints. &amp;nbsp; Example 1: Input: water = &amp;quot;HOH&amp;quot; Output: &amp;quot;HHO&amp;quot; Explanation: &amp;quot;HOH&amp;quot; and &amp;quot;OHH&amp;quot; are also valid answers. Example 2: Input: water = &amp;quot;OOHHHH&amp;quot; Output: &amp;quot;HHOHHO&amp;quot; Explanation: &amp;quot;HOHHHO&amp;quot;, &amp;quot;OHHHHO&amp;quot;, &amp;quot;HHOHOH&amp;quot;, &amp;quot;HOHHOH&amp;quot;, &amp;quot;OHHHOH&amp;quot;, &amp;quot;HHOOHH&amp;quot;, &amp;quot;HOHOHH&amp;quot; and &amp;quot;OHHOHH&amp;quot; are also valid answers. &amp;nbsp; Constraints: 3 * n == water.length 1 &amp;lt;= n &amp;lt;= 20 water[i] is either &amp;#39;H&amp;#39; or &amp;#39;O&amp;#39;. There will be exactly 2 * n &amp;#39;H&amp;#39; in water. There will be exactly n &amp;#39;O&amp;#39; in water. Solutions This problem can be solved using semaphores. In the class, create two semaphores semaphoreHydrogen and semaphoreOxygen for methods hydrogen() and oxygen() respectively. Initially, semaphoreHydrogen has 2 permits, while semaphoreOxygen has 0 permits. For method hydrogen, acquire a permit from semaphoreHydrogen, call releaseHydrogen.run() and release a permit back to semaphoreOxygen. For method oxygen, adquire two permits from semaphoreOxygen, call releaseOxygen.run() and release two permits back to semaphoreHydrogen. Java C++ Python class H2O { private Semaphore h = new Semaphore(2); private Semaphore o = new Semaphore(0); public H2O() { } public void hydrogen(Runnable releaseHydrogen) throws InterruptedException { h.acquire(); // releaseHydrogen.run() outputs "H". Do not change or remove this line. releaseHydrogen.run(); o.release(); } public void oxygen(Runnable releaseOxygen) throws InterruptedException { o.acquire(2); // releaseOxygen.run() outputs "O". Do not change or remove this line. releaseOxygen.run(); h.release(2); } } #include &amp;lt;semaphore.h&amp;gt; class H2O { private: sem_t h, o; int st; public: H2O() { sem_init(&amp;amp;h, 0, 2); sem_init(&amp;amp;o, 0, 0); st = 0; } void hydrogen(function&amp;lt;void()&amp;gt; releaseHydrogen) { sem_wait(&amp;amp;h); // releaseHydrogen() outputs "H". Do not change or remove this line. releaseHydrogen(); ++st; if (st == 2) { sem_post(&amp;amp;o); } } void oxygen(function&amp;lt;void()&amp;gt; releaseOxygen) { sem_wait(&amp;amp;o); // releaseOxygen()...' property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    1117 - Building H2O | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="1117 - Building H2O" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-1117.html" rel="canonical">
          <meta content="https://leetcode.ca/2018-12-21-1117-Building-H2O/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2018-12-21T00:00:00-08:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"1117 - Building H2O","dateModified":"2018-12-21T00:00:00-08:00","datePublished":"2018-12-21T00:00:00-08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2018-12-21-1117-Building-H2O/"},"url":"https://leetcode.ca/2018-12-21-1117-Building-H2O/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <h1 id="1117-building-h2o">
       <a href="solution-1117.html">
        1117. Building H2O
       </a>
      </h1>
      <h2 id="description">
       Description
      </h2>
      <p>
       There are two kinds of threads:
       <code>
        oxygen
       </code>
       and
       <code>
        hydrogen
       </code>
       . Your goal is to group these threads to form water molecules.
      </p>
      <p>
       There is a barrier where each thread has to wait until a complete molecule can be formed. Hydrogen and oxygen threads will be given
       <code>
        releaseHydrogen
       </code>
       and
       <code>
        releaseOxygen
       </code>
       methods respectively, which will allow them to pass the barrier. These threads should pass the barrier in groups of three, and they must immediately bond with each other to form a water molecule. You must guarantee that all the threads from one molecule bond before any other threads from the next molecule do.
      </p>
      <p>
       In other words:
      </p>
      <ul>
       <li>
        If an oxygen thread arrives at the barrier when no hydrogen threads are present, it must wait for two hydrogen threads.
       </li>
       <li>
        If a hydrogen thread arrives at the barrier when no other threads are present, it must wait for an oxygen thread and another hydrogen thread.
       </li>
      </ul>
      <p>
       We do not have to worry about matching the threads up explicitly; the threads do not necessarily know which other threads they are paired up with. The key is that threads pass the barriers in complete sets; thus, if we examine the sequence of threads that bind and divide them into groups of three, each group should contain one oxygen and two hydrogen threads.
      </p>
      <p>
       Write synchronization code for oxygen and hydrogen molecules that enforces these constraints.
      </p>
      <p>
      </p>
      <p>
       <strong class="example">
        Example 1:
       </strong>
      </p>
      <pre>
<strong>Input:</strong> water = "HOH"
<strong>Output:</strong> "HHO"
<strong>Explanation:</strong> "HOH" and "OHH" are also valid answers.
</pre>
      <p>
       <strong class="example">
        Example 2:
       </strong>
      </p>
      <pre>
<strong>Input:</strong> water = "OOHHHH"
<strong>Output:</strong> "HHOHHO"
<strong>Explanation:</strong> "HOHHHO", "OHHHHO", "HHOHOH", "HOHHOH", "OHHHOH", "HHOOHH", "HOHOHH" and "OHHOHH" are also valid answers.
</pre>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         3 * n == water.length
        </code>
       </li>
       <li>
        <code>
         1 &lt;= n &lt;= 20
        </code>
       </li>
       <li>
        <code>
         water[i]
        </code>
        is either
        <code>
         'H'
        </code>
        or
        <code>
         'O'
        </code>
        .
       </li>
       <li>
        There will be exactly
        <code>
         2 * n
        </code>
        <code>
         'H'
        </code>
        in
        <code>
         water
        </code>
        .
       </li>
       <li>
        There will be exactly
        <code>
         n
        </code>
        <code>
         'O'
        </code>
        in
        <code>
         water
        </code>
        .
       </li>
      </ul>
      <h2 id="solutions">
       Solutions
      </h2>
      <p>
       This problem can be solved using semaphores. In the class, create two semaphores
       <code class="language-plaintext highlighter-rouge">
        semaphoreHydrogen
       </code>
       and
       <code class="language-plaintext highlighter-rouge">
        semaphoreOxygen
       </code>
       for methods
       <code class="language-plaintext highlighter-rouge">
        hydrogen()
       </code>
       and
       <code class="language-plaintext highlighter-rouge">
        oxygen()
       </code>
       respectively. Initially,
       <code class="language-plaintext highlighter-rouge">
        semaphoreHydrogen
       </code>
       has 2 permits, while
       <code class="language-plaintext highlighter-rouge">
        semaphoreOxygen
       </code>
       has 0 permits.
      </p>
      <p>
       For method
       <code class="language-plaintext highlighter-rouge">
        hydrogen
       </code>
       , acquire a permit from
       <code class="language-plaintext highlighter-rouge">
        semaphoreHydrogen
       </code>
       , call
       <code class="language-plaintext highlighter-rouge">
        releaseHydrogen.run()
       </code>
       and release a permit back to
       <code class="language-plaintext highlighter-rouge">
        semaphoreOxygen
       </code>
       .
      </p>
      <p>
       For method
       <code class="language-plaintext highlighter-rouge">
        oxygen
       </code>
       , adquire
       <strong>
        two
       </strong>
       permits from
       <code class="language-plaintext highlighter-rouge">
        semaphoreOxygen
       </code>
       , call
       <code class="language-plaintext highlighter-rouge">
        releaseOxygen.run()
       </code>
       and release
       <strong>
        two
       </strong>
       permits back to
       <code class="language-plaintext highlighter-rouge">
        semaphoreHydrogen
       </code>
       .
      </p>
      <ul class="uk-tab" data-uk-switcher="{connect:'#8f5d3d95-df86-400d-9dbe-97b16d39a2e4'}">
       <li class="uk-active">
        <a href="solution-1117.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-1117.html">
         C++
        </a>
       </li>
       <li>
        <a href="solution-1117.html">
         Python
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="8f5d3d95-df86-400d-9dbe-97b16d39a2e4">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">H2O</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Semaphore</span> <span class="n">h</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Semaphore</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">Semaphore</span> <span class="n">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Semaphore</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

    <span class="kd">public</span> <span class="nf">H2O</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">hydrogen</span><span class="o">(</span><span class="nc">Runnable</span> <span class="n">releaseHydrogen</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
        <span class="n">h</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
        <span class="c1">// releaseHydrogen.run() outputs "H". Do not change or remove this line.</span>
        <span class="n">releaseHydrogen</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
        <span class="n">o</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">oxygen</span><span class="o">(</span><span class="nc">Runnable</span> <span class="n">releaseOxygen</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
        <span class="n">o</span><span class="o">.</span><span class="na">acquire</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
        <span class="c1">// releaseOxygen.run() outputs "O". Do not change or remove this line.</span>
        <span class="n">releaseOxygen</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
        <span class="n">h</span><span class="o">.</span><span class="na">release</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-cpp highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;semaphore.h&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">H2O</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">sem_t</span> <span class="n">h</span><span class="p">,</span> <span class="n">o</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">st</span><span class="p">;</span>

<span class="nl">public:</span>
    <span class="n">H2O</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">sem_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">h</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
        <span class="n">sem_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">o</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">st</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">hydrogen</span><span class="p">(</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">()</span><span class="o">&gt;</span> <span class="n">releaseHydrogen</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">sem_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">h</span><span class="p">);</span>
        <span class="c1">// releaseHydrogen() outputs "H". Do not change or remove this line.</span>
        <span class="n">releaseHydrogen</span><span class="p">();</span>
        <span class="o">++</span><span class="n">st</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">st</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">sem_post</span><span class="p">(</span><span class="o">&amp;</span><span class="n">o</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">oxygen</span><span class="p">(</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">()</span><span class="o">&gt;</span> <span class="n">releaseOxygen</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">sem_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">o</span><span class="p">);</span>
        <span class="c1">// releaseOxygen() outputs "O". Do not change or remove this line.</span>
        <span class="n">releaseOxygen</span><span class="p">();</span>
        <span class="n">st</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">sem_post</span><span class="p">(</span><span class="o">&amp;</span><span class="n">h</span><span class="p">);</span>
        <span class="n">sem_post</span><span class="p">(</span><span class="o">&amp;</span><span class="n">h</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-py highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Semaphore</span>


<span class="k">class</span> <span class="nc">H2O</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">h</span> <span class="o">=</span> <span class="n">Semaphore</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">o</span> <span class="o">=</span> <span class="n">Semaphore</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">hydrogen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">releaseHydrogen</span><span class="p">:</span> <span class="s">"Callable[[], None]"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">h</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="c1"># releaseHydrogen() outputs "H". Do not change or remove this line.
</span>        <span class="n">releaseHydrogen</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">h</span><span class="p">.</span><span class="n">_value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># semaphore value checker api
</span>            <span class="bp">self</span><span class="p">.</span><span class="n">o</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">oxygen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">releaseOxygen</span><span class="p">:</span> <span class="s">"Callable[[], None]"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">o</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="c1"># releaseOxygen() outputs "O". Do not change or remove this line.
</span>        <span class="n">releaseOxygen</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">h</span><span class="p">.</span><span class="n">release</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-1117.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
