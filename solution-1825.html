<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-1825.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-1825.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>1825 - Finding MK Average</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode Formatted question description: https://leetcode.ca/all/1825.html Level Hard Description You are given two integers, m and k, and a stream of integers. You are tasked to implement a data structure that calculates the MKAverage for the stream. The MKAverage can be calculated using these steps: If the...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-1825.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-1825.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-1825.html" rel="stylesheet"/>
   <link href="solution-1825.html" rel="stylesheet"/>
   <link href="solution-1825.html" rel="stylesheet"/>
   <link href="solution-1825.html" rel="stylesheet"/>
   <link href="solution-1825.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="1825 - Finding MK Average" property="og:title"/>
   <meta content='Leetcode Formatted question description: https://leetcode.ca/all/1825.html Level Hard Description You are given two integers, m and k, and a stream of integers. You are tasked to implement a data structure that calculates the MKAverage for the stream. The MKAverage can be calculated using these steps: If the number of the elements in the stream is less than m you should consider the MKAverage to be -1. Otherwise, copy the last m elements of the stream to a separate container. Remove the smallest k elements and the largest k elements from the container. Calculate the average value for the rest of the elements rounded down to the nearest integer. Implement the MKAverage class: MKAverage(int m, int k) Initializes the MKAverage object with an empty stream and the two integers m and k. void addElement(int num) Inserts a new element num into the stream. int calculateMKAverage() Calculates and returns the MKAverage for the current stream rounded down to the nearest integer. Example 1: Input ["MKAverage", "addElement", "addElement", "calculateMKAverage", "addElement", "calculateMKAverage", "addElement", "addElement", "addElement", "calculateMKAverage"] [[3, 1], [3], [1], [], [10], [], [5], [5], [5], []] Output [null, null, null, -1, null, 3, null, null, null, 5] Explanation MKAverage obj = new MKAverage(3, 1); obj.addElement(3); // current elements are [3] obj.addElement(1); // current elements are [3,1] obj.calculateMKAverage(); // return -1, because m = 3 and only 2 elements exist. obj.addElement(10); // current elements are [3,1,10] obj.calculateMKAverage(); // The last 3 elements are [3,1,10]. // After removing smallest and largest 1 element the container will be [3]. // The average of [3] equals 3/1 = 3, return 3 obj.addElement(5); // current elements are [3,1,10,5] obj.addElement(5); // current elements are [3,1,10,5,5] obj.addElement(5); // current elements are [3,1,10,5,5,5] obj.calculateMKAverage(); // The last 3 elements are [5,5,5]. // After removing smallest and largest 1 element the container will be [5]. // The average of [5] equals 5/1 = 5, return 5 Constraints: 3 &amp;lt;= m &amp;lt;= 10^5 1 &amp;lt;= k*2 &amp;lt; m 1 &amp;lt;= num &amp;lt;= 10^5 At most 10^5 calls will be made to addElement and calculateMKAverage. Solution Use a queue to store the elements, and use three tree maps left, mid and right to store the smallest k elements, the middle elements and the largest k elements, respectively. For the constructor, initialize m, k, the queue and the three tree maps. For addElement, first check whether the queueâs size is already m. If this is the case, poll one element from the queue, and update the three tree maps accordingly. Then offer the new element to the queue, and use the new element to update the three tree maps accordingly. At the same time maintain the sum of the elements in mid. For calculateMKAverage, first check the queueâs size, and then calculate the MKAverage accordingly. Java Python C++ Go class MKAverage { int m; int k; Queue&amp;lt;Integer&amp;gt; queue; TreeMap&amp;lt;Integer, Integer&amp;gt; left; TreeMap&amp;lt;Integer, Integer&amp;gt; mid; TreeMap&amp;lt;Integer, Integer&amp;gt; right; int leftSize, midSize, rightSize; long sum; public MKAverage(int m, int k) { this.m = m;...' property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2021-06-16T22:21:01-07:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2021-06-16-1825-Finding-MK-Average/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-1825.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="1825 - Finding MK Average" property="twitter:title"/>
   <meta content='Leetcode Formatted question description: https://leetcode.ca/all/1825.html Level Hard Description You are given two integers, m and k, and a stream of integers. You are tasked to implement a data structure that calculates the MKAverage for the stream. The MKAverage can be calculated using these steps: If the number of the elements in the stream is less than m you should consider the MKAverage to be -1. Otherwise, copy the last m elements of the stream to a separate container. Remove the smallest k elements and the largest k elements from the container. Calculate the average value for the rest of the elements rounded down to the nearest integer. Implement the MKAverage class: MKAverage(int m, int k) Initializes the MKAverage object with an empty stream and the two integers m and k. void addElement(int num) Inserts a new element num into the stream. int calculateMKAverage() Calculates and returns the MKAverage for the current stream rounded down to the nearest integer. Example 1: Input ["MKAverage", "addElement", "addElement", "calculateMKAverage", "addElement", "calculateMKAverage", "addElement", "addElement", "addElement", "calculateMKAverage"] [[3, 1], [3], [1], [], [10], [], [5], [5], [5], []] Output [null, null, null, -1, null, 3, null, null, null, 5] Explanation MKAverage obj = new MKAverage(3, 1); obj.addElement(3); // current elements are [3] obj.addElement(1); // current elements are [3,1] obj.calculateMKAverage(); // return -1, because m = 3 and only 2 elements exist. obj.addElement(10); // current elements are [3,1,10] obj.calculateMKAverage(); // The last 3 elements are [3,1,10]. // After removing smallest and largest 1 element the container will be [3]. // The average of [3] equals 3/1 = 3, return 3 obj.addElement(5); // current elements are [3,1,10,5] obj.addElement(5); // current elements are [3,1,10,5,5] obj.addElement(5); // current elements are [3,1,10,5,5,5] obj.calculateMKAverage(); // The last 3 elements are [5,5,5]. // After removing smallest and largest 1 element the container will be [5]. // The average of [5] equals 5/1 = 5, return 5 Constraints: 3 &amp;lt;= m &amp;lt;= 10^5 1 &amp;lt;= k*2 &amp;lt; m 1 &amp;lt;= num &amp;lt;= 10^5 At most 10^5 calls will be made to addElement and calculateMKAverage. Solution Use a queue to store the elements, and use three tree maps left, mid and right to store the smallest k elements, the middle elements and the largest k elements, respectively. For the constructor, initialize m, k, the queue and the three tree maps. For addElement, first check whether the queueâs size is already m. If this is the case, poll one element from the queue, and update the three tree maps accordingly. Then offer the new element to the queue, and use the new element to update the three tree maps accordingly. At the same time maintain the sum of the elements in mid. For calculateMKAverage, first check the queueâs size, and then calculate the MKAverage accordingly. Java Python C++ Go class MKAverage { int m; int k; Queue&amp;lt;Integer&amp;gt; queue; TreeMap&amp;lt;Integer, Integer&amp;gt; left; TreeMap&amp;lt;Integer, Integer&amp;gt; mid; TreeMap&amp;lt;Integer, Integer&amp;gt; right; int leftSize, midSize, rightSize; long sum; public MKAverage(int m, int k) { this.m = m;...' property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    1825 - Finding MK Average | Leetcode
   </title>
   <meta content="Jekyll v3.9.4" name="generator">
    <meta content="1825 - Finding MK Average" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-1825.html" rel="canonical">
          <meta content="https://leetcode.ca/2021-06-16-1825-Finding-MK-Average/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2021-06-16T22:21:01-07:00" property="article:published_time">
              <script type="application/ld+json">
               {"headline":"1825 - Finding MK Average","dateModified":"2021-06-16T22:21:01-07:00","datePublished":"2021-06-16T22:21:01-07:00","description":"Leetcode","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2021-06-16-1825-Finding-MK-Average/"},"url":"https://leetcode.ca/2021-06-16-1825-Finding-MK-Average/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCDRuzBvLGzyVvgPyohrahrA" data-count="hidden" data-layout="full">
      </div>
      <p>
       Formatted question description:
       <a href="solution-1825.html">
        https://leetcode.ca/all/1825.html
       </a>
      </p>
      <h2 id="level">
       Level
      </h2>
      <p>
       Hard
      </p>
      <h2 id="description">
       Description
      </h2>
      <p>
       You are given two integers,
       <code class="language-plaintext highlighter-rouge">
        m
       </code>
       and
       <code class="language-plaintext highlighter-rouge">
        k
       </code>
       , and a stream of integers. You are tasked to implement a data structure that calculates the
       <strong>
        MKAverage
       </strong>
       for the stream.
      </p>
      <p>
       The
       <strong>
        MKAverage
       </strong>
       can be calculated using these steps:
      </p>
      <ol>
       <li>
        If the number of the elements in the stream is less than m you should consider the
        <strong>
         MKAverage
        </strong>
        to be
        <code class="language-plaintext highlighter-rouge">
         -1
        </code>
        . Otherwise, copy the last
        <code class="language-plaintext highlighter-rouge">
         m
        </code>
        elements of the stream to a separate container.
       </li>
       <li>
        Remove the smallest
        <code class="language-plaintext highlighter-rouge">
         k
        </code>
        elements and the largest
        <code class="language-plaintext highlighter-rouge">
         k
        </code>
        elements from the container.
       </li>
       <li>
        Calculate the average value for the rest of the elements
        <strong>
         rounded down to the nearest integer
        </strong>
        .
       </li>
      </ol>
      <p>
       Implement the
       <code class="language-plaintext highlighter-rouge">
        MKAverage
       </code>
       class:
      </p>
      <ul>
       <li>
        <code class="language-plaintext highlighter-rouge">
         MKAverage(int m, int k)
        </code>
        Initializes the
        <strong>
         MKAverage
        </strong>
        object with an empty stream and the two integers
        <code class="language-plaintext highlighter-rouge">
         m
        </code>
        and
        <code class="language-plaintext highlighter-rouge">
         k
        </code>
        .
       </li>
       <li>
        <code class="language-plaintext highlighter-rouge">
         void addElement(int num)
        </code>
        Inserts a new element
        <code class="language-plaintext highlighter-rouge">
         num
        </code>
        into the stream.
       </li>
       <li>
        <code class="language-plaintext highlighter-rouge">
         int calculateMKAverage()
        </code>
        Calculates and returns the
        <strong>
         MKAverage
        </strong>
        for the current stream
        <strong>
         rounded down to the nearest integer
        </strong>
        .
       </li>
      </ul>
      <p>
       <strong>
        Example 1:
       </strong>
      </p>
      <div class="language-plaintext highlighter-rouge">
       <div class="highlight">
        <pre class="highlight"><code>Input
["MKAverage", "addElement", "addElement", "calculateMKAverage", "addElement", "calculateMKAverage", "addElement", "addElement", "addElement", "calculateMKAverage"]
[[3, 1], [3], [1], [], [10], [], [5], [5], [5], []]
Output
[null, null, null, -1, null, 3, null, null, null, 5]

Explanation
MKAverage obj = new MKAverage(3, 1); 
obj.addElement(3);        // current elements are [3]
obj.addElement(1);        // current elements are [3,1]
obj.calculateMKAverage(); // return -1, because m = 3 and only 2 elements exist.
obj.addElement(10);       // current elements are [3,1,10]
obj.calculateMKAverage(); // The last 3 elements are [3,1,10].
                          // After removing smallest and largest 1 element the container will be [3].
                          // The average of [3] equals 3/1 = 3, return 3
obj.addElement(5);        // current elements are [3,1,10,5]
obj.addElement(5);        // current elements are [3,1,10,5,5]
obj.addElement(5);        // current elements are [3,1,10,5,5,5]
obj.calculateMKAverage(); // The last 3 elements are [5,5,5].
                          // After removing smallest and largest 1 element the container will be [5].
                          // The average of [5] equals 5/1 = 5, return 5
</code></pre>
       </div>
      </div>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code class="language-plaintext highlighter-rouge">
         3 &lt;= m &lt;= 10^5
        </code>
       </li>
       <li>
        <code class="language-plaintext highlighter-rouge">
         1 &lt;= k*2 &lt; m
        </code>
       </li>
       <li>
        <code class="language-plaintext highlighter-rouge">
         1 &lt;= num &lt;= 10^5
        </code>
       </li>
       <li>
        At most
        <code class="language-plaintext highlighter-rouge">
         10^5
        </code>
        calls will be made to
        <code class="language-plaintext highlighter-rouge">
         addElement
        </code>
        and
        <code class="language-plaintext highlighter-rouge">
         calculateMKAverage
        </code>
        .
       </li>
      </ul>
      <h2 id="solution">
       Solution
      </h2>
      <p>
       Use a queue to store the elements, and use three tree maps
       <code class="language-plaintext highlighter-rouge">
        left
       </code>
       ,
       <code class="language-plaintext highlighter-rouge">
        mid
       </code>
       and
       <code class="language-plaintext highlighter-rouge">
        right
       </code>
       to store the smallest
       <code class="language-plaintext highlighter-rouge">
        k
       </code>
       elements, the middle elements and the largest
       <code class="language-plaintext highlighter-rouge">
        k
       </code>
       elements, respectively.
      </p>
      <p>
       For the constructor, initialize
       <code class="language-plaintext highlighter-rouge">
        m
       </code>
       ,
       <code class="language-plaintext highlighter-rouge">
        k
       </code>
       , the queue and the three tree maps.
      </p>
      <p>
       For
       <code class="language-plaintext highlighter-rouge">
        addElement
       </code>
       , first check whether the queueâs size is already
       <code class="language-plaintext highlighter-rouge">
        m
       </code>
       . If this is the case, poll one element from the queue, and update the three tree maps accordingly. Then offer the new element to the queue, and use the new element to update the three tree maps accordingly. At the same time maintain the sum of the elements in
       <code class="language-plaintext highlighter-rouge">
        mid
       </code>
       .
      </p>
      <p>
       For
       <code class="language-plaintext highlighter-rouge">
        calculateMKAverage
       </code>
       , first check the queueâs size, and then calculate the MKAverage accordingly.
      </p>
      <ul class="uk-tab" data-uk-switcher="{connect:'#6d453465-fb79-4400-bc7d-81aacd4ea0d0'}">
       <li class="uk-active">
        <a href="solution-1825.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-1825.html">
         Python
        </a>
       </li>
       <li>
        <a href="solution-1825.html">
         C++
        </a>
       </li>
       <li>
        <a href="solution-1825.html">
         Go
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="6d453465-fb79-4400-bc7d-81aacd4ea0d0">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">MKAverage</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">m</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">k</span><span class="o">;</span>
    <span class="nc">Queue</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">queue</span><span class="o">;</span>
    <span class="nc">TreeMap</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">left</span><span class="o">;</span>
    <span class="nc">TreeMap</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">mid</span><span class="o">;</span>
    <span class="nc">TreeMap</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">right</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">leftSize</span><span class="o">,</span> <span class="n">midSize</span><span class="o">,</span> <span class="n">rightSize</span><span class="o">;</span>
    <span class="kt">long</span> <span class="n">sum</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">MKAverage</span><span class="o">(</span><span class="kt">int</span> <span class="n">m</span><span class="o">,</span> <span class="kt">int</span> <span class="n">k</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">m</span> <span class="o">=</span> <span class="n">m</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">k</span> <span class="o">=</span> <span class="n">k</span><span class="o">;</span>
        <span class="n">queue</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedList</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;();</span>
        <span class="n">left</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeMap</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;();</span>
        <span class="n">mid</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeMap</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;();</span>
        <span class="n">right</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeMap</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addElement</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">queue</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="n">m</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">remove</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">left</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">remove</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">left</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">remove</span><span class="o">,</span> <span class="n">left</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">remove</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">left</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">remove</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
                    <span class="n">left</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">remove</span><span class="o">);</span>
                <span class="n">leftSize</span><span class="o">--;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">mid</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">remove</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">mid</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">remove</span><span class="o">,</span> <span class="n">mid</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">remove</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">mid</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">remove</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
                    <span class="n">mid</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">remove</span><span class="o">);</span>
                <span class="n">midSize</span><span class="o">--;</span>
                <span class="n">sum</span> <span class="o">-=</span> <span class="n">remove</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">right</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">remove</span><span class="o">,</span> <span class="n">right</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">remove</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">right</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">remove</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
                    <span class="n">right</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">remove</span><span class="o">);</span>
                <span class="n">rightSize</span><span class="o">--;</span>
            <span class="o">}</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">midSize</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">leftSize</span> <span class="o">&lt;</span> <span class="n">k</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">first</span> <span class="o">=</span> <span class="n">mid</span><span class="o">.</span><span class="na">firstKey</span><span class="o">();</span>
                <span class="n">left</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">left</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
                <span class="n">mid</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">mid</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">first</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">mid</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">first</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
                    <span class="n">mid</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">first</span><span class="o">);</span>
                <span class="n">leftSize</span><span class="o">++;</span>
                <span class="n">midSize</span><span class="o">--;</span>
                <span class="n">sum</span> <span class="o">-=</span> <span class="n">first</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">rightSize</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">midSize</span> <span class="o">&lt;</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">k</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">first</span> <span class="o">=</span> <span class="n">right</span><span class="o">.</span><span class="na">firstKey</span><span class="o">();</span>
                <span class="n">mid</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">mid</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
                <span class="n">right</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">right</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">first</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">right</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">first</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
                    <span class="n">right</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">first</span><span class="o">);</span>
                <span class="n">midSize</span><span class="o">++;</span>
                <span class="n">rightSize</span><span class="o">--;</span>
                <span class="n">sum</span> <span class="o">+=</span> <span class="n">first</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">queue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">num</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">leftSize</span> <span class="o">&lt;</span> <span class="n">k</span> <span class="o">||</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="n">left</span><span class="o">.</span><span class="na">lastKey</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">left</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">num</span><span class="o">,</span> <span class="n">left</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">num</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
            <span class="n">leftSize</span><span class="o">++;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">midSize</span> <span class="o">&lt;</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">k</span> <span class="o">||</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="n">mid</span><span class="o">.</span><span class="na">lastKey</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">mid</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">num</span><span class="o">,</span> <span class="n">mid</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">num</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
            <span class="n">midSize</span><span class="o">++;</span>
            <span class="n">sum</span> <span class="o">+=</span> <span class="n">num</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">right</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">num</span><span class="o">,</span> <span class="n">right</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">num</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
            <span class="n">rightSize</span><span class="o">++;</span>
        <span class="o">}</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">leftSize</span> <span class="o">&gt;</span> <span class="n">k</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">last</span> <span class="o">=</span> <span class="n">left</span><span class="o">.</span><span class="na">lastKey</span><span class="o">();</span>
            <span class="n">left</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">last</span><span class="o">,</span> <span class="n">left</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">last</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">left</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">last</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
                <span class="n">left</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">last</span><span class="o">);</span>
            <span class="n">mid</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">last</span><span class="o">,</span> <span class="n">mid</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">last</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
            <span class="n">leftSize</span><span class="o">--;</span>
            <span class="n">midSize</span><span class="o">++;</span>
            <span class="n">sum</span> <span class="o">+=</span> <span class="n">last</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">midSize</span> <span class="o">&gt;</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">k</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">last</span> <span class="o">=</span> <span class="n">mid</span><span class="o">.</span><span class="na">lastKey</span><span class="o">();</span>
            <span class="n">mid</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">last</span><span class="o">,</span> <span class="n">mid</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">last</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">mid</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">last</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
                <span class="n">mid</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">last</span><span class="o">);</span>
            <span class="n">right</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">last</span><span class="o">,</span> <span class="n">right</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">last</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
            <span class="n">midSize</span><span class="o">--;</span>
            <span class="n">rightSize</span><span class="o">++;</span>
            <span class="n">sum</span> <span class="o">-=</span> <span class="n">last</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">calculateMKAverage</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">queue</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">m</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">(</span><span class="n">sum</span> <span class="o">/</span> <span class="o">(</span><span class="n">m</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">k</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/**
 * Your MKAverage object will be instantiated and called as such:
 * MKAverage obj = new MKAverage(m, k);
 * obj.addElement(num);
 * int param_2 = obj.calculateMKAverage();
 */</span>

<span class="err">############</span>

<span class="kd">class</span> <span class="nc">MKAverage</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">m</span><span class="o">,</span> <span class="n">k</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">s</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">size1</span><span class="o">,</span> <span class="n">size3</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Deque</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayDeque</span><span class="o">&lt;&gt;();</span>
    <span class="kd">private</span> <span class="nc">TreeMap</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">lo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeMap</span><span class="o">&lt;&gt;();</span>
    <span class="kd">private</span> <span class="nc">TreeMap</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">mid</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeMap</span><span class="o">&lt;&gt;();</span>
    <span class="kd">private</span> <span class="nc">TreeMap</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">hi</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeMap</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">MKAverage</span><span class="o">(</span><span class="kt">int</span> <span class="n">m</span><span class="o">,</span> <span class="kt">int</span> <span class="n">k</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">m</span> <span class="o">=</span> <span class="n">m</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">k</span> <span class="o">=</span> <span class="n">k</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addElement</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">lo</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">||</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="n">lo</span><span class="o">.</span><span class="na">lastKey</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">lo</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">num</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">);</span>
            <span class="o">++</span><span class="n">size1</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">hi</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">||</span> <span class="n">num</span> <span class="o">&gt;=</span> <span class="n">hi</span><span class="o">.</span><span class="na">firstKey</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">hi</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">num</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">);</span>
            <span class="o">++</span><span class="n">size3</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">mid</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">num</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">);</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">num</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">q</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">num</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">q</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">m</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">lo</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">x</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">lo</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">lo</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="o">--</span><span class="n">size1</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">hi</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">x</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">hi</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">hi</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="o">--</span><span class="n">size3</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">mid</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">mid</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">s</span> <span class="o">-=</span> <span class="n">x</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(;</span> <span class="n">size1</span> <span class="o">&gt;</span> <span class="n">k</span><span class="o">;</span> <span class="o">--</span><span class="n">size1</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">lo</span><span class="o">.</span><span class="na">lastKey</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">lo</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">lo</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">mid</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">);</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">x</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(;</span> <span class="n">size3</span> <span class="o">&gt;</span> <span class="n">k</span><span class="o">;</span> <span class="o">--</span><span class="n">size3</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">hi</span><span class="o">.</span><span class="na">firstKey</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hi</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hi</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">mid</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">);</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">x</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(;</span> <span class="n">size1</span> <span class="o">&lt;</span> <span class="n">k</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">mid</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">();</span> <span class="o">++</span><span class="n">size1</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">mid</span><span class="o">.</span><span class="na">firstKey</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">mid</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">mid</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">s</span> <span class="o">-=</span> <span class="n">x</span><span class="o">;</span>
            <span class="n">lo</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(;</span> <span class="n">size3</span> <span class="o">&lt;</span> <span class="n">k</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">mid</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">();</span> <span class="o">++</span><span class="n">size3</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">mid</span><span class="o">.</span><span class="na">lastKey</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">mid</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">mid</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">s</span> <span class="o">-=</span> <span class="n">x</span><span class="o">;</span>
            <span class="n">hi</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">sum</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">calculateMKAverage</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">q</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">m</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">/</span> <span class="o">(</span><span class="n">q</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">-</span> <span class="n">k</span> <span class="o">*</span> <span class="mi">2</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/**
 * Your MKAverage object will be instantiated and called as such:
 * MKAverage obj = new MKAverage(m, k);
 * obj.addElement(num);
 * int param_2 = obj.calculateMKAverage();
 */</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-python highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kn">from</span> <span class="nn">sortedcontainers</span> <span class="kn">import</span> <span class="n">SortedList</span>


<span class="k">class</span> <span class="nc">MKAverage</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">m</span> <span class="o">=</span> <span class="n">m</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">k</span> <span class="o">=</span> <span class="n">k</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">q</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">lo</span> <span class="o">=</span> <span class="n">SortedList</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">mid</span> <span class="o">=</span> <span class="n">SortedList</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">hi</span> <span class="o">=</span> <span class="n">SortedList</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">addElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">.</span><span class="n">lo</span> <span class="ow">or</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="p">.</span><span class="n">lo</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">lo</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">.</span><span class="n">hi</span> <span class="ow">or</span> <span class="n">num</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="p">.</span><span class="n">hi</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">hi</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">mid</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">s</span> <span class="o">+=</span> <span class="n">num</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">q</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">q</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="p">.</span><span class="n">m</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">q</span><span class="p">.</span><span class="n">popleft</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">lo</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">lo</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">hi</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">hi</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">mid</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">s</span> <span class="o">-=</span> <span class="n">x</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">lo</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="p">.</span><span class="n">k</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">lo</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">mid</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">s</span> <span class="o">+=</span> <span class="n">x</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">hi</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="p">.</span><span class="n">k</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">hi</span><span class="p">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">mid</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">s</span> <span class="o">+=</span> <span class="n">x</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">lo</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="p">.</span><span class="n">k</span> <span class="ow">and</span> <span class="bp">self</span><span class="p">.</span><span class="n">mid</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">mid</span><span class="p">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">lo</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">s</span> <span class="o">-=</span> <span class="n">x</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">hi</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="p">.</span><span class="n">k</span> <span class="ow">and</span> <span class="bp">self</span><span class="p">.</span><span class="n">mid</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">mid</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">hi</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">s</span> <span class="o">-=</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">calculateMKAverage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">q</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="p">.</span><span class="n">m</span> <span class="k">else</span> <span class="bp">self</span><span class="p">.</span><span class="n">s</span> <span class="o">//</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">m</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="p">.</span><span class="n">k</span><span class="p">)</span>


<span class="c1"># Your MKAverage object will be instantiated and called as such:
# obj = MKAverage(m, k)
# obj.addElement(num)
# param_2 = obj.calculateMKAverage()
</span>
<span class="c1">############
</span>
<span class="c1"># 1825. Finding MK Average
# https://leetcode.com/problems/finding-mk-average
</span>
<span class="k">class</span> <span class="nc">MKAverage</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">m</span> <span class="o">=</span> <span class="n">m</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">k</span> <span class="o">=</span> <span class="n">k</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">A</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">addElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">calculateMKAverage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">A</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="p">.</span><span class="n">m</span><span class="p">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        
        <span class="n">m</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">m</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">k</span>
        <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">A</span><span class="p">[:]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">m</span><span class="p">:</span>
            <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">A</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">-</span> <span class="n">m</span><span class="p">:]</span>
        <span class="n">A</span><span class="p">.</span><span class="n">sort</span><span class="p">()</span>
        
        <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">-</span> <span class="n">k</span><span class="p">):</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">total</span> <span class="o">//</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">k</span><span class="p">)</span>

<span class="c1"># Your MKAverage object will be instantiated and called as such:
# obj = MKAverage(m, k)
# obj.addElement(num)
# param_2 = obj.calculateMKAverage()
</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-cpp highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">MKAverage</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">MKAverage</span><span class="p">(</span><span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">m</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">addElement</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">lo</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">||</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="o">*</span><span class="n">lo</span><span class="p">.</span><span class="n">rbegin</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">lo</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">hi</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">||</span> <span class="n">num</span> <span class="o">&gt;=</span> <span class="o">*</span><span class="n">hi</span><span class="p">.</span><span class="n">begin</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">hi</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">mid</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">num</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">m</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">();</span>
            <span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">lo</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="n">lo</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">lo</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">lo</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">x</span><span class="p">));</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">hi</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="n">hi</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">hi</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">hi</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">x</span><span class="p">));</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">mid</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">mid</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">x</span><span class="p">));</span>
                <span class="n">s</span> <span class="o">-=</span> <span class="n">x</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">lo</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="o">*</span><span class="n">lo</span><span class="p">.</span><span class="n">rbegin</span><span class="p">();</span>
            <span class="n">lo</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">prev</span><span class="p">(</span><span class="n">lo</span><span class="p">.</span><span class="n">end</span><span class="p">()));</span>
            <span class="n">mid</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">x</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">hi</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="o">*</span><span class="n">hi</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
            <span class="n">hi</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">hi</span><span class="p">.</span><span class="n">begin</span><span class="p">());</span>
            <span class="n">mid</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">x</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">lo</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">k</span> <span class="o">&amp;&amp;</span> <span class="n">mid</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="o">*</span><span class="n">mid</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
            <span class="n">mid</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">mid</span><span class="p">.</span><span class="n">begin</span><span class="p">());</span>
            <span class="n">s</span> <span class="o">-=</span> <span class="n">x</span><span class="p">;</span>
            <span class="n">lo</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">hi</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">k</span> <span class="o">&amp;&amp;</span> <span class="n">mid</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="o">*</span><span class="n">mid</span><span class="p">.</span><span class="n">rbegin</span><span class="p">();</span>
            <span class="n">mid</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">prev</span><span class="p">(</span><span class="n">mid</span><span class="p">.</span><span class="n">end</span><span class="p">()));</span>
            <span class="n">s</span> <span class="o">-=</span> <span class="n">x</span><span class="p">;</span>
            <span class="n">hi</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">calculateMKAverage</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">q</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">m</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="n">s</span> <span class="o">/</span> <span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="n">k</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>

<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="n">k</span><span class="p">;</span>
    <span class="kt">long</span> <span class="kt">long</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">q</span><span class="p">;</span>
    <span class="n">multiset</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">lo</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">hi</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**
 * Your MKAverage object will be instantiated and called as such:
 * MKAverage* obj = new MKAverage(m, k);
 * obj-&gt;addElement(num);
 * int param_2 = obj-&gt;calculateMKAverage();
 */</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-go highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">type</span> <span class="n">MKAverage</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">lo</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">hi</span>  <span class="o">*</span><span class="n">redblacktree</span><span class="o">.</span><span class="n">Tree</span>
	<span class="n">q</span>            <span class="p">[]</span><span class="kt">int</span>
	<span class="n">m</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">s</span>      <span class="kt">int</span>
	<span class="n">size1</span><span class="p">,</span> <span class="n">size3</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">Constructor</span><span class="p">(</span><span class="n">m</span> <span class="kt">int</span><span class="p">,</span> <span class="n">k</span> <span class="kt">int</span><span class="p">)</span> <span class="n">MKAverage</span> <span class="p">{</span>
	<span class="n">lo</span> <span class="o">:=</span> <span class="n">redblacktree</span><span class="o">.</span><span class="n">NewWithIntComparator</span><span class="p">()</span>
	<span class="n">mid</span> <span class="o">:=</span> <span class="n">redblacktree</span><span class="o">.</span><span class="n">NewWithIntComparator</span><span class="p">()</span>
	<span class="n">hi</span> <span class="o">:=</span> <span class="n">redblacktree</span><span class="o">.</span><span class="n">NewWithIntComparator</span><span class="p">()</span>
	<span class="k">return</span> <span class="n">MKAverage</span><span class="p">{</span><span class="n">lo</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{},</span> <span class="n">m</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">this</span> <span class="o">*</span><span class="n">MKAverage</span><span class="p">)</span> <span class="n">AddElement</span><span class="p">(</span><span class="n">num</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">merge</span> <span class="o">:=</span> <span class="k">func</span><span class="p">(</span><span class="n">rbt</span> <span class="o">*</span><span class="n">redblacktree</span><span class="o">.</span><span class="n">Tree</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="n">v</span><span class="p">,</span> <span class="n">ok</span> <span class="o">:=</span> <span class="n">rbt</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">key</span><span class="p">);</span> <span class="n">ok</span> <span class="p">{</span>
			<span class="n">nxt</span> <span class="o">:=</span> <span class="n">v</span><span class="o">.</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="o">+</span> <span class="n">value</span>
			<span class="k">if</span> <span class="n">nxt</span> <span class="o">==</span> <span class="m">0</span> <span class="p">{</span>
				<span class="n">rbt</span><span class="o">.</span><span class="n">Remove</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="n">rbt</span><span class="o">.</span><span class="n">Put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">nxt</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">rbt</span><span class="o">.</span><span class="n">Put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="n">this</span><span class="o">.</span><span class="n">lo</span><span class="o">.</span><span class="n">Empty</span><span class="p">()</span> <span class="o">||</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="n">this</span><span class="o">.</span><span class="n">lo</span><span class="o">.</span><span class="n">Right</span><span class="p">()</span><span class="o">.</span><span class="n">Key</span><span class="o">.</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">lo</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
		<span class="n">this</span><span class="o">.</span><span class="n">size1</span><span class="o">++</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">this</span><span class="o">.</span><span class="n">hi</span><span class="o">.</span><span class="n">Empty</span><span class="p">()</span> <span class="o">||</span> <span class="n">num</span> <span class="o">&gt;=</span> <span class="n">this</span><span class="o">.</span><span class="n">hi</span><span class="o">.</span><span class="n">Left</span><span class="p">()</span><span class="o">.</span><span class="n">Key</span><span class="o">.</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">hi</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
		<span class="n">this</span><span class="o">.</span><span class="n">size3</span><span class="o">++</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">mid</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
		<span class="n">this</span><span class="o">.</span><span class="n">s</span> <span class="o">+=</span> <span class="n">num</span>
	<span class="p">}</span>
	<span class="n">this</span><span class="o">.</span><span class="n">q</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">q</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>
	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">q</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">this</span><span class="o">.</span><span class="n">m</span> <span class="p">{</span>
		<span class="n">x</span> <span class="o">:=</span> <span class="n">this</span><span class="o">.</span><span class="n">q</span><span class="p">[</span><span class="m">0</span><span class="p">]</span>
		<span class="n">this</span><span class="o">.</span><span class="n">q</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">q</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="p">]</span>
		<span class="k">if</span> <span class="n">_</span><span class="p">,</span> <span class="n">ok</span> <span class="o">:=</span> <span class="n">this</span><span class="o">.</span><span class="n">lo</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">x</span><span class="p">);</span> <span class="n">ok</span> <span class="p">{</span>
			<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">lo</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="m">1</span><span class="p">)</span>
			<span class="n">this</span><span class="o">.</span><span class="n">size1</span><span class="o">--</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">_</span><span class="p">,</span> <span class="n">ok</span> <span class="o">:=</span> <span class="n">this</span><span class="o">.</span><span class="n">hi</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">x</span><span class="p">);</span> <span class="n">ok</span> <span class="p">{</span>
			<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">hi</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="m">1</span><span class="p">)</span>
			<span class="n">this</span><span class="o">.</span><span class="n">size3</span><span class="o">--</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">mid</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="m">1</span><span class="p">)</span>
			<span class="n">this</span><span class="o">.</span><span class="n">s</span> <span class="o">-=</span> <span class="n">x</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="p">;</span> <span class="n">this</span><span class="o">.</span><span class="n">size1</span> <span class="o">&gt;</span> <span class="n">this</span><span class="o">.</span><span class="n">k</span><span class="p">;</span> <span class="n">this</span><span class="o">.</span><span class="n">size1</span><span class="o">--</span> <span class="p">{</span>
		<span class="n">x</span> <span class="o">:=</span> <span class="n">this</span><span class="o">.</span><span class="n">lo</span><span class="o">.</span><span class="n">Right</span><span class="p">()</span><span class="o">.</span><span class="n">Key</span><span class="o">.</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
		<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">lo</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="m">1</span><span class="p">)</span>
		<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">mid</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
		<span class="n">this</span><span class="o">.</span><span class="n">s</span> <span class="o">+=</span> <span class="n">x</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="p">;</span> <span class="n">this</span><span class="o">.</span><span class="n">size3</span> <span class="o">&gt;</span> <span class="n">this</span><span class="o">.</span><span class="n">k</span><span class="p">;</span> <span class="n">this</span><span class="o">.</span><span class="n">size3</span><span class="o">--</span> <span class="p">{</span>
		<span class="n">x</span> <span class="o">:=</span> <span class="n">this</span><span class="o">.</span><span class="n">hi</span><span class="o">.</span><span class="n">Left</span><span class="p">()</span><span class="o">.</span><span class="n">Key</span><span class="o">.</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
		<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">hi</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="m">1</span><span class="p">)</span>
		<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">mid</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
		<span class="n">this</span><span class="o">.</span><span class="n">s</span> <span class="o">+=</span> <span class="n">x</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="p">;</span> <span class="n">this</span><span class="o">.</span><span class="n">size1</span> <span class="o">&lt;</span> <span class="n">this</span><span class="o">.</span><span class="n">k</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">this</span><span class="o">.</span><span class="n">mid</span><span class="o">.</span><span class="n">Empty</span><span class="p">();</span> <span class="n">this</span><span class="o">.</span><span class="n">size1</span><span class="o">++</span> <span class="p">{</span>
		<span class="n">x</span> <span class="o">:=</span> <span class="n">this</span><span class="o">.</span><span class="n">mid</span><span class="o">.</span><span class="n">Left</span><span class="p">()</span><span class="o">.</span><span class="n">Key</span><span class="o">.</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
		<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">mid</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="m">1</span><span class="p">)</span>
		<span class="n">this</span><span class="o">.</span><span class="n">s</span> <span class="o">-=</span> <span class="n">x</span>
		<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">lo</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="p">;</span> <span class="n">this</span><span class="o">.</span><span class="n">size3</span> <span class="o">&lt;</span> <span class="n">this</span><span class="o">.</span><span class="n">k</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">this</span><span class="o">.</span><span class="n">mid</span><span class="o">.</span><span class="n">Empty</span><span class="p">();</span> <span class="n">this</span><span class="o">.</span><span class="n">size3</span><span class="o">++</span> <span class="p">{</span>
		<span class="n">x</span> <span class="o">:=</span> <span class="n">this</span><span class="o">.</span><span class="n">mid</span><span class="o">.</span><span class="n">Right</span><span class="p">()</span><span class="o">.</span><span class="n">Key</span><span class="o">.</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
		<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">mid</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="m">1</span><span class="p">)</span>
		<span class="n">this</span><span class="o">.</span><span class="n">s</span> <span class="o">-=</span> <span class="n">x</span>
		<span class="n">merge</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">hi</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">this</span> <span class="o">*</span><span class="n">MKAverage</span><span class="p">)</span> <span class="n">CalculateMKAverage</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">q</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">this</span><span class="o">.</span><span class="n">m</span> <span class="p">{</span>
		<span class="k">return</span> <span class="o">-</span><span class="m">1</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">this</span><span class="o">.</span><span class="n">s</span> <span class="o">/</span> <span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">m</span> <span class="o">-</span> <span class="m">2</span><span class="o">*</span><span class="n">this</span><span class="o">.</span><span class="n">k</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">/**
 * Your MKAverage object will be instantiated and called as such:
 * obj := Constructor(m, k);
 * obj.AddElement(num);
 * param_2 := obj.CalculateMKAverage();
 */</span>
</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-1825.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
