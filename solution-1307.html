<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-1307.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-1307.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>1307 - Verbal Arithmetic Puzzle</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode Formatted question description: https://leetcode.ca/all/1307.html 1307. Verbal Arithmetic Puzzle (Hard) Given an equation, represented by words on left side and the result on right side. You need to check if the equation is solvable&amp;nbsp;under the following rules: Each character is decoded as one digit (0 -...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-1307.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-1307.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-1307.html" rel="stylesheet"/>
   <link href="solution-1307.html" rel="stylesheet"/>
   <link href="solution-1307.html" rel="stylesheet"/>
   <link href="solution-1307.html" rel="stylesheet"/>
   <link href="solution-1307.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="1307 - Verbal Arithmetic Puzzle" property="og:title"/>
   <meta content="Leetcode Formatted question description: https://leetcode.ca/all/1307.html 1307. Verbal Arithmetic Puzzle (Hard) Given an equation, represented by words on left side and the result on right side. You need to check if the equation is solvable&amp;nbsp;under the following rules: Each character is decoded as one digit (0 - 9). Every pair of different characters they must map to different digits. Each words[i] and result&amp;nbsp;are decoded as one number without leading zeros. Sum of numbers on left side (words) will equal to the number on right side (result).&amp;nbsp; Return True&amp;nbsp;if the equation is solvable otherwise&amp;nbsp;return&amp;nbsp;False. &amp;nbsp; Example 1: Input: words = [&quot;SEND&quot;,&quot;MORE&quot;], result = &quot;MONEY&quot; Output: true Explanation: Map 'S'-&amp;gt; 9, 'E'-&amp;gt;5, 'N'-&amp;gt;6, 'D'-&amp;gt;7, 'M'-&amp;gt;1, 'O'-&amp;gt;0, 'R'-&amp;gt;8, 'Y'-&amp;gt;'2' Such that: &quot;SEND&quot; + &quot;MORE&quot; = &quot;MONEY&quot; , 9567 + 1085 = 10652 Example 2: Input: words = [&quot;SIX&quot;,&quot;SEVEN&quot;,&quot;SEVEN&quot;], result = &quot;TWENTY&quot; Output: true Explanation: Map 'S'-&amp;gt; 6, 'I'-&amp;gt;5, 'X'-&amp;gt;0, 'E'-&amp;gt;8, 'V'-&amp;gt;7, 'N'-&amp;gt;2, 'T'-&amp;gt;1, 'W'-&amp;gt;'3', 'Y'-&amp;gt;4 Such that: &quot;SIX&quot; + &quot;SEVEN&quot; + &quot;SEVEN&quot; = &quot;TWENTY&quot; , 650 + 68782 + 68782 = 138214 Example 3: Input: words = [&quot;THIS&quot;,&quot;IS&quot;,&quot;TOO&quot;], result = &quot;FUNNY&quot; Output: true Example 4: Input: words = [&quot;LEET&quot;,&quot;CODE&quot;], result = &quot;POINT&quot; Output: false &amp;nbsp; Constraints: 2 &amp;lt;= words.length &amp;lt;= 5 1 &amp;lt;= words[i].length,&amp;nbsp;result.length&amp;nbsp;&amp;lt;= 7 words[i], result&amp;nbsp;contains only upper case English letters. Number of different characters used on the expression is at most&amp;nbsp;10. Related Topics: Math, Backtracking Solution 1. Backtracking Try to map the characters from right to left so that we can check the validity along the way. Time complexity Assume the maximum length of result or words[i] is L, and words is of length W. There are L! permutations. For each permutation, we need to check validity. Checking validity takes O(LW). We check validity when each new character is mapped, so we check L times for a permutation. So overall the time complexity is O(L! * L^2 * W). // OJ: https://leetcode.com/problems/verbal-arithmetic-puzzle/ // Time: O(L! * L^2 * W) // Space: O(L) class Solution { unordered_map&amp;lt;char, int&amp;gt; m; // map from char to the corresponding integer vector&amp;lt;char&amp;gt; chs; // chars to consider, right most chars are first considered. unordered_set&amp;lt;char&amp;gt; leading; // leading chars can't be zero int used[10] = {}; // digit `i` is used if `used[i] == 1` bool valid(vector&amp;lt;string&amp;gt;&amp;amp; words, string result) { // check if the current map `m` is valid int sum = 0; for (int i = 0; i &amp;lt; result.size(); ++i) { for (auto &amp;amp;w : words) { if (i &amp;gt;= w.size()) continue; char c = w[w.size() - i - 1]; if (m.count(c) == 0) return true; sum += m[c]; } char c = result[result.size() - i - 1]; if (m.count(c) == 0) return true; sum -= m[c]; if (sum % 10) return false; sum /= 10; } return true; } bool dfs(vector&amp;lt;string&amp;gt;&amp;amp; words, string result, int index) { if (index == chs.size()) return true; for (int i = 0; i &amp;lt; 10; ++i) { if (used[i] || (i == 0 &amp;amp;&amp;amp; leading.count(chs[index]))) continue; used[i] = 1; m[chs[index]] = i; if (valid(words,..." property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2019-06-29T22:21:01-07:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2019-06-29-1307-Verbal-Arithmetic-Puzzle/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-1307.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="1307 - Verbal Arithmetic Puzzle" property="twitter:title"/>
   <meta content="Leetcode Formatted question description: https://leetcode.ca/all/1307.html 1307. Verbal Arithmetic Puzzle (Hard) Given an equation, represented by words on left side and the result on right side. You need to check if the equation is solvable&amp;nbsp;under the following rules: Each character is decoded as one digit (0 - 9). Every pair of different characters they must map to different digits. Each words[i] and result&amp;nbsp;are decoded as one number without leading zeros. Sum of numbers on left side (words) will equal to the number on right side (result).&amp;nbsp; Return True&amp;nbsp;if the equation is solvable otherwise&amp;nbsp;return&amp;nbsp;False. &amp;nbsp; Example 1: Input: words = [&quot;SEND&quot;,&quot;MORE&quot;], result = &quot;MONEY&quot; Output: true Explanation: Map 'S'-&amp;gt; 9, 'E'-&amp;gt;5, 'N'-&amp;gt;6, 'D'-&amp;gt;7, 'M'-&amp;gt;1, 'O'-&amp;gt;0, 'R'-&amp;gt;8, 'Y'-&amp;gt;'2' Such that: &quot;SEND&quot; + &quot;MORE&quot; = &quot;MONEY&quot; , 9567 + 1085 = 10652 Example 2: Input: words = [&quot;SIX&quot;,&quot;SEVEN&quot;,&quot;SEVEN&quot;], result = &quot;TWENTY&quot; Output: true Explanation: Map 'S'-&amp;gt; 6, 'I'-&amp;gt;5, 'X'-&amp;gt;0, 'E'-&amp;gt;8, 'V'-&amp;gt;7, 'N'-&amp;gt;2, 'T'-&amp;gt;1, 'W'-&amp;gt;'3', 'Y'-&amp;gt;4 Such that: &quot;SIX&quot; + &quot;SEVEN&quot; + &quot;SEVEN&quot; = &quot;TWENTY&quot; , 650 + 68782 + 68782 = 138214 Example 3: Input: words = [&quot;THIS&quot;,&quot;IS&quot;,&quot;TOO&quot;], result = &quot;FUNNY&quot; Output: true Example 4: Input: words = [&quot;LEET&quot;,&quot;CODE&quot;], result = &quot;POINT&quot; Output: false &amp;nbsp; Constraints: 2 &amp;lt;= words.length &amp;lt;= 5 1 &amp;lt;= words[i].length,&amp;nbsp;result.length&amp;nbsp;&amp;lt;= 7 words[i], result&amp;nbsp;contains only upper case English letters. Number of different characters used on the expression is at most&amp;nbsp;10. Related Topics: Math, Backtracking Solution 1. Backtracking Try to map the characters from right to left so that we can check the validity along the way. Time complexity Assume the maximum length of result or words[i] is L, and words is of length W. There are L! permutations. For each permutation, we need to check validity. Checking validity takes O(LW). We check validity when each new character is mapped, so we check L times for a permutation. So overall the time complexity is O(L! * L^2 * W). // OJ: https://leetcode.com/problems/verbal-arithmetic-puzzle/ // Time: O(L! * L^2 * W) // Space: O(L) class Solution { unordered_map&amp;lt;char, int&amp;gt; m; // map from char to the corresponding integer vector&amp;lt;char&amp;gt; chs; // chars to consider, right most chars are first considered. unordered_set&amp;lt;char&amp;gt; leading; // leading chars can't be zero int used[10] = {}; // digit `i` is used if `used[i] == 1` bool valid(vector&amp;lt;string&amp;gt;&amp;amp; words, string result) { // check if the current map `m` is valid int sum = 0; for (int i = 0; i &amp;lt; result.size(); ++i) { for (auto &amp;amp;w : words) { if (i &amp;gt;= w.size()) continue; char c = w[w.size() - i - 1]; if (m.count(c) == 0) return true; sum += m[c]; } char c = result[result.size() - i - 1]; if (m.count(c) == 0) return true; sum -= m[c]; if (sum % 10) return false; sum /= 10; } return true; } bool dfs(vector&amp;lt;string&amp;gt;&amp;amp; words, string result, int index) { if (index == chs.size()) return true; for (int i = 0; i &amp;lt; 10; ++i) { if (used[i] || (i == 0 &amp;amp;&amp;amp; leading.count(chs[index]))) continue; used[i] = 1; m[chs[index]] = i; if (valid(words,..." property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    1307 - Verbal Arithmetic Puzzle | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="1307 - Verbal Arithmetic Puzzle" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-1307.html" rel="canonical">
          <meta content="https://leetcode.ca/2019-06-29-1307-Verbal-Arithmetic-Puzzle/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2019-06-29T22:21:01-07:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"1307 - Verbal Arithmetic Puzzle","dateModified":"2019-06-29T22:21:01-07:00","datePublished":"2019-06-29T22:21:01-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2019-06-29-1307-Verbal-Arithmetic-Puzzle/"},"url":"https://leetcode.ca/2019-06-29-1307-Verbal-Arithmetic-Puzzle/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <p>
       Formatted question description:
       <a href="solution-1307.html">
        https://leetcode.ca/all/1307.html
       </a>
      </p>
      <h1 id="1307-verbal-arithmetic-puzzle-hard">
       <a href="solution-1307.html">
        1307. Verbal Arithmetic Puzzle (Hard)
       </a>
      </h1>
      <p>
       Given an equation, represented by
       <code>
        words
       </code>
       on left side and the
       <code>
        result
       </code>
       on right side.
      </p>
      <p>
       You need to check if the equation is solvable under the following rules:
      </p>
      <ul>
       <li>
        Each character is decoded as one digit (0 - 9).
       </li>
       <li>
        Every pair of different characters they must map to different digits.
       </li>
       <li>
        Each
        <code>
         words[i]
        </code>
        and
        <code>
         result
        </code>
        are decoded as one number
        <strong>
         without
        </strong>
        leading zeros.
       </li>
       <li>
        Sum of numbers on left side (
        <code>
         words
        </code>
        ) will equal to the number on right side (
        <code>
         result
        </code>
        ).
       </li>
      </ul>
      <p>
       Return
       <code>
        True
       </code>
       if the equation is solvable otherwise return
       <code>
        False
       </code>
       .
      </p>
      <p>
      </p>
      <p>
       <strong>
        Example 1:
       </strong>
      </p>
      <pre><strong>Input:</strong> words = ["SEND","MORE"], result = "MONEY"
<strong>Output:</strong> true
<strong>Explanation:</strong> Map 'S'-&gt; 9, 'E'-&gt;5, 'N'-&gt;6, 'D'-&gt;7, 'M'-&gt;1, 'O'-&gt;0, 'R'-&gt;8, 'Y'-&gt;'2'
Such that: "SEND" + "MORE" = "MONEY" ,  9567 + 1085 = 10652</pre>
      <p>
       <strong>
        Example 2:
       </strong>
      </p>
      <pre><strong>Input:</strong> words = ["SIX","SEVEN","SEVEN"], result = "TWENTY"
<strong>Output:</strong> true
<strong>Explanation:</strong> Map 'S'-&gt; 6, 'I'-&gt;5, 'X'-&gt;0, 'E'-&gt;8, 'V'-&gt;7, 'N'-&gt;2, 'T'-&gt;1, 'W'-&gt;'3', 'Y'-&gt;4
Such that: "SIX" + "SEVEN" + "SEVEN" = "TWENTY" ,  650 + 68782 + 68782 = 138214</pre>
      <p>
       <strong>
        Example 3:
       </strong>
      </p>
      <pre><strong>Input:</strong> words = ["THIS","IS","TOO"], result = "FUNNY"
<strong>Output:</strong> true
</pre>
      <p>
       <strong>
        Example 4:
       </strong>
      </p>
      <pre><strong>Input:</strong> words = ["LEET","CODE"], result = "POINT"
<strong>Output:</strong> false
</pre>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         2 &lt;= words.length &lt;= 5
        </code>
       </li>
       <li>
        <code>
         1 &lt;= words[i].length, result.length &lt;= 7
        </code>
       </li>
       <li>
        <code>
         words[i], result
        </code>
        contains only upper case English letters.
       </li>
       <li>
        Number of different characters used on the expression is at most 10.
       </li>
      </ul>
      <p>
       <strong>
        Related Topics
       </strong>
       :
       <br/>
       <a href="solution-1307.html">
        Math
       </a>
       ,
       <a href="solution-1307.html">
        Backtracking
       </a>
      </p>
      <h2 id="solution-1-backtracking">
       Solution 1. Backtracking
      </h2>
      <p>
       Try to map the characters from right to left so that we can check the validity along the way.
      </p>
      <h3 id="time-complexity">
       Time complexity
      </h3>
      <p>
       Assume the maximum length of
       <code class="language-plaintext highlighter-rouge">
        result
       </code>
       or
       <code class="language-plaintext highlighter-rouge">
        words[i]
       </code>
       is
       <code class="language-plaintext highlighter-rouge">
        L
       </code>
       , and
       <code class="language-plaintext highlighter-rouge">
        words
       </code>
       is of length
       <code class="language-plaintext highlighter-rouge">
        W
       </code>
       .
      </p>
      <p>
       There are
       <code class="language-plaintext highlighter-rouge">
        L!
       </code>
       permutations. For each permutation, we need to check validity. Checking validity takes
       <code class="language-plaintext highlighter-rouge">
        O(LW)
       </code>
       . We check validity when each new character is mapped, so we check
       <code class="language-plaintext highlighter-rouge">
        L
       </code>
       times for a permutation.
      </p>
      <p>
       So overall the time complexity is
       <code class="language-plaintext highlighter-rouge">
        O(L! * L^2 * W)
       </code>
       .
      </p>
      <div class="language-cpp highlighter-rouge">
       <div class="highlight">
        <pre class="highlight"><code><span class="c1">// OJ: https://leetcode.com/problems/verbal-arithmetic-puzzle/</span>
<span class="c1">// Time: O(L! * L^2 * W)</span>
<span class="c1">// Space: O(L)</span>
<span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
    <span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">m</span><span class="p">;</span> <span class="c1">// map from char to the corresponding integer</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="n">chs</span><span class="p">;</span> <span class="c1">// chars to consider, right most chars are first considered.</span>
    <span class="n">unordered_set</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="n">leading</span><span class="p">;</span> <span class="c1">// leading chars can't be zero</span>
    <span class="kt">int</span> <span class="n">used</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="p">{};</span> <span class="c1">// digit `i` is used if `used[i] == 1`</span>
    <span class="kt">bool</span> <span class="n">valid</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">words</span><span class="p">,</span> <span class="n">string</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// check if the current map `m` is valid</span>
        <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="n">w</span> <span class="o">:</span> <span class="n">words</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="n">w</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="k">continue</span><span class="p">;</span>
                <span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="n">w</span><span class="p">[</span><span class="n">w</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
                <span class="n">sum</span> <span class="o">+=</span> <span class="n">m</span><span class="p">[</span><span class="n">c</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="n">sum</span> <span class="o">-=</span> <span class="n">m</span><span class="p">[</span><span class="n">c</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">sum</span> <span class="o">%</span> <span class="mi">10</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="n">sum</span> <span class="o">/=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">bool</span> <span class="n">dfs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">words</span><span class="p">,</span> <span class="n">string</span> <span class="n">result</span><span class="p">,</span> <span class="kt">int</span> <span class="n">index</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">chs</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">used</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">leading</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="n">chs</span><span class="p">[</span><span class="n">index</span><span class="p">])))</span> <span class="k">continue</span><span class="p">;</span>
            <span class="n">used</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="n">m</span><span class="p">[</span><span class="n">chs</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">valid</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">dfs</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="n">m</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">chs</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
            <span class="n">used</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">addChar</span><span class="p">(</span><span class="kt">char</span> <span class="n">ch</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">char</span> <span class="n">c</span> <span class="o">:</span> <span class="n">chs</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="n">ch</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">chs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">ch</span><span class="p">);</span>
    <span class="p">}</span>
<span class="nl">public:</span>
    <span class="kt">bool</span> <span class="n">isSolvable</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">words</span><span class="p">,</span> <span class="n">string</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="n">w</span> <span class="o">:</span> <span class="n">words</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">w</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">w</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="n">leading</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="n">leading</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="n">w</span> <span class="o">:</span> <span class="n">words</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">w</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="n">addChar</span><span class="p">(</span><span class="n">w</span><span class="p">[</span><span class="n">w</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span>
            <span class="p">}</span>
            <span class="n">addChar</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
       </div>
      </div>
      <ul class="uk-tab" data-uk-switcher="{connect:'#f87aaf50-ab0b-47cc-a9a7-5cf6059a3e3c'}">
       <li class="uk-active">
        <a href="solution-1307.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-1307.html">
         Python
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="f87aaf50-ab0b-47cc-a9a7-5cf6059a3e3c">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isSolvable</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">words</span><span class="o">,</span> <span class="nc">String</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Character</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">letterDigitMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">Character</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;();</span>
        <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Character</span><span class="o">&gt;</span> <span class="n">leadingSet</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;</span><span class="nc">Character</span><span class="o">&gt;();</span>
        <span class="kt">int</span> <span class="n">resultLength</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">word</span> <span class="o">:</span> <span class="n">words</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">word</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">resultLength</span><span class="o">)</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">word</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span>
                <span class="n">leadingSet</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">word</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span>
            <span class="n">leadingSet</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
        <span class="kt">boolean</span><span class="o">[]</span> <span class="n">used</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">boolean</span><span class="o">[</span><span class="mi">10</span><span class="o">];</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">carry</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">resultLength</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
        <span class="k">return</span> <span class="nf">depthFirstSearch</span><span class="o">(</span><span class="n">words</span><span class="o">,</span> <span class="n">result</span><span class="o">,</span> <span class="n">letterDigitMap</span><span class="o">,</span> <span class="n">leadingSet</span><span class="o">,</span> <span class="n">used</span><span class="o">,</span> <span class="n">carry</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">depthFirstSearch</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">words</span><span class="o">,</span> <span class="nc">String</span> <span class="n">result</span><span class="o">,</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Character</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">letterDigitMap</span><span class="o">,</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Character</span><span class="o">&gt;</span> <span class="n">leadingSet</span><span class="o">,</span> <span class="kt">boolean</span><span class="o">[]</span> <span class="n">used</span><span class="o">,</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">carry</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="kt">int</span> <span class="n">wordIndex</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">position</span> <span class="o">==</span> <span class="n">result</span><span class="o">.</span><span class="na">length</span><span class="o">())</span>
            <span class="k">return</span> <span class="n">carry</span><span class="o">[</span><span class="n">position</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">wordIndex</span> <span class="o">&lt;</span> <span class="n">words</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">word</span> <span class="o">=</span> <span class="n">words</span><span class="o">[</span><span class="n">wordIndex</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">wordLength</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">wordLength</span> <span class="o">&lt;=</span> <span class="n">position</span> <span class="o">||</span> <span class="n">letterDigitMap</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">word</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">wordLength</span> <span class="o">-</span> <span class="n">position</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)))</span>
                <span class="k">return</span> <span class="nf">depthFirstSearch</span><span class="o">(</span><span class="n">words</span><span class="o">,</span> <span class="n">result</span><span class="o">,</span> <span class="n">letterDigitMap</span><span class="o">,</span> <span class="n">leadingSet</span><span class="o">,</span> <span class="n">used</span><span class="o">,</span> <span class="n">carry</span><span class="o">,</span> <span class="n">position</span><span class="o">,</span> <span class="n">wordIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
            <span class="k">else</span> <span class="o">{</span>
                <span class="kt">char</span> <span class="n">letter</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">wordLength</span> <span class="o">-</span> <span class="n">position</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
                <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="n">leadingSet</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">letter</span><span class="o">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="o">;</span>
                <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(!</span><span class="n">used</span><span class="o">[</span><span class="n">i</span><span class="o">])</span> <span class="o">{</span>
                        <span class="n">used</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                        <span class="n">letterDigitMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">letter</span><span class="o">,</span> <span class="n">i</span><span class="o">);</span>
                        <span class="kt">boolean</span> <span class="n">next</span> <span class="o">=</span> <span class="n">depthFirstSearch</span><span class="o">(</span><span class="n">words</span><span class="o">,</span> <span class="n">result</span><span class="o">,</span> <span class="n">letterDigitMap</span><span class="o">,</span> <span class="n">leadingSet</span><span class="o">,</span> <span class="n">used</span><span class="o">,</span> <span class="n">carry</span><span class="o">,</span> <span class="n">position</span><span class="o">,</span> <span class="n">wordIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
                        <span class="n">used</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                        <span class="n">letterDigitMap</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">letter</span><span class="o">);</span>
                        <span class="k">if</span> <span class="o">(</span><span class="n">next</span><span class="o">)</span>
                            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">remain</span> <span class="o">=</span> <span class="n">carry</span><span class="o">[</span><span class="n">position</span><span class="o">];</span>
            <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">word</span> <span class="o">:</span> <span class="n">words</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">word</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
                    <span class="kt">char</span> <span class="n">letter</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">word</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="n">position</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
                    <span class="n">remain</span> <span class="o">+=</span> <span class="n">letterDigitMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">letter</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">carry</span><span class="o">[</span><span class="n">position</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">remain</span> <span class="o">/</span> <span class="mi">10</span><span class="o">;</span>
            <span class="n">remain</span> <span class="o">%=</span> <span class="mi">10</span><span class="o">;</span>
            <span class="kt">char</span> <span class="n">letter</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="n">position</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">letterDigitMap</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">letter</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">letterDigitMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">letter</span><span class="o">)</span> <span class="o">==</span> <span class="n">remain</span><span class="o">)</span>
                <span class="k">return</span> <span class="nf">depthFirstSearch</span><span class="o">(</span><span class="n">words</span><span class="o">,</span> <span class="n">result</span><span class="o">,</span> <span class="n">letterDigitMap</span><span class="o">,</span> <span class="n">leadingSet</span><span class="o">,</span> <span class="n">used</span><span class="o">,</span> <span class="n">carry</span><span class="o">,</span> <span class="n">position</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
            <span class="k">else</span> <span class="nf">if</span> <span class="o">(!</span><span class="n">letterDigitMap</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">letter</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">used</span><span class="o">[</span><span class="n">remain</span><span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">!(</span><span class="n">leadingSet</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">letter</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">remain</span> <span class="o">==</span> <span class="mi">0</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">used</span><span class="o">[</span><span class="n">remain</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                <span class="n">letterDigitMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">letter</span><span class="o">,</span> <span class="n">remain</span><span class="o">);</span>
                <span class="kt">boolean</span> <span class="n">next</span> <span class="o">=</span> <span class="n">depthFirstSearch</span><span class="o">(</span><span class="n">words</span><span class="o">,</span> <span class="n">result</span><span class="o">,</span> <span class="n">letterDigitMap</span><span class="o">,</span> <span class="n">leadingSet</span><span class="o">,</span> <span class="n">used</span><span class="o">,</span> <span class="n">carry</span><span class="o">,</span> <span class="n">position</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
                <span class="n">used</span><span class="o">[</span><span class="n">remain</span><span class="o">]</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                <span class="n">letterDigitMap</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">letter</span><span class="o">);</span>
                <span class="k">return</span> <span class="n">next</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-py highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">isAnyMapping</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">bal</span><span class="p">,</span> <span class="n">letToDig</span><span class="p">,</span> <span class="n">digToLet</span><span class="p">,</span> <span class="n">totalRows</span><span class="p">,</span> <span class="n">totalCols</span>
    <span class="p">):</span>
        <span class="c1"># If traversed all columns.
</span>        <span class="k">if</span> <span class="n">col</span> <span class="o">==</span> <span class="n">totalCols</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bal</span> <span class="o">==</span> <span class="mi">0</span>

        <span class="c1"># At the end of a particular column.
</span>        <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="n">totalRows</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bal</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="p">.</span><span class="n">isAnyMapping</span><span class="p">(</span>
                <span class="n">words</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">bal</span> <span class="o">//</span> <span class="mi">10</span><span class="p">,</span> <span class="n">letToDig</span><span class="p">,</span> <span class="n">digToLet</span><span class="p">,</span> <span class="n">totalRows</span><span class="p">,</span> <span class="n">totalCols</span>
            <span class="p">)</span>

        <span class="n">w</span> <span class="o">=</span> <span class="n">words</span><span class="p">[</span><span class="n">row</span><span class="p">]</span>

        <span class="c1"># If the current string 'w' has no character in the ('col')th index.
</span>        <span class="k">if</span> <span class="n">col</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">isAnyMapping</span><span class="p">(</span>
                <span class="n">words</span><span class="p">,</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">bal</span><span class="p">,</span> <span class="n">letToDig</span><span class="p">,</span> <span class="n">digToLet</span><span class="p">,</span> <span class="n">totalRows</span><span class="p">,</span> <span class="n">totalCols</span>
            <span class="p">)</span>

        <span class="c1"># Take the current character in the variable letter.
</span>        <span class="n">letter</span> <span class="o">=</span> <span class="n">w</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">col</span><span class="p">]</span>

        <span class="c1"># Create a variable 'sign' to check whether we have to add it or subtract it.
</span>        <span class="k">if</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">totalRows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">sign</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sign</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="c1"># If we have a prior valid mapping, then use that mapping.
</span>        <span class="c1"># The second condition is for the leading zeros.
</span>        <span class="k">if</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">letToDig</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="n">letToDig</span><span class="p">[</span><span class="n">letter</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">letToDig</span><span class="p">[</span><span class="n">letter</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
            <span class="ow">or</span> <span class="n">col</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="p">):</span>

            <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">isAnyMapping</span><span class="p">(</span>
                <span class="n">words</span><span class="p">,</span>
                <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">col</span><span class="p">,</span>
                <span class="n">bal</span> <span class="o">+</span> <span class="n">sign</span> <span class="o">*</span> <span class="n">letToDig</span><span class="p">[</span><span class="n">letter</span><span class="p">],</span>
                <span class="n">letToDig</span><span class="p">,</span>
                <span class="n">digToLet</span><span class="p">,</span>
                <span class="n">totalRows</span><span class="p">,</span>
                <span class="n">totalCols</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># Choose a new mapping.
</span>        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
                <span class="c1"># If 'i'th mapping is valid then select it.
</span>                <span class="k">if</span> <span class="n">digToLet</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">"-"</span> <span class="ow">and</span> <span class="p">(</span>
                    <span class="n">i</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="n">col</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="p">):</span>
                    <span class="n">digToLet</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">letter</span>
                    <span class="n">letToDig</span><span class="p">[</span><span class="n">letter</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>

                    <span class="c1"># Call the function again with the new mapping.
</span>                    <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">isAnyMapping</span><span class="p">(</span>
                        <span class="n">words</span><span class="p">,</span>
                        <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="n">col</span><span class="p">,</span>
                        <span class="n">bal</span> <span class="o">+</span> <span class="n">sign</span> <span class="o">*</span> <span class="n">letToDig</span><span class="p">[</span><span class="n">letter</span><span class="p">],</span>
                        <span class="n">letToDig</span><span class="p">,</span>
                        <span class="n">digToLet</span><span class="p">,</span>
                        <span class="n">totalRows</span><span class="p">,</span>
                        <span class="n">totalCols</span><span class="p">,</span>
                    <span class="p">):</span>
                        <span class="k">return</span> <span class="bp">True</span>

                    <span class="c1"># Unselect the mapping.
</span>                    <span class="n">digToLet</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s">"-"</span>
                    <span class="k">if</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">letToDig</span><span class="p">:</span>
                        <span class="k">del</span> <span class="n">letToDig</span><span class="p">[</span><span class="n">letter</span><span class="p">]</span>

        <span class="c1"># If nothing is correct then just return false.
</span>        <span class="k">return</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">isSolvable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="c1"># Add the string 'result' in the list 'words'.
</span>        <span class="n">words</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="c1"># Initialize 'totalRows' with the size of the list.
</span>        <span class="n">totalRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

        <span class="c1"># Find the longest string in the list and set 'totalCols' with the size of that string.
</span>        <span class="n">totalCols</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">)</span>

        <span class="c1"># Create a HashMap for the letter to digit mapping.
</span>        <span class="n">letToDig</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Create a list for the digit to letter mapping.
</span>        <span class="n">digToLet</span> <span class="o">=</span> <span class="p">[</span><span class="s">"-"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span>

        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">isAnyMapping</span><span class="p">(</span>
            <span class="n">words</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">letToDig</span><span class="p">,</span> <span class="n">digToLet</span><span class="p">,</span> <span class="n">totalRows</span><span class="p">,</span> <span class="n">totalCols</span>
        <span class="p">)</span>

</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-1307.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
