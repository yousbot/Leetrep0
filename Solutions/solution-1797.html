<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-1797.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-1797.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>1797 - Design Authentication Manager</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode 1797. Design Authentication Manager Description There is an authentication system that works with authentication tokens. For each session, the user will receive a new authentication token that will expire timeToLive seconds after the currentTime. If the token is renewed, the expiry time will be extended...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-1797.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-1797.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-1797.html" rel="stylesheet"/>
   <link href="solution-1797.html" rel="stylesheet"/>
   <link href="solution-1797.html" rel="stylesheet"/>
   <link href="solution-1797.html" rel="stylesheet"/>
   <link href="solution-1797.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="1797 - Design Authentication Manager" property="og:title"/>
   <meta content="Leetcode 1797. Design Authentication Manager Description There is an authentication system that works with authentication tokens. For each session, the user will receive a new authentication token that will expire timeToLive seconds after the currentTime. If the token is renewed, the expiry time will be extended to expire timeToLive seconds after the (potentially different) currentTime. Implement the AuthenticationManager class: AuthenticationManager(int timeToLive) constructs the AuthenticationManager and sets the timeToLive. generate(string tokenId, int currentTime) generates a new token with the given tokenId at the given currentTime in seconds. renew(string tokenId, int currentTime) renews the unexpired token with the given tokenId at the given currentTime in seconds. If there are no unexpired tokens with the given tokenId, the request is ignored, and nothing happens. countUnexpiredTokens(int currentTime) returns the number of unexpired tokens at the given currentTime. Note that if a token expires at time t, and another action happens on time t (renew or countUnexpiredTokens), the expiration takes place before the other actions. &amp;nbsp; Example 1: Input [&amp;quot;AuthenticationManager&amp;quot;, &amp;quot;renew&amp;quot;, &amp;quot;generate&amp;quot;, &amp;quot;countUnexpiredTokens&amp;quot;, &amp;quot;generate&amp;quot;, &amp;quot;renew&amp;quot;, &amp;quot;renew&amp;quot;, &amp;quot;countUnexpiredTokens&amp;quot;] [[5], [&amp;quot;aaa&amp;quot;, 1], [&amp;quot;aaa&amp;quot;, 2], [6], [&amp;quot;bbb&amp;quot;, 7], [&amp;quot;aaa&amp;quot;, 8], [&amp;quot;bbb&amp;quot;, 10], [15]] Output [null, null, null, 1, null, null, null, 0] Explanation AuthenticationManager authenticationManager = new AuthenticationManager(5); // Constructs the AuthenticationManager with timeToLive = 5 seconds. authenticationManager.renew(&amp;quot;aaa&amp;quot;, 1); // No token exists with tokenId &amp;quot;aaa&amp;quot; at time 1, so nothing happens. authenticationManager.generate(&amp;quot;aaa&amp;quot;, 2); // Generates a new token with tokenId &amp;quot;aaa&amp;quot; at time 2. authenticationManager.countUnexpiredTokens(6); // The token with tokenId &amp;quot;aaa&amp;quot; is the only unexpired one at time 6, so return 1. authenticationManager.generate(&amp;quot;bbb&amp;quot;, 7); // Generates a new token with tokenId &amp;quot;bbb&amp;quot; at time 7. authenticationManager.renew(&amp;quot;aaa&amp;quot;, 8); // The token with tokenId &amp;quot;aaa&amp;quot; expired at time 7, and 8 &amp;gt;= 7, so at time 8 the renew request is ignored, and nothing happens. authenticationManager.renew(&amp;quot;bbb&amp;quot;, 10); // The token with tokenId &amp;quot;bbb&amp;quot; is unexpired at time 10, so the renew request is fulfilled and now the token will expire at time 15. authenticationManager.countUnexpiredTokens(15); // The token with tokenId &amp;quot;bbb&amp;quot; expires at time 15, and the token with tokenId &amp;quot;aaa&amp;quot; expired at time 7, so currently no token is unexpired, so return 0. &amp;nbsp; Constraints: 1 &amp;lt;= timeToLive &amp;lt;= 108 1 &amp;lt;= currentTime &amp;lt;= 108 1 &amp;lt;= tokenId.length &amp;lt;= 5 tokenId consists only of lowercase letters. All calls to generate will contain unique values of tokenId. The values of currentTime across all the function calls will be strictly increasing. At most 2000 calls will be made to all functions combined. Solutions Solution 1: Hash Table We can simply maintain a hash table $d$, where the key is tokenId and the value is the expiration time. During the generate operation, we store tokenId as the key and currentTime + timeToLive as the value in the hash table $d$. During the renew operation, if tokenId is not in the hash table $d$, or currentTime &amp;gt;= d[tokenId], we ignore this operation; otherwise, we update d[tokenId] to currentTime + timeToLive. During the countUnexpiredTokens operation, we traverse the hash table..." property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2020-10-31T00:00:00-07:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2020-10-31-1797-Design-Authentication-Manager/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-1797.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="1797 - Design Authentication Manager" property="twitter:title"/>
   <meta content="Leetcode 1797. Design Authentication Manager Description There is an authentication system that works with authentication tokens. For each session, the user will receive a new authentication token that will expire timeToLive seconds after the currentTime. If the token is renewed, the expiry time will be extended to expire timeToLive seconds after the (potentially different) currentTime. Implement the AuthenticationManager class: AuthenticationManager(int timeToLive) constructs the AuthenticationManager and sets the timeToLive. generate(string tokenId, int currentTime) generates a new token with the given tokenId at the given currentTime in seconds. renew(string tokenId, int currentTime) renews the unexpired token with the given tokenId at the given currentTime in seconds. If there are no unexpired tokens with the given tokenId, the request is ignored, and nothing happens. countUnexpiredTokens(int currentTime) returns the number of unexpired tokens at the given currentTime. Note that if a token expires at time t, and another action happens on time t (renew or countUnexpiredTokens), the expiration takes place before the other actions. &amp;nbsp; Example 1: Input [&amp;quot;AuthenticationManager&amp;quot;, &amp;quot;renew&amp;quot;, &amp;quot;generate&amp;quot;, &amp;quot;countUnexpiredTokens&amp;quot;, &amp;quot;generate&amp;quot;, &amp;quot;renew&amp;quot;, &amp;quot;renew&amp;quot;, &amp;quot;countUnexpiredTokens&amp;quot;] [[5], [&amp;quot;aaa&amp;quot;, 1], [&amp;quot;aaa&amp;quot;, 2], [6], [&amp;quot;bbb&amp;quot;, 7], [&amp;quot;aaa&amp;quot;, 8], [&amp;quot;bbb&amp;quot;, 10], [15]] Output [null, null, null, 1, null, null, null, 0] Explanation AuthenticationManager authenticationManager = new AuthenticationManager(5); // Constructs the AuthenticationManager with timeToLive = 5 seconds. authenticationManager.renew(&amp;quot;aaa&amp;quot;, 1); // No token exists with tokenId &amp;quot;aaa&amp;quot; at time 1, so nothing happens. authenticationManager.generate(&amp;quot;aaa&amp;quot;, 2); // Generates a new token with tokenId &amp;quot;aaa&amp;quot; at time 2. authenticationManager.countUnexpiredTokens(6); // The token with tokenId &amp;quot;aaa&amp;quot; is the only unexpired one at time 6, so return 1. authenticationManager.generate(&amp;quot;bbb&amp;quot;, 7); // Generates a new token with tokenId &amp;quot;bbb&amp;quot; at time 7. authenticationManager.renew(&amp;quot;aaa&amp;quot;, 8); // The token with tokenId &amp;quot;aaa&amp;quot; expired at time 7, and 8 &amp;gt;= 7, so at time 8 the renew request is ignored, and nothing happens. authenticationManager.renew(&amp;quot;bbb&amp;quot;, 10); // The token with tokenId &amp;quot;bbb&amp;quot; is unexpired at time 10, so the renew request is fulfilled and now the token will expire at time 15. authenticationManager.countUnexpiredTokens(15); // The token with tokenId &amp;quot;bbb&amp;quot; expires at time 15, and the token with tokenId &amp;quot;aaa&amp;quot; expired at time 7, so currently no token is unexpired, so return 0. &amp;nbsp; Constraints: 1 &amp;lt;= timeToLive &amp;lt;= 108 1 &amp;lt;= currentTime &amp;lt;= 108 1 &amp;lt;= tokenId.length &amp;lt;= 5 tokenId consists only of lowercase letters. All calls to generate will contain unique values of tokenId. The values of currentTime across all the function calls will be strictly increasing. At most 2000 calls will be made to all functions combined. Solutions Solution 1: Hash Table We can simply maintain a hash table $d$, where the key is tokenId and the value is the expiration time. During the generate operation, we store tokenId as the key and currentTime + timeToLive as the value in the hash table $d$. During the renew operation, if tokenId is not in the hash table $d$, or currentTime &amp;gt;= d[tokenId], we ignore this operation; otherwise, we update d[tokenId] to currentTime + timeToLive. During the countUnexpiredTokens operation, we traverse the hash table..." property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    1797 - Design Authentication Manager | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="1797 - Design Authentication Manager" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-1797.html" rel="canonical">
          <meta content="https://leetcode.ca/2020-10-31-1797-Design-Authentication-Manager/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2020-10-31T00:00:00-07:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"1797 - Design Authentication Manager","dateModified":"2020-10-31T00:00:00-07:00","datePublished":"2020-10-31T00:00:00-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2020-10-31-1797-Design-Authentication-Manager/"},"url":"https://leetcode.ca/2020-10-31-1797-Design-Authentication-Manager/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <h1 id="1797-design-authentication-manager">
       <a href="solution-1797.html">
        1797. Design Authentication Manager
       </a>
      </h1>
      <h2 id="description">
       Description
      </h2>
      <p>
       There is an authentication system that works with authentication tokens. For each session, the user will receive a new authentication token that will expire
       <code>
        timeToLive
       </code>
       seconds after the
       <code>
        currentTime
       </code>
       . If the token is renewed, the expiry time will be
       <b>
        extended
       </b>
       to expire
       <code>
        timeToLive
       </code>
       seconds after the (potentially different)
       <code>
        currentTime
       </code>
       .
      </p>
      <p>
       Implement the
       <code>
        AuthenticationManager
       </code>
       class:
      </p>
      <ul>
       <li>
        <code>
         AuthenticationManager(int timeToLive)
        </code>
        constructs the
        <code>
         AuthenticationManager
        </code>
        and sets the
        <code>
         timeToLive
        </code>
        .
       </li>
       <li>
        <code>
         generate(string tokenId, int currentTime)
        </code>
        generates a new token with the given
        <code>
         tokenId
        </code>
        at the given
        <code>
         currentTime
        </code>
        in seconds.
       </li>
       <li>
        <code>
         renew(string tokenId, int currentTime)
        </code>
        renews the
        <strong>
         unexpired
        </strong>
        token with the given
        <code>
         tokenId
        </code>
        at the given
        <code>
         currentTime
        </code>
        in seconds. If there are no unexpired tokens with the given
        <code>
         tokenId
        </code>
        , the request is ignored, and nothing happens.
       </li>
       <li>
        <code>
         countUnexpiredTokens(int currentTime)
        </code>
        returns the number of
        <strong>
         unexpired
        </strong>
        tokens at the given currentTime.
       </li>
      </ul>
      <p>
       Note that if a token expires at time
       <code>
        t
       </code>
       , and another action happens on time
       <code>
        t
       </code>
       (
       <code>
        renew
       </code>
       or
       <code>
        countUnexpiredTokens
       </code>
       ), the expiration takes place
       <strong>
        before
       </strong>
       the other actions.
      </p>
      <p>
      </p>
      <p>
       <strong class="example">
        Example 1:
       </strong>
      </p>
      <p>
       <img alt="" src="https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1700-1799/1797.Design%20Authentication%20Manager/images/copy-of-pc68_q2.png" style="width: 500px; height: 287px;"/>
      </p>
      <pre>
<strong>Input</strong>
["AuthenticationManager", "<code>renew</code>", "generate", "<code>countUnexpiredTokens</code>", "generate", "<code>renew</code>", "<code>renew</code>", "<code>countUnexpiredTokens</code>"]
[[5], ["aaa", 1], ["aaa", 2], [6], ["bbb", 7], ["aaa", 8], ["bbb", 10], [15]]
<strong>Output</strong>
[null, null, null, 1, null, null, null, 0]

<strong>Explanation</strong>
AuthenticationManager authenticationManager = new AuthenticationManager(5); // Constructs the AuthenticationManager with <code>timeToLive</code> = 5 seconds.
authenticationManager.<code>renew</code>("aaa", 1); // No token exists with tokenId "aaa" at time 1, so nothing happens.
authenticationManager.generate("aaa", 2); // Generates a new token with tokenId "aaa" at time 2.
authenticationManager.<code>countUnexpiredTokens</code>(6); // The token with tokenId "aaa" is the only unexpired one at time 6, so return 1.
authenticationManager.generate("bbb", 7); // Generates a new token with tokenId "bbb" at time 7.
authenticationManager.<code>renew</code>("aaa", 8); // The token with tokenId "aaa" expired at time 7, and 8 &gt;= 7, so at time 8 the <code>renew</code> request is ignored, and nothing happens.
authenticationManager.<code>renew</code>("bbb", 10); // The token with tokenId "bbb" is unexpired at time 10, so the <code>renew</code> request is fulfilled and now the token will expire at time 15.
authenticationManager.<code>countUnexpiredTokens</code>(15); // The token with tokenId "bbb" expires at time 15, and the token with tokenId "aaa" expired at time 7, so currently no token is unexpired, so return 0.

</pre>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         1 &lt;= timeToLive &lt;= 10
         <sup>
          8
         </sup>
        </code>
       </li>
       <li>
        <code>
         1 &lt;= currentTime &lt;= 10
         <sup>
          8
         </sup>
        </code>
       </li>
       <li>
        <code>
         1 &lt;= tokenId.length &lt;= 5
        </code>
       </li>
       <li>
        <code>
         tokenId
        </code>
        consists only of lowercase letters.
       </li>
       <li>
        All calls to
        <code>
         generate
        </code>
        will contain unique values of
        <code>
         tokenId
        </code>
        .
       </li>
       <li>
        The values of
        <code>
         currentTime
        </code>
        across all the function calls will be
        <strong>
         strictly increasing
        </strong>
        .
       </li>
       <li>
        At most
        <code>
         2000
        </code>
        calls will be made to all functions combined.
       </li>
      </ul>
      <h2 id="solutions">
       Solutions
      </h2>
      <p>
       <strong>
        Solution 1: Hash Table
       </strong>
      </p>
      <p>
       We can simply maintain a hash table $d$, where the key is
       <code class="language-plaintext highlighter-rouge">
        tokenId
       </code>
       and the value is the expiration time.
      </p>
      <ul>
       <li>
        During the
        <code class="language-plaintext highlighter-rouge">
         generate
        </code>
        operation, we store
        <code class="language-plaintext highlighter-rouge">
         tokenId
        </code>
        as the key and
        <code class="language-plaintext highlighter-rouge">
         currentTime + timeToLive
        </code>
        as the value in the hash table $d$.
       </li>
       <li>
        During the
        <code class="language-plaintext highlighter-rouge">
         renew
        </code>
        operation, if
        <code class="language-plaintext highlighter-rouge">
         tokenId
        </code>
        is not in the hash table $d$, or
        <code class="language-plaintext highlighter-rouge">
         currentTime &gt;= d[tokenId]
        </code>
        , we ignore this operation; otherwise, we update
        <code class="language-plaintext highlighter-rouge">
         d[tokenId]
        </code>
        to
        <code class="language-plaintext highlighter-rouge">
         currentTime + timeToLive
        </code>
        .
       </li>
       <li>
        During the
        <code class="language-plaintext highlighter-rouge">
         countUnexpiredTokens
        </code>
        operation, we traverse the hash table $d$ and count the number of unexpired
        <code class="language-plaintext highlighter-rouge">
         tokenId
        </code>
        .
       </li>
      </ul>
      <p>
       In terms of time complexity, both
       <code class="language-plaintext highlighter-rouge">
        generate
       </code>
       and
       <code class="language-plaintext highlighter-rouge">
        renew
       </code>
       operations have a time complexity of $O(1)$, and the
       <code class="language-plaintext highlighter-rouge">
        countUnexpiredTokens
       </code>
       operation has a time complexity of $O(n)$, where $n$ is the number of key-value pairs in the hash table $d$.
      </p>
      <p>
       The space complexity is $O(n)$, where $n$ is the number of key-value pairs in the hash table $d$.
      </p>
      <ul class="uk-tab" data-uk-switcher="{connect:'#8615af53-79f5-4fb9-93be-2a15a400a022'}">
       <li class="uk-active">
        <a href="solution-1797.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-1797.html">
         C++
        </a>
       </li>
       <li>
        <a href="solution-1797.html">
         Python
        </a>
       </li>
       <li>
        <a href="solution-1797.html">
         Go
        </a>
       </li>
       <li>
        <a href="solution-1797.html">
         TypeScript
        </a>
       </li>
       <li>
        <a href="solution-1797.html">
         RenderScript
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="8615af53-79f5-4fb9-93be-2a15a400a022">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">AuthenticationManager</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">t</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">AuthenticationManager</span><span class="o">(</span><span class="kt">int</span> <span class="n">timeToLive</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">timeToLive</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">generate</span><span class="o">(</span><span class="nc">String</span> <span class="n">tokenId</span><span class="o">,</span> <span class="kt">int</span> <span class="n">currentTime</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">d</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">tokenId</span><span class="o">,</span> <span class="n">currentTime</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">renew</span><span class="o">(</span><span class="nc">String</span> <span class="n">tokenId</span><span class="o">,</span> <span class="kt">int</span> <span class="n">currentTime</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">d</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">tokenId</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">&lt;=</span> <span class="n">currentTime</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">generate</span><span class="o">(</span><span class="n">tokenId</span><span class="o">,</span> <span class="n">currentTime</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">countUnexpiredTokens</span><span class="o">(</span><span class="kt">int</span> <span class="n">currentTime</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">exp</span> <span class="o">:</span> <span class="n">d</span><span class="o">.</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">exp</span> <span class="o">&gt;</span> <span class="n">currentTime</span><span class="o">)</span> <span class="o">{</span>
                <span class="o">++</span><span class="n">ans</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">ans</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/**
 * Your AuthenticationManager object will be instantiated and called as such:
 * AuthenticationManager obj = new AuthenticationManager(timeToLive);
 * obj.generate(tokenId,currentTime);
 * obj.renew(tokenId,currentTime);
 * int param_3 = obj.countUnexpiredTokens(currentTime);
 */</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-cpp highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">AuthenticationManager</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">AuthenticationManager</span><span class="p">(</span><span class="kt">int</span> <span class="n">timeToLive</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">timeToLive</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">generate</span><span class="p">(</span><span class="n">string</span> <span class="n">tokenId</span><span class="p">,</span> <span class="kt">int</span> <span class="n">currentTime</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">d</span><span class="p">[</span><span class="n">tokenId</span><span class="p">]</span> <span class="o">=</span> <span class="n">currentTime</span> <span class="o">+</span> <span class="n">t</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">renew</span><span class="p">(</span><span class="n">string</span> <span class="n">tokenId</span><span class="p">,</span> <span class="kt">int</span> <span class="n">currentTime</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">tokenId</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">currentTime</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="n">generate</span><span class="p">(</span><span class="n">tokenId</span><span class="p">,</span> <span class="n">currentTime</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">countUnexpiredTokens</span><span class="p">(</span><span class="kt">int</span> <span class="n">currentTime</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="p">[</span><span class="n">_</span><span class="p">,</span> <span class="n">v</span><span class="p">]</span> <span class="o">:</span> <span class="n">d</span><span class="p">)</span> <span class="n">ans</span> <span class="o">+=</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="n">currentTime</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
    <span class="p">}</span>

<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">t</span><span class="p">;</span>
    <span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">d</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**
 * Your AuthenticationManager object will be instantiated and called as such:
 * AuthenticationManager* obj = new AuthenticationManager(timeToLive);
 * obj-&gt;generate(tokenId,currentTime);
 * obj-&gt;renew(tokenId,currentTime);
 * int param_3 = obj-&gt;countUnexpiredTokens(currentTime);
 */</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-py highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">AuthenticationManager</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeToLive</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">timeToLive</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">d</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tokenId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">currentTime</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">d</span><span class="p">[</span><span class="n">tokenId</span><span class="p">]</span> <span class="o">=</span> <span class="n">currentTime</span> <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">t</span>

    <span class="k">def</span> <span class="nf">renew</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tokenId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">currentTime</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">d</span><span class="p">[</span><span class="n">tokenId</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">currentTime</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">d</span><span class="p">[</span><span class="n">tokenId</span><span class="p">]</span> <span class="o">=</span> <span class="n">currentTime</span> <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">t</span>

    <span class="k">def</span> <span class="nf">countUnexpiredTokens</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">currentTime</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">exp</span> <span class="o">&gt;</span> <span class="n">currentTime</span> <span class="k">for</span> <span class="n">exp</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">d</span><span class="p">.</span><span class="n">values</span><span class="p">())</span>


<span class="c1"># Your AuthenticationManager object will be instantiated and called as such:
# obj = AuthenticationManager(timeToLive)
# obj.generate(tokenId,currentTime)
# obj.renew(tokenId,currentTime)
# param_3 = obj.countUnexpiredTokens(currentTime)
</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-go highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">type</span> <span class="n">AuthenticationManager</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">t</span> <span class="kt">int</span>
	<span class="n">d</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">Constructor</span><span class="p">(</span><span class="n">timeToLive</span> <span class="kt">int</span><span class="p">)</span> <span class="n">AuthenticationManager</span> <span class="p">{</span>
	<span class="k">return</span> <span class="n">AuthenticationManager</span><span class="p">{</span><span class="n">timeToLive</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">{}</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">this</span> <span class="o">*</span><span class="n">AuthenticationManager</span><span class="p">)</span> <span class="n">Generate</span><span class="p">(</span><span class="n">tokenId</span> <span class="kt">string</span><span class="p">,</span> <span class="n">currentTime</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">this</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="n">tokenId</span><span class="p">]</span> <span class="o">=</span> <span class="n">currentTime</span> <span class="o">+</span> <span class="n">this</span><span class="o">.</span><span class="n">t</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">this</span> <span class="o">*</span><span class="n">AuthenticationManager</span><span class="p">)</span> <span class="n">Renew</span><span class="p">(</span><span class="n">tokenId</span> <span class="kt">string</span><span class="p">,</span> <span class="n">currentTime</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="n">v</span><span class="p">,</span> <span class="n">ok</span> <span class="o">:=</span> <span class="n">this</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="n">tokenId</span><span class="p">];</span> <span class="o">!</span><span class="n">ok</span> <span class="o">||</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="n">currentTime</span> <span class="p">{</span>
		<span class="k">return</span>
	<span class="p">}</span>
	<span class="n">this</span><span class="o">.</span><span class="n">Generate</span><span class="p">(</span><span class="n">tokenId</span><span class="p">,</span> <span class="n">currentTime</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">this</span> <span class="o">*</span><span class="n">AuthenticationManager</span><span class="p">)</span> <span class="n">CountUnexpiredTokens</span><span class="p">(</span><span class="n">currentTime</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="n">ans</span> <span class="o">:=</span> <span class="m">0</span>
	<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">exp</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">this</span><span class="o">.</span><span class="n">d</span> <span class="p">{</span>
		<span class="k">if</span> <span class="n">exp</span> <span class="o">&gt;</span> <span class="n">currentTime</span> <span class="p">{</span>
			<span class="n">ans</span><span class="o">++</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">ans</span>
<span class="p">}</span>

<span class="c">/**
 * Your AuthenticationManager object will be instantiated and called as such:
 * obj := Constructor(timeToLive);
 * obj.Generate(tokenId,currentTime);
 * obj.Renew(tokenId,currentTime);
 * param_3 := obj.CountUnexpiredTokens(currentTime);
 */</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-ts highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nx">AuthenticationManager</span> <span class="p">{</span>
    <span class="k">private</span> <span class="nx">timeToLive</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="k">private</span> <span class="nx">map</span><span class="p">:</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="kr">number</span><span class="o">&gt;</span><span class="p">;</span>

    <span class="kd">constructor</span><span class="p">(</span><span class="nx">timeToLive</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">timeToLive</span> <span class="o">=</span> <span class="nx">timeToLive</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="kr">number</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nx">generate</span><span class="p">(</span><span class="nx">tokenId</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">currentTime</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">tokenId</span><span class="p">,</span> <span class="nx">currentTime</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeToLive</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">renew</span><span class="p">(</span><span class="nx">tokenId</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">currentTime</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">tokenId</span><span class="p">)</span> <span class="o">??</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nx">currentTime</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">tokenId</span><span class="p">,</span> <span class="nx">currentTime</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeToLive</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">countUnexpiredTokens</span><span class="p">(</span><span class="nx">currentTime</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">time</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">.</span><span class="nx">values</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&gt;</span> <span class="nx">currentTime</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">res</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**
 * Your AuthenticationManager object will be instantiated and called as such:
 * var obj = new AuthenticationManager(timeToLive)
 * obj.generate(tokenId,currentTime)
 * obj.renew(tokenId,currentTime)
 * var param_3 = obj.countUnexpiredTokens(currentTime)
 */</span>

</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-rs highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">AuthenticationManager</span> <span class="p">{</span>
    <span class="n">time_to_live</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span>
    <span class="n">map</span><span class="p">:</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nb">i32</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>

<span class="cd">/**
 * `&amp;self` means the method takes an immutable reference.
 * If you need a mutable reference, change it to `&amp;mut self` instead.
 */</span>
<span class="k">impl</span> <span class="n">AuthenticationManager</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">timeToLive</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="k">Self</span> <span class="p">{</span>
        <span class="k">Self</span> <span class="p">{</span>
            <span class="n">time_to_live</span><span class="p">:</span> <span class="n">timeToLive</span><span class="p">,</span>
            <span class="n">map</span><span class="p">:</span> <span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">(),</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">fn</span> <span class="nf">generate</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">,</span> <span class="n">token_id</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">current_time</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.map</span><span class="nf">.insert</span><span class="p">(</span><span class="n">token_id</span><span class="p">,</span> <span class="n">current_time</span> <span class="o">+</span> <span class="k">self</span><span class="py">.time_to_live</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">fn</span> <span class="nf">renew</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">,</span> <span class="n">token_id</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">current_time</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">self</span><span class="py">.map</span><span class="nf">.get</span><span class="p">(</span><span class="o">&amp;</span><span class="n">token_id</span><span class="p">)</span><span class="nf">.unwrap_or</span><span class="p">(</span><span class="o">&amp;</span><span class="mi">0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="o">&amp;</span><span class="n">current_time</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">self</span><span class="py">.map</span><span class="nf">.insert</span><span class="p">(</span><span class="n">token_id</span><span class="p">,</span> <span class="n">current_time</span> <span class="o">+</span> <span class="k">self</span><span class="py">.time_to_live</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">fn</span> <span class="nf">count_unexpired_tokens</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">,</span> <span class="n">current_time</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.map</span>
            <span class="nf">.values</span><span class="p">()</span>
            <span class="nf">.filter</span><span class="p">(|</span><span class="o">&amp;</span><span class="n">time</span><span class="p">|</span> <span class="o">*</span><span class="n">time</span> <span class="o">&gt;</span> <span class="n">current_time</span><span class="p">)</span>
            <span class="nf">.count</span><span class="p">()</span> <span class="k">as</span> <span class="nb">i32</span>
    <span class="p">}</span>
<span class="p">}</span><span class="cd">/**
 * Your AuthenticationManager object will be instantiated and called as such:
 * let obj = AuthenticationManager::new(timeToLive);
 * obj.generate(tokenId, currentTime);
 * obj.renew(tokenId, currentTime);
 * let ret_3: i32 = obj.count_unexpired_tokens(currentTime);
 */</span>

</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-1797.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
