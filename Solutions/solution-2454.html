<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-2454.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-2454.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>2454 - Next Greater Element IV</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode 2454. Next Greater Element IV Description You are given a 0-indexed array of non-negative integers nums. For each integer in nums, you must find its respective second greater integer. The second greater integer of nums[i] is nums[j] such that: j &amp;gt; i nums[j] &amp;gt; nums[i]...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-2454.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-2454.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-2454.html" rel="stylesheet"/>
   <link href="solution-2454.html" rel="stylesheet"/>
   <link href="solution-2454.html" rel="stylesheet"/>
   <link href="solution-2454.html" rel="stylesheet"/>
   <link href="solution-2454.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="2454 - Next Greater Element IV" property="og:title"/>
   <meta content="Leetcode 2454. Next Greater Element IV Description You are given a 0-indexed array of non-negative integers nums. For each integer in nums, you must find its respective second greater integer. The second greater integer of nums[i] is nums[j] such that: j &amp;gt; i nums[j] &amp;gt; nums[i] There exists exactly one index k such that nums[k] &amp;gt; nums[i] and i &amp;lt; k &amp;lt; j. If there is no such nums[j], the second greater integer is considered to be -1. For example, in the array [1, 2, 4, 3], the second greater integer of 1 is 4, 2 is 3,&amp;nbsp;and that of 3 and 4 is -1. Return an integer array answer, where answer[i] is the second greater integer of nums[i]. &amp;nbsp; Example 1: Input: nums = [2,4,0,9,6] Output: [9,6,6,-1,-1] Explanation: 0th index: 4 is the first integer greater than 2, and 9 is the second integer greater than 2, to the right of 2. 1st index: 9 is the first, and 6 is the second integer greater than 4, to the right of 4. 2nd index: 9 is the first, and 6 is the second integer greater than 0, to the right of 0. 3rd index: There is no integer greater than 9 to its right, so the second greater integer is considered to be -1. 4th index: There is no integer greater than 6 to its right, so the second greater integer is considered to be -1. Thus, we return [9,6,6,-1,-1]. Example 2: Input: nums = [3,3] Output: [-1,-1] Explanation: We return [-1,-1] since neither integer has any integer greater than it. &amp;nbsp; Constraints: 1 &amp;lt;= nums.length &amp;lt;= 105 0 &amp;lt;= nums[i] &amp;lt;= 109 Solutions Solution 1: Sorting + Ordered Set We can convert the elements in the array into pairs $(x, i)$, where $x$ is the value of the element and $i$ is the index of the element. Then sort by the value of the elements in descending order. Next, we traverse the sorted array, maintaining an ordered set that stores the indices of the elements. When we traverse to the element $(x, i)$, the indices of all elements greater than $x$ are already in the ordered set. We only need to find the index $j$ of the next element after $i$ in the ordered set, then the element corresponding to $j$ is the second largest element of $x$. Then, we add $i$ to the ordered set. Continue to traverse the next element. The time complexity is $O(n \times \log n)$, and the space complexity is $O(n)$. Here, $n$ is the length of the array. Java C++ Python TypeScript class Solution { public int[] secondGreaterElement(int[] nums) { int n = nums.length; int[] ans = new int[n]; Arrays.fill(ans, -1); int[][] arr = new int[n][0]; for (int i = 0; i &amp;lt; n; ++i) { arr[i] = new int[] {nums[i], i}; } Arrays.sort(arr, (a, b) -&amp;gt; a[0] == b[0] ? a[1] - b[1] : b[0] - a[0]); TreeSet&amp;lt;Integer&amp;gt; ts = new TreeSet&amp;lt;&amp;gt;(); for (int[] pair : arr)..." property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2022-08-19T00:00:00-07:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2022-08-19-2454-Next-Greater-Element-IV/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-2454.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="2454 - Next Greater Element IV" property="twitter:title"/>
   <meta content="Leetcode 2454. Next Greater Element IV Description You are given a 0-indexed array of non-negative integers nums. For each integer in nums, you must find its respective second greater integer. The second greater integer of nums[i] is nums[j] such that: j &amp;gt; i nums[j] &amp;gt; nums[i] There exists exactly one index k such that nums[k] &amp;gt; nums[i] and i &amp;lt; k &amp;lt; j. If there is no such nums[j], the second greater integer is considered to be -1. For example, in the array [1, 2, 4, 3], the second greater integer of 1 is 4, 2 is 3,&amp;nbsp;and that of 3 and 4 is -1. Return an integer array answer, where answer[i] is the second greater integer of nums[i]. &amp;nbsp; Example 1: Input: nums = [2,4,0,9,6] Output: [9,6,6,-1,-1] Explanation: 0th index: 4 is the first integer greater than 2, and 9 is the second integer greater than 2, to the right of 2. 1st index: 9 is the first, and 6 is the second integer greater than 4, to the right of 4. 2nd index: 9 is the first, and 6 is the second integer greater than 0, to the right of 0. 3rd index: There is no integer greater than 9 to its right, so the second greater integer is considered to be -1. 4th index: There is no integer greater than 6 to its right, so the second greater integer is considered to be -1. Thus, we return [9,6,6,-1,-1]. Example 2: Input: nums = [3,3] Output: [-1,-1] Explanation: We return [-1,-1] since neither integer has any integer greater than it. &amp;nbsp; Constraints: 1 &amp;lt;= nums.length &amp;lt;= 105 0 &amp;lt;= nums[i] &amp;lt;= 109 Solutions Solution 1: Sorting + Ordered Set We can convert the elements in the array into pairs $(x, i)$, where $x$ is the value of the element and $i$ is the index of the element. Then sort by the value of the elements in descending order. Next, we traverse the sorted array, maintaining an ordered set that stores the indices of the elements. When we traverse to the element $(x, i)$, the indices of all elements greater than $x$ are already in the ordered set. We only need to find the index $j$ of the next element after $i$ in the ordered set, then the element corresponding to $j$ is the second largest element of $x$. Then, we add $i$ to the ordered set. Continue to traverse the next element. The time complexity is $O(n \times \log n)$, and the space complexity is $O(n)$. Here, $n$ is the length of the array. Java C++ Python TypeScript class Solution { public int[] secondGreaterElement(int[] nums) { int n = nums.length; int[] ans = new int[n]; Arrays.fill(ans, -1); int[][] arr = new int[n][0]; for (int i = 0; i &amp;lt; n; ++i) { arr[i] = new int[] {nums[i], i}; } Arrays.sort(arr, (a, b) -&amp;gt; a[0] == b[0] ? a[1] - b[1] : b[0] - a[0]); TreeSet&amp;lt;Integer&amp;gt; ts = new TreeSet&amp;lt;&amp;gt;(); for (int[] pair : arr)..." property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    2454 - Next Greater Element IV | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="2454 - Next Greater Element IV" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-2454.html" rel="canonical">
          <meta content="https://leetcode.ca/2022-08-19-2454-Next-Greater-Element-IV/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2022-08-19T00:00:00-07:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"2454 - Next Greater Element IV","dateModified":"2022-08-19T00:00:00-07:00","datePublished":"2022-08-19T00:00:00-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2022-08-19-2454-Next-Greater-Element-IV/"},"url":"https://leetcode.ca/2022-08-19-2454-Next-Greater-Element-IV/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <h1 id="2454-next-greater-element-iv">
       <a href="solution-2454.html">
        2454. Next Greater Element IV
       </a>
      </h1>
      <h2 id="description">
       Description
      </h2>
      <p>
       You are given a
       <strong>
        0-indexed
       </strong>
       array of non-negative integers
       <code>
        nums
       </code>
       . For each integer in
       <code>
        nums
       </code>
       , you must find its respective
       <strong>
        second greater
       </strong>
       integer.
      </p>
      <p>
       The
       <strong>
        second greater
       </strong>
       integer of
       <code>
        nums[i]
       </code>
       is
       <code>
        nums[j]
       </code>
       such that:
      </p>
      <ul>
       <li>
        <code>
         j &gt; i
        </code>
       </li>
       <li>
        <code>
         nums[j] &gt; nums[i]
        </code>
       </li>
       <li>
        There exists
        <strong>
         exactly one
        </strong>
        index
        <code>
         k
        </code>
        such that
        <code>
         nums[k] &gt; nums[i]
        </code>
        and
        <code>
         i &lt; k &lt; j
        </code>
        .
       </li>
      </ul>
      <p>
       If there is no such
       <code>
        nums[j]
       </code>
       , the second greater integer is considered to be
       <code>
        -1
       </code>
       .
      </p>
      <ul>
       <li>
        For example, in the array
        <code>
         [1, 2, 4, 3]
        </code>
        , the second greater integer of
        <code>
         1
        </code>
        is
        <code>
         4
        </code>
        ,
        <code>
         2
        </code>
        is
        <code>
         3
        </code>
        ,Â and that of
        <code>
         3
        </code>
        and
        <code>
         4
        </code>
        is
        <code>
         -1
        </code>
        .
       </li>
      </ul>
      <p>
       Return
       <em>
        an integer array
       </em>
       <code>
        answer
       </code>
       <em>
        , where
       </em>
       <code>
        answer[i]
       </code>
       <em>
        is the second greater integer of
       </em>
       <code>
        nums[i]
       </code>
       <em>
        .
       </em>
      </p>
      <p>
      </p>
      <p>
       <strong class="example">
        Example 1:
       </strong>
      </p>
      <pre>
<strong>Input:</strong> nums = [2,4,0,9,6]
<strong>Output:</strong> [9,6,6,-1,-1]
<strong>Explanation:</strong>
0th index: 4 is the first integer greater than 2, and 9 is the second integer greater than 2, to the right of 2.
1st index: 9 is the first, and 6 is the second integer greater than 4, to the right of 4.
2nd index: 9 is the first, and 6 is the second integer greater than 0, to the right of 0.
3rd index: There is no integer greater than 9 to its right, so the second greater integer is considered to be -1.
4th index: There is no integer greater than 6 to its right, so the second greater integer is considered to be -1.
Thus, we return [9,6,6,-1,-1].
</pre>
      <p>
       <strong class="example">
        Example 2:
       </strong>
      </p>
      <pre>
<strong>Input:</strong> nums = [3,3]
<strong>Output:</strong> [-1,-1]
<strong>Explanation:</strong>
We return [-1,-1] since neither integer has any integer greater than it.
</pre>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         1 &lt;= nums.length &lt;= 10
         <sup>
          5
         </sup>
        </code>
       </li>
       <li>
        <code>
         0 &lt;= nums[i] &lt;= 10
         <sup>
          9
         </sup>
        </code>
       </li>
      </ul>
      <h2 id="solutions">
       Solutions
      </h2>
      <p>
       <strong>
        Solution 1: Sorting + Ordered Set
       </strong>
      </p>
      <p>
       We can convert the elements in the array into pairs $(x, i)$, where $x$ is the value of the element and $i$ is the index of the element. Then sort by the value of the elements in descending order.
      </p>
      <p>
       Next, we traverse the sorted array, maintaining an ordered set that stores the indices of the elements. When we traverse to the element $(x, i)$, the indices of all elements greater than $x$ are already in the ordered set. We only need to find the index $j$ of the next element after $i$ in the ordered set, then the element corresponding to $j$ is the second largest element of $x$. Then, we add $i$ to the ordered set. Continue to traverse the next element.
      </p>
      <p>
       The time complexity is $O(n \times \log n)$, and the space complexity is $O(n)$. Here, $n$ is the length of the array.
      </p>
      <ul class="uk-tab" data-uk-switcher="{connect:'#a698d9c9-a00f-4449-a31d-08e29a237935'}">
       <li class="uk-active">
        <a href="solution-2454.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-2454.html">
         C++
        </a>
       </li>
       <li>
        <a href="solution-2454.html">
         Python
        </a>
       </li>
       <li>
        <a href="solution-2454.html">
         TypeScript
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="a698d9c9-a00f-4449-a31d-08e29a237935">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">secondGreaterElement</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">ans</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="nc">Arrays</span><span class="o">.</span><span class="na">fill</span><span class="o">(</span><span class="n">ans</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span>
        <span class="kt">int</span><span class="o">[][]</span> <span class="n">arr</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">n</span><span class="o">][</span><span class="mi">0</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">arr</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span><span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">i</span><span class="o">};</span>
        <span class="o">}</span>
        <span class="nc">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">arr</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">==</span> <span class="n">b</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">?</span> <span class="n">a</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">-</span> <span class="n">b</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">:</span> <span class="n">b</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">-</span> <span class="n">a</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
        <span class="nc">TreeSet</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">ts</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeSet</span><span class="o">&lt;&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">pair</span> <span class="o">:</span> <span class="n">arr</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">pair</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
            <span class="nc">Integer</span> <span class="n">j</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="na">higher</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">j</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">ts</span><span class="o">.</span><span class="na">higher</span><span class="o">(</span><span class="n">j</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">ans</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">ts</span><span class="o">.</span><span class="na">higher</span><span class="o">(</span><span class="n">j</span><span class="o">)];</span>
            <span class="o">}</span>
            <span class="n">ts</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">ans</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-cpp highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">secondGreaterElement</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ans</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">arr</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="o">-</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">i</span><span class="p">};</span>
        <span class="p">}</span>
        <span class="n">sort</span><span class="p">(</span><span class="n">arr</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">arr</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="n">set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ts</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="p">[</span><span class="n">_</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">:</span> <span class="n">arr</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">ts</span><span class="p">.</span><span class="n">upper_bound</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">it</span> <span class="o">!=</span> <span class="n">ts</span><span class="p">.</span><span class="n">end</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">ts</span><span class="p">.</span><span class="n">upper_bound</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">)</span> <span class="o">!=</span> <span class="n">ts</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="o">*</span><span class="n">ts</span><span class="p">.</span><span class="n">upper_bound</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">)];</span>
            <span class="p">}</span>
            <span class="n">ts</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-py highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kn">from</span> <span class="nn">sortedcontainers</span> <span class="kn">import</span> <span class="n">SortedList</span>


<span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">secondGreaterElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nums</span><span class="p">)]</span>
        <span class="n">arr</span><span class="p">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">sl</span> <span class="o">=</span> <span class="n">SortedList</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">sl</span><span class="p">.</span><span class="n">bisect_right</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">sl</span><span class="p">):</span>
                <span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">sl</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]]</span>
            <span class="n">sl</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ans</span>

</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-ts highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">function</span> <span class="nx">secondGreaterElement</span><span class="p">(</span><span class="nx">nums</span><span class="p">:</span> <span class="kr">number</span><span class="p">[]):</span> <span class="kr">number</span><span class="p">[]</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">nums</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">arr</span><span class="p">:</span> <span class="kr">number</span><span class="p">[][]</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">arr</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nx">nums</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="nx">arr</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">?</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
    <span class="kd">const</span> <span class="nx">ans</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">n</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">ts</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TreeSet</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="p">[</span><span class="nx">_</span><span class="p">,</span> <span class="nx">i</span><span class="p">]</span> <span class="k">of</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">ts</span><span class="p">.</span><span class="nx">higher</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">j</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">j</span> <span class="o">=</span> <span class="nx">ts</span><span class="p">.</span><span class="nx">higher</span><span class="p">(</span><span class="nx">j</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">j</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">ans</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">nums</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">ts</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">ans</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">Compare</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span><span class="nx">lhs</span><span class="p">:</span> <span class="nx">T</span><span class="p">,</span> <span class="nx">rhs</span><span class="p">:</span> <span class="nx">T</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kr">number</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span> <span class="o">=</span> <span class="kr">number</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="na">data</span><span class="p">:</span> <span class="nx">T</span><span class="p">;</span>
    <span class="nl">count</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">left</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">|</span> <span class="kc">null</span><span class="p">;</span>
    <span class="nl">right</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">|</span> <span class="kc">null</span><span class="p">;</span>
    <span class="nl">parent</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">|</span> <span class="kc">null</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="na">data</span><span class="p">:</span> <span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">right</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">count</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">sibling</span><span class="p">():</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">|</span> <span class="kc">null</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// sibling null if no parent</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">isOnLeft</span><span class="p">()</span> <span class="p">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">right</span> <span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">isOnLeft</span><span class="p">():</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="o">!</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">hasRedChild</span><span class="p">():</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="nb">Boolean</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">left</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">left</span><span class="p">.</span><span class="nx">color</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span>
            <span class="nb">Boolean</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">right</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">right</span><span class="p">.</span><span class="nx">color</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">RBTree</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="na">root</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">|</span> <span class="kc">null</span><span class="p">;</span>
    <span class="nl">lt</span><span class="p">:</span> <span class="p">(</span><span class="na">l</span><span class="p">:</span> <span class="nx">T</span><span class="p">,</span> <span class="na">r</span><span class="p">:</span> <span class="nx">T</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">boolean</span><span class="p">;</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="na">compare</span><span class="p">:</span> <span class="nx">Compare</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span><span class="na">l</span><span class="p">:</span> <span class="nx">T</span><span class="p">,</span> <span class="na">r</span><span class="p">:</span> <span class="nx">T</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">l</span> <span class="o">&lt;</span> <span class="nx">r</span> <span class="p">?</span> <span class="o">-</span><span class="mi">1</span> <span class="p">:</span> <span class="nx">l</span> <span class="o">&gt;</span> <span class="nx">r</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">root</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">lt</span> <span class="o">=</span> <span class="p">(</span><span class="na">l</span><span class="p">:</span> <span class="nx">T</span><span class="p">,</span> <span class="na">r</span><span class="p">:</span> <span class="nx">T</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">compare</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">rotateLeft</span><span class="p">(</span><span class="na">pt</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">right</span> <span class="o">=</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">right</span><span class="o">!</span><span class="p">;</span>
        <span class="nx">pt</span><span class="p">.</span><span class="nx">right</span> <span class="o">=</span> <span class="nx">right</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">pt</span><span class="p">.</span><span class="nx">right</span><span class="p">)</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">right</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">pt</span><span class="p">;</span>
        <span class="nx">right</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">root</span> <span class="o">=</span> <span class="nx">right</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">pt</span> <span class="o">===</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">right</span><span class="p">;</span>
        <span class="k">else</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">right</span> <span class="o">=</span> <span class="nx">right</span><span class="p">;</span>

        <span class="nx">right</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">pt</span><span class="p">;</span>
        <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">right</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">rotateRight</span><span class="p">(</span><span class="na">pt</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">left</span> <span class="o">=</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">left</span><span class="o">!</span><span class="p">;</span>
        <span class="nx">pt</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">left</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">pt</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">left</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">pt</span><span class="p">;</span>
        <span class="nx">left</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">root</span> <span class="o">=</span> <span class="nx">left</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">pt</span> <span class="o">===</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">left</span><span class="p">;</span>
        <span class="k">else</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">right</span> <span class="o">=</span> <span class="nx">left</span><span class="p">;</span>

        <span class="nx">left</span><span class="p">.</span><span class="nx">right</span> <span class="o">=</span> <span class="nx">pt</span><span class="p">;</span>
        <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">left</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">swapColor</span><span class="p">(</span><span class="na">p1</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">,</span> <span class="na">p2</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
        <span class="nx">p1</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
        <span class="nx">p2</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">swapData</span><span class="p">(</span><span class="na">p1</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">,</span> <span class="na">p2</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="nx">p1</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="nx">p2</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">fixAfterInsert</span><span class="p">(</span><span class="na">pt</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">parent</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">grandParent</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

        <span class="k">while</span> <span class="p">(</span><span class="nx">pt</span> <span class="o">!==</span> <span class="k">this</span><span class="p">.</span><span class="nx">root</span> <span class="o">&amp;&amp;</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">color</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">?.</span><span class="nx">color</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">parent</span> <span class="o">=</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
            <span class="nx">grandParent</span> <span class="o">=</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>

            <span class="cm">/*  Case : A
                Parent of pt is left child of Grand-parent of pt */</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span> <span class="o">===</span> <span class="nx">grandParent</span><span class="p">?.</span><span class="nx">left</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">const</span> <span class="nx">uncle</span> <span class="o">=</span> <span class="nx">grandParent</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>

                <span class="cm">/* Case : 1
                   The uncle of pt is also red
                   Only Recoloring required */</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">uncle</span> <span class="o">&amp;&amp;</span> <span class="nx">uncle</span><span class="p">.</span><span class="nx">color</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">grandParent</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nx">parent</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="nx">uncle</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="nx">pt</span> <span class="o">=</span> <span class="nx">grandParent</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="cm">/* Case : 2
                       pt is right child of its parent
                       Left-rotation required */</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">pt</span> <span class="o">===</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">rotateLeft</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>
                        <span class="nx">pt</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
                        <span class="nx">parent</span> <span class="o">=</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
                    <span class="p">}</span>

                    <span class="cm">/* Case : 3
                       pt is left child of its parent
                       Right-rotation required */</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">rotateRight</span><span class="p">(</span><span class="nx">grandParent</span><span class="p">);</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">swapColor</span><span class="p">(</span><span class="nx">parent</span><span class="o">!</span><span class="p">,</span> <span class="nx">grandParent</span><span class="p">);</span>
                    <span class="nx">pt</span> <span class="o">=</span> <span class="nx">parent</span><span class="o">!</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="cm">/* Case : B
               Parent of pt is right child of Grand-parent of pt */</span>
                <span class="kd">const</span> <span class="nx">uncle</span> <span class="o">=</span> <span class="nx">grandParent</span><span class="o">!</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>

                <span class="cm">/*  Case : 1
                    The uncle of pt is also red
                    Only Recoloring required */</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">uncle</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">uncle</span><span class="p">.</span><span class="nx">color</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">grandParent</span><span class="o">!</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nx">parent</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="nx">uncle</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="nx">pt</span> <span class="o">=</span> <span class="nx">grandParent</span><span class="o">!</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="cm">/* Case : 2
                       pt is left child of its parent
                       Right-rotation required */</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">pt</span> <span class="o">===</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">rotateRight</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>
                        <span class="nx">pt</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
                        <span class="nx">parent</span> <span class="o">=</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
                    <span class="p">}</span>

                    <span class="cm">/* Case : 3
                       pt is right child of its parent
                       Left-rotation required */</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">rotateLeft</span><span class="p">(</span><span class="nx">grandParent</span><span class="o">!</span><span class="p">);</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">swapColor</span><span class="p">(</span><span class="nx">parent</span><span class="o">!</span><span class="p">,</span> <span class="nx">grandParent</span><span class="o">!</span><span class="p">);</span>
                    <span class="nx">pt</span> <span class="o">=</span> <span class="nx">parent</span><span class="o">!</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">root</span><span class="o">!</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">delete</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">node</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">node</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">count</span><span class="o">--</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">node</span><span class="p">.</span><span class="nx">count</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">deleteNode</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">deleteAll</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">node</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">node</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">deleteNode</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">deleteNode</span><span class="p">(</span><span class="na">v</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">u</span> <span class="o">=</span> <span class="nx">BSTreplace</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>

        <span class="c1">// True when u and v are both black</span>
        <span class="kd">const</span> <span class="nx">uvBlack</span> <span class="o">=</span> <span class="p">(</span><span class="nx">u</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">u</span><span class="p">.</span><span class="nx">color</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">v</span><span class="p">.</span><span class="nx">color</span> <span class="o">===</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">parent</span><span class="o">!</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">u</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// u is null therefore v is leaf</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">root</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">root</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="c1">// v is root, making root null</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">uvBlack</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// u and v both black</span>
                    <span class="c1">// v is leaf, fix double black at v</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">fixDoubleBlack</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="c1">// u or v is red</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">sibling</span><span class="p">())</span> <span class="p">{</span>
                        <span class="c1">// sibling is not null, make it red"</span>
                        <span class="nx">v</span><span class="p">.</span><span class="nx">sibling</span><span class="p">()</span><span class="o">!</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="c1">// delete v from the tree</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">isOnLeft</span><span class="p">())</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">else</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">right</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">v</span><span class="p">.</span><span class="nx">left</span> <span class="o">||</span> <span class="o">!</span><span class="nx">v</span><span class="p">.</span><span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// v has 1 child</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">root</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// v is root, assign the value of u to v, and delete u</span>
                <span class="nx">v</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">u</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
                <span class="nx">v</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">right</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="c1">// Detach v from tree and move u up</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">isOnLeft</span><span class="p">())</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">u</span><span class="p">;</span>
                <span class="k">else</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">right</span> <span class="o">=</span> <span class="nx">u</span><span class="p">;</span>
                <span class="nx">u</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">uvBlack</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">fixDoubleBlack</span><span class="p">(</span><span class="nx">u</span><span class="p">);</span>
                <span class="c1">// u and v both black, fix double black at u</span>
                <span class="k">else</span> <span class="nx">u</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// u or v red, color u black</span>
            <span class="p">}</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// v has 2 children, swap data with successor and recurse</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">swapData</span><span class="p">(</span><span class="nx">u</span><span class="p">,</span> <span class="nx">v</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">deleteNode</span><span class="p">(</span><span class="nx">u</span><span class="p">);</span>

        <span class="c1">// find node that replaces a deleted node in BST</span>
        <span class="kd">function</span> <span class="nx">BSTreplace</span><span class="p">(</span><span class="na">x</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">):</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">|</span> <span class="kc">null</span> <span class="p">{</span>
            <span class="c1">// when node have 2 children</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">left</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span><span class="p">.</span><span class="nx">right</span><span class="p">)</span> <span class="k">return</span> <span class="nx">successor</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">right</span><span class="p">);</span>
            <span class="c1">// when leaf</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">x</span><span class="p">.</span><span class="nx">left</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">x</span><span class="p">.</span><span class="nx">right</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
            <span class="c1">// when single child</span>
            <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">left</span> <span class="o">??</span> <span class="nx">x</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// find node that do not have a left child</span>
        <span class="c1">// in the subtree of the given node</span>
        <span class="kd">function</span> <span class="nx">successor</span><span class="p">(</span><span class="na">x</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">):</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">temp</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">temp</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">fixDoubleBlack</span><span class="p">(</span><span class="na">x</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">root</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// Reached root</span>

        <span class="kd">const</span> <span class="nx">sibling</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">sibling</span><span class="p">();</span>
        <span class="kd">const</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">parent</span><span class="o">!</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">sibling</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// No sibiling, double black pushed up</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">fixDoubleBlack</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">color</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// Sibling red</span>
                <span class="nx">parent</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nx">sibling</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">isOnLeft</span><span class="p">())</span> <span class="k">this</span><span class="p">.</span><span class="nx">rotateRight</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>
                <span class="c1">// left case</span>
                <span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">rotateLeft</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span> <span class="c1">// right case</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">fixDoubleBlack</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="c1">// Sibling black</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">hasRedChild</span><span class="p">())</span> <span class="p">{</span>
                    <span class="c1">// at least 1 red children</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">left</span> <span class="o">&amp;&amp;</span> <span class="nx">sibling</span><span class="p">.</span><span class="nx">left</span><span class="p">.</span><span class="nx">color</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">isOnLeft</span><span class="p">())</span> <span class="p">{</span>
                            <span class="c1">// left left</span>
                            <span class="nx">sibling</span><span class="p">.</span><span class="nx">left</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">sibling</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
                            <span class="nx">sibling</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">rotateRight</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="c1">// right left</span>
                            <span class="nx">sibling</span><span class="p">.</span><span class="nx">left</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">rotateRight</span><span class="p">(</span><span class="nx">sibling</span><span class="p">);</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">rotateLeft</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">isOnLeft</span><span class="p">())</span> <span class="p">{</span>
                            <span class="c1">// left right</span>
                            <span class="nx">sibling</span><span class="p">.</span><span class="nx">right</span><span class="o">!</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">rotateLeft</span><span class="p">(</span><span class="nx">sibling</span><span class="p">);</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">rotateRight</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="c1">// right right</span>
                            <span class="nx">sibling</span><span class="p">.</span><span class="nx">right</span><span class="o">!</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">sibling</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
                            <span class="nx">sibling</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">rotateLeft</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="nx">parent</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="c1">// 2 black children</span>
                    <span class="nx">sibling</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span><span class="p">.</span><span class="nx">color</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">fixDoubleBlack</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>
                    <span class="k">else</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">insert</span><span class="p">(</span><span class="na">data</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="c1">// search for a position to insert</span>
        <span class="kd">let</span> <span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">root</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lt</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">data</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">parent</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
                <span class="k">else</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lt</span><span class="p">(</span><span class="nx">parent</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">data</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">parent</span><span class="p">.</span><span class="nx">right</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
                <span class="k">else</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// insert node into parent</span>
        <span class="kd">const</span> <span class="nx">node</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RBTreeNode</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">parent</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">root</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lt</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">data</span><span class="p">))</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lt</span><span class="p">(</span><span class="nx">parent</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">data</span><span class="p">))</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">right</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">parent</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span><span class="p">;</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">fixAfterInsert</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">find</span><span class="p">(</span><span class="na">data</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">|</span> <span class="kc">null</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">root</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lt</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lt</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">data</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">p</span> <span class="o">??</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">*</span><span class="nx">inOrder</span><span class="p">(</span><span class="na">root</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">root</span><span class="o">!</span><span class="p">):</span> <span class="nx">Generator</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">root</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">v</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">inOrder</span><span class="p">(</span><span class="nx">root</span><span class="p">.</span><span class="nx">left</span><span class="o">!</span><span class="p">))</span> <span class="k">yield</span> <span class="nx">v</span><span class="p">;</span>
        <span class="k">yield</span> <span class="nx">root</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">v</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">inOrder</span><span class="p">(</span><span class="nx">root</span><span class="p">.</span><span class="nx">right</span><span class="o">!</span><span class="p">))</span> <span class="k">yield</span> <span class="nx">v</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">*</span><span class="nx">reverseInOrder</span><span class="p">(</span><span class="na">root</span><span class="p">:</span> <span class="nx">RBTreeNode</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">root</span><span class="o">!</span><span class="p">):</span> <span class="nx">Generator</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">root</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">v</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">reverseInOrder</span><span class="p">(</span><span class="nx">root</span><span class="p">.</span><span class="nx">right</span><span class="o">!</span><span class="p">))</span> <span class="k">yield</span> <span class="nx">v</span><span class="p">;</span>
        <span class="k">yield</span> <span class="nx">root</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">v</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">reverseInOrder</span><span class="p">(</span><span class="nx">root</span><span class="p">.</span><span class="nx">left</span><span class="o">!</span><span class="p">))</span> <span class="k">yield</span> <span class="nx">v</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">TreeSet</span><span class="o">&lt;</span><span class="nx">T</span> <span class="o">=</span> <span class="kr">number</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="na">_size</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">tree</span><span class="p">:</span> <span class="nx">RBTree</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="nl">compare</span><span class="p">:</span> <span class="nx">Compare</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="kd">constructor</span><span class="p">(</span>
        <span class="na">collection</span><span class="p">:</span> <span class="nx">T</span><span class="p">[]</span> <span class="o">|</span> <span class="nx">Compare</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="na">compare</span><span class="p">:</span> <span class="nx">Compare</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span><span class="na">l</span><span class="p">:</span> <span class="nx">T</span><span class="p">,</span> <span class="na">r</span><span class="p">:</span> <span class="nx">T</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">l</span> <span class="o">&lt;</span> <span class="nx">r</span> <span class="p">?</span> <span class="o">-</span><span class="mi">1</span> <span class="p">:</span> <span class="nx">l</span> <span class="o">&gt;</span> <span class="nx">r</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">collection</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">function</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">compare</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">;</span>
            <span class="nx">collection</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">compare</span> <span class="o">=</span> <span class="nx">compare</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">tree</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RBTree</span><span class="p">(</span><span class="nx">compare</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">val</span> <span class="k">of</span> <span class="nx">collection</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">size</span><span class="p">():</span> <span class="kr">number</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_size</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">has</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!!</span><span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">add</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">successful</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_size</span> <span class="o">+=</span> <span class="nx">successful</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">successful</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">delete</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">deleted</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">deleteAll</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_size</span> <span class="o">-=</span> <span class="nx">deleted</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">deleted</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">ceil</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">root</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">higher</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">higher</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">higher</span><span class="p">?.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">floor</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">root</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">lower</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">lower</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">lower</span><span class="p">?.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">higher</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">root</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">higher</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">higher</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">higher</span><span class="p">?.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">lower</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">root</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">lower</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">lower</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">lower</span><span class="p">?.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">first</span><span class="p">():</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">inOrder</span><span class="p">().</span><span class="nx">next</span><span class="p">().</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">last</span><span class="p">():</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">reverseInOrder</span><span class="p">().</span><span class="nx">next</span><span class="p">().</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">shift</span><span class="p">():</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">first</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">first</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">first</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">first</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">first</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">pop</span><span class="p">():</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">last</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">last</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">last</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">last</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">last</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">*</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]():</span> <span class="nx">Generator</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="k">void</span><span class="p">,</span> <span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">val</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">values</span><span class="p">())</span> <span class="k">yield</span> <span class="nx">val</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">*</span><span class="nx">keys</span><span class="p">():</span> <span class="nx">Generator</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="k">void</span><span class="p">,</span> <span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">val</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">values</span><span class="p">())</span> <span class="k">yield</span> <span class="nx">val</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">*</span><span class="nx">values</span><span class="p">():</span> <span class="nx">Generator</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">val</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">inOrder</span><span class="p">())</span> <span class="k">yield</span> <span class="nx">val</span><span class="p">;</span>
        <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**
     * Return a generator for reverse order traversing the set
     */</span>
    <span class="o">*</span><span class="nx">rvalues</span><span class="p">():</span> <span class="nx">Generator</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">val</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">reverseInOrder</span><span class="p">())</span> <span class="k">yield</span> <span class="nx">val</span><span class="p">;</span>
        <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">TreeMultiSet</span><span class="o">&lt;</span><span class="nx">T</span> <span class="o">=</span> <span class="kr">number</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="na">_size</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">tree</span><span class="p">:</span> <span class="nx">RBTree</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="nl">compare</span><span class="p">:</span> <span class="nx">Compare</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="kd">constructor</span><span class="p">(</span>
        <span class="na">collection</span><span class="p">:</span> <span class="nx">T</span><span class="p">[]</span> <span class="o">|</span> <span class="nx">Compare</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="na">compare</span><span class="p">:</span> <span class="nx">Compare</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span><span class="na">l</span><span class="p">:</span> <span class="nx">T</span><span class="p">,</span> <span class="na">r</span><span class="p">:</span> <span class="nx">T</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">l</span> <span class="o">&lt;</span> <span class="nx">r</span> <span class="p">?</span> <span class="o">-</span><span class="mi">1</span> <span class="p">:</span> <span class="nx">l</span> <span class="o">&gt;</span> <span class="nx">r</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">collection</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">function</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">compare</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">;</span>
            <span class="nx">collection</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">compare</span> <span class="o">=</span> <span class="nx">compare</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">tree</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RBTree</span><span class="p">(</span><span class="nx">compare</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">val</span> <span class="k">of</span> <span class="nx">collection</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">size</span><span class="p">():</span> <span class="kr">number</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_size</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">has</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!!</span><span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">add</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">successful</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_size</span><span class="o">++</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">successful</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">delete</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">successful</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">successful</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_size</span><span class="o">--</span><span class="p">;</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">count</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">node</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">node</span> <span class="p">?</span> <span class="nx">node</span><span class="p">.</span><span class="nx">count</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">ceil</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">root</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">higher</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">higher</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">higher</span><span class="p">?.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">floor</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">root</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">lower</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">lower</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">lower</span><span class="p">?.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">higher</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">root</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">higher</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">higher</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">higher</span><span class="p">?.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">lower</span><span class="p">(</span><span class="na">val</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">root</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">lower</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">lower</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">lower</span><span class="p">?.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">first</span><span class="p">():</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">inOrder</span><span class="p">().</span><span class="nx">next</span><span class="p">().</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">last</span><span class="p">():</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">reverseInOrder</span><span class="p">().</span><span class="nx">next</span><span class="p">().</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">shift</span><span class="p">():</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">first</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">first</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">first</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">first</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">first</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">pop</span><span class="p">():</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">last</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">last</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">last</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">last</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">last</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">*</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]():</span> <span class="nx">Generator</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="k">void</span><span class="p">,</span> <span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">yield</span><span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">values</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="o">*</span><span class="nx">keys</span><span class="p">():</span> <span class="nx">Generator</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="k">void</span><span class="p">,</span> <span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">val</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">values</span><span class="p">())</span> <span class="k">yield</span> <span class="nx">val</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">*</span><span class="nx">values</span><span class="p">():</span> <span class="nx">Generator</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">val</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">inOrder</span><span class="p">())</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">count</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">count</span><span class="o">--</span><span class="p">)</span> <span class="k">yield</span> <span class="nx">val</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**
     * Return a generator for reverse order traversing the multi-set
     */</span>
    <span class="o">*</span><span class="nx">rvalues</span><span class="p">():</span> <span class="nx">Generator</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">val</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">tree</span><span class="p">.</span><span class="nx">reverseInOrder</span><span class="p">())</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">count</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">count</span><span class="o">--</span><span class="p">)</span> <span class="k">yield</span> <span class="nx">val</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-2454.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
