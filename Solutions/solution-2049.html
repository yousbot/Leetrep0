<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-2049.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-2049.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>2049 - Count Nodes With the Highest Score</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode 2049. Count Nodes With the Highest Score Description There is a binary tree rooted at 0 consisting of n nodes. The nodes are labeled from 0 to n - 1. You are given a 0-indexed integer array parents representing the tree, where parents[i] is the...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-2049.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-2049.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-2049.html" rel="stylesheet"/>
   <link href="solution-2049.html" rel="stylesheet"/>
   <link href="solution-2049.html" rel="stylesheet"/>
   <link href="solution-2049.html" rel="stylesheet"/>
   <link href="solution-2049.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="2049 - Count Nodes With the Highest Score" property="og:title"/>
   <meta content="Leetcode 2049. Count Nodes With the Highest Score Description There is a binary tree rooted at 0 consisting of n nodes. The nodes are labeled from 0 to n - 1. You are given a 0-indexed integer array parents representing the tree, where parents[i] is the parent of node i. Since node 0 is the root, parents[0] == -1. Each node has a score. To find the score of a node, consider if the node and the edges connected to it were removed. The tree would become one or more non-empty subtrees. The size of a subtree is the number of the nodes in it. The score of the node is the product of the sizes of all those subtrees. Return the number of nodes that have the highest score. &amp;nbsp; Example 1: Input: parents = [-1,2,0,2,0] Output: 3 Explanation: - The score of node 0 is: 3 * 1 = 3 - The score of node 1 is: 4 = 4 - The score of node 2 is: 1 * 1 * 2 = 2 - The score of node 3 is: 4 = 4 - The score of node 4 is: 4 = 4 The highest score is 4, and three nodes (node 1, node 3, and node 4) have the highest score. Example 2: Input: parents = [-1,2,0] Output: 2 Explanation: - The score of node 0 is: 2 = 2 - The score of node 1 is: 2 = 2 - The score of node 2 is: 1 * 1 = 1 The highest score is 2, and two nodes (node 0 and node 1) have the highest score. &amp;nbsp; Constraints: n == parents.length 2 &amp;lt;= n &amp;lt;= 105 parents[0] == -1 0 &amp;lt;= parents[i] &amp;lt;= n - 1 for i != 0 parents represents a valid binary tree. Solutions Solution 1: DFS First, we construct a graph $g$ based on the given parent array parents, where $g[i]$ represents all child nodes of node $i$. We define a variable $ans$ to represent the number of nodes with the highest score, and a variable $mx$ to represent the highest score. Then, we design a function dfs(i, fa) to calculate the score of node $i$ and return the number of nodes in the subtree rooted at node $i$. The calculation process of the function dfs(i, fa) is as follows: We first initialize a variable $cnt = 1$, representing the number of nodes in the subtree rooted at node $i$; a variable $score = 1$, representing the initial score of node $i$. Next, we traverse all child nodes $j$ of node $i$. If $j$ is not the parent node $fa$ of node $i$, then we recursively call dfs(j, i), and multiply the return value into $score$, and add the return value to $cnt$. After traversing the child nodes, if $n - cnt &amp;gt; 0$, then we multiply $n - cnt$ into $score$. Then, we check whether $mx$ is less than $score$. If it is less,..." property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2021-07-10T00:00:00-07:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2021-07-10-2049-Count-Nodes-With-the-Highest-Score/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-2049.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="2049 - Count Nodes With the Highest Score" property="twitter:title"/>
   <meta content="Leetcode 2049. Count Nodes With the Highest Score Description There is a binary tree rooted at 0 consisting of n nodes. The nodes are labeled from 0 to n - 1. You are given a 0-indexed integer array parents representing the tree, where parents[i] is the parent of node i. Since node 0 is the root, parents[0] == -1. Each node has a score. To find the score of a node, consider if the node and the edges connected to it were removed. The tree would become one or more non-empty subtrees. The size of a subtree is the number of the nodes in it. The score of the node is the product of the sizes of all those subtrees. Return the number of nodes that have the highest score. &amp;nbsp; Example 1: Input: parents = [-1,2,0,2,0] Output: 3 Explanation: - The score of node 0 is: 3 * 1 = 3 - The score of node 1 is: 4 = 4 - The score of node 2 is: 1 * 1 * 2 = 2 - The score of node 3 is: 4 = 4 - The score of node 4 is: 4 = 4 The highest score is 4, and three nodes (node 1, node 3, and node 4) have the highest score. Example 2: Input: parents = [-1,2,0] Output: 2 Explanation: - The score of node 0 is: 2 = 2 - The score of node 1 is: 2 = 2 - The score of node 2 is: 1 * 1 = 1 The highest score is 2, and two nodes (node 0 and node 1) have the highest score. &amp;nbsp; Constraints: n == parents.length 2 &amp;lt;= n &amp;lt;= 105 parents[0] == -1 0 &amp;lt;= parents[i] &amp;lt;= n - 1 for i != 0 parents represents a valid binary tree. Solutions Solution 1: DFS First, we construct a graph $g$ based on the given parent array parents, where $g[i]$ represents all child nodes of node $i$. We define a variable $ans$ to represent the number of nodes with the highest score, and a variable $mx$ to represent the highest score. Then, we design a function dfs(i, fa) to calculate the score of node $i$ and return the number of nodes in the subtree rooted at node $i$. The calculation process of the function dfs(i, fa) is as follows: We first initialize a variable $cnt = 1$, representing the number of nodes in the subtree rooted at node $i$; a variable $score = 1$, representing the initial score of node $i$. Next, we traverse all child nodes $j$ of node $i$. If $j$ is not the parent node $fa$ of node $i$, then we recursively call dfs(j, i), and multiply the return value into $score$, and add the return value to $cnt$. After traversing the child nodes, if $n - cnt &amp;gt; 0$, then we multiply $n - cnt$ into $score$. Then, we check whether $mx$ is less than $score$. If it is less,..." property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    2049 - Count Nodes With the Highest Score | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="2049 - Count Nodes With the Highest Score" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-2049.html" rel="canonical">
          <meta content="https://leetcode.ca/2021-07-10-2049-Count-Nodes-With-the-Highest-Score/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2021-07-10T00:00:00-07:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"2049 - Count Nodes With the Highest Score","dateModified":"2021-07-10T00:00:00-07:00","datePublished":"2021-07-10T00:00:00-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2021-07-10-2049-Count-Nodes-With-the-Highest-Score/"},"url":"https://leetcode.ca/2021-07-10-2049-Count-Nodes-With-the-Highest-Score/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <h1 id="2049-count-nodes-with-the-highest-score">
       <a href="solution-2049.html">
        2049. Count Nodes With the Highest Score
       </a>
      </h1>
      <h2 id="description">
       Description
      </h2>
      <p>
       There is a
       <strong>
        binary
       </strong>
       tree rooted at
       <code>
        0
       </code>
       consisting of
       <code>
        n
       </code>
       nodes. The nodes are labeled from
       <code>
        0
       </code>
       to
       <code>
        n - 1
       </code>
       . You are given a
       <strong>
        0-indexed
       </strong>
       integer array
       <code>
        parents
       </code>
       representing the tree, where
       <code>
        parents[i]
       </code>
       is the parent of node
       <code>
        i
       </code>
       . Since node
       <code>
        0
       </code>
       is the root,
       <code>
        parents[0] == -1
       </code>
       .
      </p>
      <p>
       Each node has a
       <strong>
        score
       </strong>
       . To find the score of a node, consider if the node and the edges connected to it were
       <strong>
        removed
       </strong>
       . The tree would become one or more
       <strong>
        non-empty
       </strong>
       subtrees. The
       <strong>
        size
       </strong>
       of a subtree is the number of the nodes in it. The
       <strong>
        score
       </strong>
       of the node is the
       <strong>
        product of the sizes
       </strong>
       of all those subtrees.
      </p>
      <p>
       Return
       <em>
        the
        <strong>
         number
        </strong>
        of nodes that have the
        <strong>
         highest score
        </strong>
       </em>
       .
      </p>
      <p>
      </p>
      <p>
       <strong class="example">
        Example 1:
       </strong>
      </p>
      <p>
       <img alt="example-1" src="https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2000-2099/2049.Count%20Nodes%20With%20the%20Highest%20Score/images/example-1.png" style="width: 604px; height: 266px;"/>
      </p>
      <pre>
<strong>Input:</strong> parents = [-1,2,0,2,0]
<strong>Output:</strong> 3
<strong>Explanation:</strong>
- The score of node 0 is: 3 * 1 = 3
- The score of node 1 is: 4 = 4
- The score of node 2 is: 1 * 1 * 2 = 2
- The score of node 3 is: 4 = 4
- The score of node 4 is: 4 = 4
The highest score is 4, and three nodes (node 1, node 3, and node 4) have the highest score.
</pre>
      <p>
       <strong class="example">
        Example 2:
       </strong>
      </p>
      <p>
       <img alt="example-2" src="https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2000-2099/2049.Count%20Nodes%20With%20the%20Highest%20Score/images/example-2.png" style="width: 95px; height: 143px;"/>
      </p>
      <pre>
<strong>Input:</strong> parents = [-1,2,0]
<strong>Output:</strong> 2
<strong>Explanation:</strong>
- The score of node 0 is: 2 = 2
- The score of node 1 is: 2 = 2
- The score of node 2 is: 1 * 1 = 1
The highest score is 2, and two nodes (node 0 and node 1) have the highest score.
</pre>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         n == parents.length
        </code>
       </li>
       <li>
        <code>
         2 &lt;= n &lt;= 10
         <sup>
          5
         </sup>
        </code>
       </li>
       <li>
        <code>
         parents[0] == -1
        </code>
       </li>
       <li>
        <code>
         0 &lt;= parents[i] &lt;= n - 1
        </code>
        for
        <code>
         i != 0
        </code>
       </li>
       <li>
        <code>
         parents
        </code>
        represents a valid binary tree.
       </li>
      </ul>
      <h2 id="solutions">
       Solutions
      </h2>
      <p>
       <strong>
        Solution 1: DFS
       </strong>
      </p>
      <p>
       First, we construct a graph $g$ based on the given parent array
       <code class="language-plaintext highlighter-rouge">
        parents
       </code>
       , where $g[i]$ represents all child nodes of node $i$. We define a variable $ans$ to represent the number of nodes with the highest score, and a variable $mx$ to represent the highest score.
      </p>
      <p>
       Then, we design a function
       <code class="language-plaintext highlighter-rouge">
        dfs(i, fa)
       </code>
       to calculate the score of node $i$ and return the number of nodes in the subtree rooted at node $i$.
      </p>
      <p>
       The calculation process of the function
       <code class="language-plaintext highlighter-rouge">
        dfs(i, fa)
       </code>
       is as follows:
      </p>
      <p>
       We first initialize a variable $cnt = 1$, representing the number of nodes in the subtree rooted at node $i$; a variable $score = 1$, representing the initial score of node $i$.
      </p>
      <p>
       Next, we traverse all child nodes $j$ of node $i$. If $j$ is not the parent node $fa$ of node $i$, then we recursively call
       <code class="language-plaintext highlighter-rouge">
        dfs(j, i)
       </code>
       , and multiply the return value into $score$, and add the return value to $cnt$.
      </p>
      <p>
       After traversing the child nodes, if $n - cnt &gt; 0$, then we multiply $n - cnt$ into $score$.
      </p>
      <p>
       Then, we check whether $mx$ is less than $score$. If it is less, then we update $mx$ to $score$, and update $ans$ to $1$; if it is equal, then we update $ans$ to $ans + 1$.
      </p>
      <p>
       Finally, we return $cnt$.
      </p>
      <p>
       In the end, we call
       <code class="language-plaintext highlighter-rouge">
        dfs(0, -1)
       </code>
       and return $ans$.
      </p>
      <p>
       The time complexity is $O(n)$, and the space complexity is $O(n)$. Here, $n$ is the number of nodes.
      </p>
      <ul class="uk-tab" data-uk-switcher="{connect:'#fd296548-ea49-4bca-a043-f8fe221d23b2'}">
       <li class="uk-active">
        <a href="solution-2049.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-2049.html">
         C++
        </a>
       </li>
       <li>
        <a href="solution-2049.html">
         Python
        </a>
       </li>
       <li>
        <a href="solution-2049.html">
         Go
        </a>
       </li>
       <li>
        <a href="solution-2049.html">
         TypeScript
        </a>
       </li>
       <li>
        <a href="solution-2049.html">
         C#
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="fd296548-ea49-4bca-a043-f8fe221d23b2">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;[]</span> <span class="n">g</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">ans</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">mx</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">n</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">countHighestScoreNodes</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">parents</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">parents</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
        <span class="n">g</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">List</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="nc">Arrays</span><span class="o">.</span><span class="na">setAll</span><span class="o">(</span><span class="n">g</span><span class="o">,</span> <span class="n">i</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;());</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">g</span><span class="o">[</span><span class="n">parents</span><span class="o">[</span><span class="n">i</span><span class="o">]].</span><span class="na">add</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">dfs</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">ans</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="nf">dfs</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="kt">int</span> <span class="n">fa</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="kt">long</span> <span class="n">score</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">:</span> <span class="n">g</span><span class="o">[</span><span class="n">i</span><span class="o">])</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">j</span> <span class="o">!=</span> <span class="n">fa</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">t</span> <span class="o">=</span> <span class="n">dfs</span><span class="o">(</span><span class="n">j</span><span class="o">,</span> <span class="n">i</span><span class="o">);</span>
                <span class="n">cnt</span> <span class="o">+=</span> <span class="n">t</span><span class="o">;</span>
                <span class="n">score</span> <span class="o">*=</span> <span class="n">t</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">cnt</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">score</span> <span class="o">*=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">cnt</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">mx</span> <span class="o">&lt;</span> <span class="n">score</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">mx</span> <span class="o">=</span> <span class="n">score</span><span class="o">;</span>
            <span class="n">ans</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">mx</span> <span class="o">==</span> <span class="n">score</span><span class="o">)</span> <span class="o">{</span>
            <span class="o">++</span><span class="n">ans</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">cnt</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-cpp highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">int</span> <span class="n">countHighestScoreNodes</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">parents</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">parents</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">g</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">g</span><span class="p">[</span><span class="n">parents</span><span class="p">[</span><span class="n">i</span><span class="p">]].</span><span class="n">push_back</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">long</span> <span class="kt">long</span> <span class="n">mx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">function</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">dfs</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fa</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">long</span> <span class="kt">long</span> <span class="n">score</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">:</span> <span class="n">g</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="o">!=</span> <span class="n">fa</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">int</span> <span class="n">t</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
                    <span class="n">cnt</span> <span class="o">+=</span> <span class="n">t</span><span class="p">;</span>
                    <span class="n">score</span> <span class="o">*=</span> <span class="n">t</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">cnt</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">score</span> <span class="o">*=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">cnt</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">mx</span> <span class="o">&lt;</span> <span class="n">score</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">mx</span> <span class="o">=</span> <span class="n">score</span><span class="p">;</span>
                <span class="n">ans</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">mx</span> <span class="o">==</span> <span class="n">score</span><span class="p">)</span> <span class="p">{</span>
                <span class="o">++</span><span class="n">ans</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">cnt</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="n">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-py highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">countHighestScoreNodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">fa</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">cnt</span> <span class="o">=</span> <span class="n">score</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">g</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">j</span> <span class="o">!=</span> <span class="n">fa</span><span class="p">:</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                    <span class="n">score</span> <span class="o">*=</span> <span class="n">t</span>
                    <span class="n">cnt</span> <span class="o">+=</span> <span class="n">t</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">-</span> <span class="n">cnt</span><span class="p">:</span>
                <span class="n">score</span> <span class="o">*=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">cnt</span>
            <span class="k">nonlocal</span> <span class="n">ans</span><span class="p">,</span> <span class="n">mx</span>
            <span class="k">if</span> <span class="n">mx</span> <span class="o">&lt;</span> <span class="n">score</span><span class="p">:</span>
                <span class="n">mx</span> <span class="o">=</span> <span class="n">score</span>
                <span class="n">ans</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">mx</span> <span class="o">==</span> <span class="n">score</span><span class="p">:</span>
                <span class="n">ans</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">cnt</span>

        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parents</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
            <span class="n">g</span><span class="p">[</span><span class="n">parents</span><span class="p">[</span><span class="n">i</span><span class="p">]].</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="n">mx</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ans</span>

</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-go highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">func</span> <span class="n">countHighestScoreNodes</span><span class="p">(</span><span class="n">parents</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="n">ans</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">n</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parents</span><span class="p">)</span>
	<span class="n">g</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([][]</span><span class="kt">int</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="n">g</span><span class="p">[</span><span class="n">parents</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="n">parents</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">i</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="n">mx</span> <span class="o">:=</span> <span class="m">0</span>
	<span class="k">var</span> <span class="n">dfs</span> <span class="k">func</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">fa</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span>
	<span class="n">dfs</span> <span class="o">=</span> <span class="k">func</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">fa</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
		<span class="n">cnt</span><span class="p">,</span> <span class="n">score</span> <span class="o">:=</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span>
		<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">j</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">g</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">{</span>
			<span class="k">if</span> <span class="n">j</span> <span class="o">!=</span> <span class="n">fa</span> <span class="p">{</span>
				<span class="n">t</span> <span class="o">:=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
				<span class="n">cnt</span> <span class="o">+=</span> <span class="n">t</span>
				<span class="n">score</span> <span class="o">*=</span> <span class="n">t</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="n">n</span><span class="o">-</span><span class="n">cnt</span> <span class="o">&gt;</span> <span class="m">0</span> <span class="p">{</span>
			<span class="n">score</span> <span class="o">*=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">cnt</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="n">mx</span> <span class="o">&lt;</span> <span class="n">score</span> <span class="p">{</span>
			<span class="n">mx</span> <span class="o">=</span> <span class="n">score</span>
			<span class="n">ans</span> <span class="o">=</span> <span class="m">1</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">mx</span> <span class="o">==</span> <span class="n">score</span> <span class="p">{</span>
			<span class="n">ans</span><span class="o">++</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="n">cnt</span>
	<span class="p">}</span>
	<span class="n">dfs</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="o">-</span><span class="m">1</span><span class="p">)</span>
	<span class="k">return</span>
<span class="p">}</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-ts highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">function</span> <span class="nx">countHighestScoreNodes</span><span class="p">(</span><span class="nx">parents</span><span class="p">:</span> <span class="kr">number</span><span class="p">[]):</span> <span class="kr">number</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">parents</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">g</span><span class="p">:</span> <span class="kr">number</span><span class="p">[][]</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">({</span> <span class="na">length</span><span class="p">:</span> <span class="nx">n</span> <span class="p">},</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">[]);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">g</span><span class="p">[</span><span class="nx">parents</span><span class="p">[</span><span class="nx">i</span><span class="p">]].</span><span class="nx">push</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">let</span> <span class="p">[</span><span class="nx">ans</span><span class="p">,</span> <span class="nx">mx</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">];</span>
    <span class="kd">const</span> <span class="nx">dfs</span> <span class="o">=</span> <span class="p">(</span><span class="nx">i</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">fa</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="p">[</span><span class="nx">cnt</span><span class="p">,</span> <span class="nx">score</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">j</span> <span class="k">of</span> <span class="nx">g</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">j</span> <span class="o">!==</span> <span class="nx">fa</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">const</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">dfs</span><span class="p">(</span><span class="nx">j</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
                <span class="nx">cnt</span> <span class="o">+=</span> <span class="nx">t</span><span class="p">;</span>
                <span class="nx">score</span> <span class="o">*=</span> <span class="nx">t</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">-</span> <span class="nx">cnt</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">score</span> <span class="o">*=</span> <span class="nx">n</span> <span class="o">-</span> <span class="nx">cnt</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">mx</span> <span class="o">&lt;</span> <span class="nx">score</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">mx</span> <span class="o">=</span> <span class="nx">score</span><span class="p">;</span>
            <span class="nx">ans</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">mx</span> <span class="o">===</span> <span class="nx">score</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">ans</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">cnt</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">ans</span><span class="p">;</span>
<span class="p">}</span>

</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-cs highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
    <span class="k">private</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;[]</span> <span class="n">g</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">ans</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">long</span> <span class="n">mx</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>

    <span class="k">public</span> <span class="kt">int</span> <span class="nf">CountHighestScoreNodes</span><span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">parents</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">n</span> <span class="p">=</span> <span class="n">parents</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
        <span class="n">g</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;[</span><span class="n">n</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">g</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;();</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">g</span><span class="p">[</span><span class="n">parents</span><span class="p">[</span><span class="n">i</span><span class="p">]].</span><span class="nf">Add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nf">Dfs</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="p">-</span><span class="m">1</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="kt">int</span> <span class="nf">Dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fa</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">cnt</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
        <span class="kt">long</span> <span class="n">score</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="k">in</span> <span class="n">g</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="p">!=</span> <span class="n">fa</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">int</span> <span class="n">t</span> <span class="p">=</span> <span class="nf">Dfs</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
                <span class="n">cnt</span> <span class="p">+=</span> <span class="n">t</span><span class="p">;</span>
                <span class="n">score</span> <span class="p">*=</span> <span class="n">t</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="p">-</span> <span class="n">cnt</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">score</span> <span class="p">*=</span> <span class="n">n</span> <span class="p">-</span> <span class="n">cnt</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">mx</span> <span class="p">&lt;</span> <span class="n">score</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">mx</span> <span class="p">=</span> <span class="n">score</span><span class="p">;</span>
            <span class="n">ans</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">mx</span> <span class="p">==</span> <span class="n">score</span><span class="p">)</span> <span class="p">{</span>
            <span class="p">++</span><span class="n">ans</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">cnt</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-2049.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
