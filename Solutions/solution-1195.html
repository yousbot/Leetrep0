<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-1195.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-1195.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>1195 - Fizz Buzz Multithreaded</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode 1195. Fizz Buzz Multithreaded Description You have the four functions: printFizz that prints the word &amp;quot;fizz&amp;quot; to the console, printBuzz that prints the word &amp;quot;buzz&amp;quot; to the console, printFizzBuzz that prints the word &amp;quot;fizzbuzz&amp;quot; to the console, and printNumber that prints a given integer to...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-1195.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-1195.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-1195.html" rel="stylesheet"/>
   <link href="solution-1195.html" rel="stylesheet"/>
   <link href="solution-1195.html" rel="stylesheet"/>
   <link href="solution-1195.html" rel="stylesheet"/>
   <link href="solution-1195.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="1195 - Fizz Buzz Multithreaded" property="og:title"/>
   <meta content='Leetcode 1195. Fizz Buzz Multithreaded Description You have the four functions: printFizz that prints the word &amp;quot;fizz&amp;quot; to the console, printBuzz that prints the word &amp;quot;buzz&amp;quot; to the console, printFizzBuzz that prints the word &amp;quot;fizzbuzz&amp;quot; to the console, and printNumber that prints a given integer to the console. You are given an instance of the class FizzBuzz that has four functions: fizz, buzz, fizzbuzz and number. The same instance of FizzBuzz will be passed to four different threads: Thread A: calls fizz() that should output the word &amp;quot;fizz&amp;quot;. Thread B: calls buzz() that should output the word &amp;quot;buzz&amp;quot;. Thread C: calls fizzbuzz() that should output the word &amp;quot;fizzbuzz&amp;quot;. Thread D: calls number() that should only output the integers. Modify the given class to output the series [1, 2, &amp;quot;fizz&amp;quot;, 4, &amp;quot;buzz&amp;quot;, ...] where the ith token (1-indexed) of the series is: &amp;quot;fizzbuzz&amp;quot; if i is divisible by 3 and 5, &amp;quot;fizz&amp;quot; if i is divisible by 3 and not 5, &amp;quot;buzz&amp;quot; if i is divisible by 5 and not 3, or i if i is not divisible by 3 or 5. Implement the FizzBuzz class: FizzBuzz(int n) Initializes the object with the number n that represents the length of the sequence that should be printed. void fizz(printFizz) Calls printFizz to output &amp;quot;fizz&amp;quot;. void buzz(printBuzz) Calls printBuzz to output &amp;quot;buzz&amp;quot;. void fizzbuzz(printFizzBuzz) Calls printFizzBuzz to output &amp;quot;fizzbuzz&amp;quot;. void number(printNumber) Calls printnumber to output the numbers. &amp;nbsp; Example 1: Input: n = 15 Output: [1,2,"fizz",4,"buzz","fizz",7,8,"fizz","buzz",11,"fizz",13,14,"fizzbuzz"] Example 2: Input: n = 5 Output: [1,2,"fizz",4,"buzz"] &amp;nbsp; Constraints: 1 &amp;lt;= n &amp;lt;= 50 Solutions This problem is designed to be solved using multiple threads, where each thread is responsible for printing either numbers, âfizzâ, âbuzzâ, or âfizzbuzzâ. The main challenge is ensuring that the correct function is called for each number in sequence, despite the asynchronous nature of threads. Code Explanation: Initialization (__init__ method): self.n: The last number in the sequence that needs to be printed. self.fizzSemaphore, self.buzzSemaphore, self.fizzbuzzSemaphore, and self.numberSemaphore: Semaphores are used to control the execution flow of the threads. Each semaphore corresponds to one of the four possible print actions. The numberSemaphore is initially set to 1 to allow the sequence to start with the first number, while the others are set to 0 because they need to be triggered by the number sequence logic. The fizz, buzz, fizzbuzz, and number methods: Each method is designed to be run in its own thread. They use semaphores to synchronize access to the shared resource (in this case, the console or standard output) to ensure that values are printed in the correct order. fizz method: Waits for the fizzSemaphore to be released (i.e., a number divisible by 3 but not by 5 is encountered) and then prints âfizzâ. After printing, it releases the numberSemaphore to proceed with the sequence. buzz method: Similar to the fizz method but for numbers divisible by 5 but not by 3. fizzbuzz method: Waits for the fizzbuzzSemaphore to be released (i.e., a number divisible by...' property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2019-03-09T00:00:00-08:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2019-03-09-1195-Fizz-Buzz-Multithreaded/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-1195.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="1195 - Fizz Buzz Multithreaded" property="twitter:title"/>
   <meta content='Leetcode 1195. Fizz Buzz Multithreaded Description You have the four functions: printFizz that prints the word &amp;quot;fizz&amp;quot; to the console, printBuzz that prints the word &amp;quot;buzz&amp;quot; to the console, printFizzBuzz that prints the word &amp;quot;fizzbuzz&amp;quot; to the console, and printNumber that prints a given integer to the console. You are given an instance of the class FizzBuzz that has four functions: fizz, buzz, fizzbuzz and number. The same instance of FizzBuzz will be passed to four different threads: Thread A: calls fizz() that should output the word &amp;quot;fizz&amp;quot;. Thread B: calls buzz() that should output the word &amp;quot;buzz&amp;quot;. Thread C: calls fizzbuzz() that should output the word &amp;quot;fizzbuzz&amp;quot;. Thread D: calls number() that should only output the integers. Modify the given class to output the series [1, 2, &amp;quot;fizz&amp;quot;, 4, &amp;quot;buzz&amp;quot;, ...] where the ith token (1-indexed) of the series is: &amp;quot;fizzbuzz&amp;quot; if i is divisible by 3 and 5, &amp;quot;fizz&amp;quot; if i is divisible by 3 and not 5, &amp;quot;buzz&amp;quot; if i is divisible by 5 and not 3, or i if i is not divisible by 3 or 5. Implement the FizzBuzz class: FizzBuzz(int n) Initializes the object with the number n that represents the length of the sequence that should be printed. void fizz(printFizz) Calls printFizz to output &amp;quot;fizz&amp;quot;. void buzz(printBuzz) Calls printBuzz to output &amp;quot;buzz&amp;quot;. void fizzbuzz(printFizzBuzz) Calls printFizzBuzz to output &amp;quot;fizzbuzz&amp;quot;. void number(printNumber) Calls printnumber to output the numbers. &amp;nbsp; Example 1: Input: n = 15 Output: [1,2,"fizz",4,"buzz","fizz",7,8,"fizz","buzz",11,"fizz",13,14,"fizzbuzz"] Example 2: Input: n = 5 Output: [1,2,"fizz",4,"buzz"] &amp;nbsp; Constraints: 1 &amp;lt;= n &amp;lt;= 50 Solutions This problem is designed to be solved using multiple threads, where each thread is responsible for printing either numbers, âfizzâ, âbuzzâ, or âfizzbuzzâ. The main challenge is ensuring that the correct function is called for each number in sequence, despite the asynchronous nature of threads. Code Explanation: Initialization (__init__ method): self.n: The last number in the sequence that needs to be printed. self.fizzSemaphore, self.buzzSemaphore, self.fizzbuzzSemaphore, and self.numberSemaphore: Semaphores are used to control the execution flow of the threads. Each semaphore corresponds to one of the four possible print actions. The numberSemaphore is initially set to 1 to allow the sequence to start with the first number, while the others are set to 0 because they need to be triggered by the number sequence logic. The fizz, buzz, fizzbuzz, and number methods: Each method is designed to be run in its own thread. They use semaphores to synchronize access to the shared resource (in this case, the console or standard output) to ensure that values are printed in the correct order. fizz method: Waits for the fizzSemaphore to be released (i.e., a number divisible by 3 but not by 5 is encountered) and then prints âfizzâ. After printing, it releases the numberSemaphore to proceed with the sequence. buzz method: Similar to the fizz method but for numbers divisible by 5 but not by 3. fizzbuzz method: Waits for the fizzbuzzSemaphore to be released (i.e., a number divisible by...' property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    1195 - Fizz Buzz Multithreaded | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="1195 - Fizz Buzz Multithreaded" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-1195.html" rel="canonical">
          <meta content="https://leetcode.ca/2019-03-09-1195-Fizz-Buzz-Multithreaded/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2019-03-09T00:00:00-08:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"1195 - Fizz Buzz Multithreaded","dateModified":"2019-03-09T00:00:00-08:00","datePublished":"2019-03-09T00:00:00-08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2019-03-09-1195-Fizz-Buzz-Multithreaded/"},"url":"https://leetcode.ca/2019-03-09-1195-Fizz-Buzz-Multithreaded/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <h1 id="1195-fizz-buzz-multithreaded">
       <a href="solution-1195.html">
        1195. Fizz Buzz Multithreaded
       </a>
      </h1>
      <h2 id="description">
       Description
      </h2>
      <p>
       You have the four functions:
      </p>
      <ul>
       <li>
        <code>
         printFizz
        </code>
        that prints the word
        <code>
         "fizz"
        </code>
        to the console,
       </li>
       <li>
        <code>
         printBuzz
        </code>
        that prints the word
        <code>
         "buzz"
        </code>
        to the console,
       </li>
       <li>
        <code>
         printFizzBuzz
        </code>
        that prints the word
        <code>
         "fizzbuzz"
        </code>
        to the console, and
       </li>
       <li>
        <code>
         printNumber
        </code>
        that prints a given integer to the console.
       </li>
      </ul>
      <p>
       You are given an instance of the class
       <code>
        FizzBuzz
       </code>
       that has four functions:
       <code>
        fizz
       </code>
       ,
       <code>
        buzz
       </code>
       ,
       <code>
        fizzbuzz
       </code>
       and
       <code>
        number
       </code>
       . The same instance of
       <code>
        FizzBuzz
       </code>
       will be passed to four different threads:
      </p>
      <ul>
       <li>
        <strong>
         Thread A:
        </strong>
        calls
        <code>
         fizz()
        </code>
        that should output the word
        <code>
         "fizz"
        </code>
        .
       </li>
       <li>
        <strong>
         Thread B:
        </strong>
        calls
        <code>
         buzz()
        </code>
        that should output the word
        <code>
         "buzz"
        </code>
        .
       </li>
       <li>
        <strong>
         Thread C:
        </strong>
        calls
        <code>
         fizzbuzz()
        </code>
        that should output the word
        <code>
         "fizzbuzz"
        </code>
        .
       </li>
       <li>
        <strong>
         Thread D:
        </strong>
        calls
        <code>
         number()
        </code>
        that should only output the integers.
       </li>
      </ul>
      <p>
       Modify the given class to output the series
       <code>
        [1, 2, "fizz", 4, "buzz", ...]
       </code>
       where the
       <code>
        i
        <sup>
         th
        </sup>
       </code>
       token (
       <strong>
        1-indexed
       </strong>
       ) of the series is:
      </p>
      <ul>
       <li>
        <code>
         "fizzbuzz"
        </code>
        if
        <code>
         i
        </code>
        is divisible by
        <code>
         3
        </code>
        and
        <code>
         5
        </code>
        ,
       </li>
       <li>
        <code>
         "fizz"
        </code>
        if
        <code>
         i
        </code>
        is divisible by
        <code>
         3
        </code>
        and not
        <code>
         5
        </code>
        ,
       </li>
       <li>
        <code>
         "buzz"
        </code>
        if
        <code>
         i
        </code>
        is divisible by
        <code>
         5
        </code>
        and not
        <code>
         3
        </code>
        , or
       </li>
       <li>
        <code>
         i
        </code>
        if
        <code>
         i
        </code>
        is not divisible by
        <code>
         3
        </code>
        or
        <code>
         5
        </code>
        .
       </li>
      </ul>
      <p>
       Implement the
       <code>
        FizzBuzz
       </code>
       class:
      </p>
      <ul>
       <li>
        <code>
         FizzBuzz(int n)
        </code>
        Initializes the object with the number
        <code>
         n
        </code>
        that represents the length of the sequence that should be printed.
       </li>
       <li>
        <code>
         void fizz(printFizz)
        </code>
        Calls
        <code>
         printFizz
        </code>
        to output
        <code>
         "fizz"
        </code>
        .
       </li>
       <li>
        <code>
         void buzz(printBuzz)
        </code>
        Calls
        <code>
         printBuzz
        </code>
        to output
        <code>
         "buzz"
        </code>
        .
       </li>
       <li>
        <code>
         void fizzbuzz(printFizzBuzz)
        </code>
        Calls
        <code>
         printFizzBuzz
        </code>
        to output
        <code>
         "fizzbuzz"
        </code>
        .
       </li>
       <li>
        <code>
         void number(printNumber)
        </code>
        Calls
        <code>
         printnumber
        </code>
        to output the numbers.
       </li>
      </ul>
      <p>
      </p>
      <p>
       <strong class="example">
        Example 1:
       </strong>
      </p>
      <pre><strong>Input:</strong> n = 15
<strong>Output:</strong> [1,2,"fizz",4,"buzz","fizz",7,8,"fizz","buzz",11,"fizz",13,14,"fizzbuzz"]
</pre>
      <p>
       <strong class="example">
        Example 2:
       </strong>
      </p>
      <pre><strong>Input:</strong> n = 5
<strong>Output:</strong> [1,2,"fizz",4,"buzz"]
</pre>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         1 &lt;= n &lt;= 50
        </code>
       </li>
      </ul>
      <h2 id="solutions">
       Solutions
      </h2>
      <p>
       This problem is designed to be solved using multiple threads, where each thread is responsible for printing either numbers, âfizzâ, âbuzzâ, or âfizzbuzzâ. The main challenge is ensuring that the correct function is called for each number
       <code class="language-plaintext highlighter-rouge">
        in sequence
       </code>
       , despite the asynchronous nature of threads.
      </p>
      <h3 id="code-explanation">
       Code Explanation:
      </h3>
      <ol>
       <li>
        <strong>
         Initialization (
         <code class="language-plaintext highlighter-rouge">
          __init__
         </code>
         method)
        </strong>
        :
        <ul>
         <li>
          <code class="language-plaintext highlighter-rouge">
           self.n
          </code>
          : The last number in the sequence that needs to be printed.
         </li>
         <li>
          <code class="language-plaintext highlighter-rouge">
           self.fizzSemaphore
          </code>
          ,
          <code class="language-plaintext highlighter-rouge">
           self.buzzSemaphore
          </code>
          ,
          <code class="language-plaintext highlighter-rouge">
           self.fizzbuzzSemaphore
          </code>
          , and
          <code class="language-plaintext highlighter-rouge">
           self.numberSemaphore
          </code>
          : Semaphores are used to control the execution flow of the threads. Each semaphore corresponds to one of the four possible print actions. The
          <code class="language-plaintext highlighter-rouge">
           numberSemaphore
          </code>
          is initially set to 1 to allow the sequence to start with the first number, while the others are set to 0 because they need to be triggered by the number sequence logic.
         </li>
        </ul>
       </li>
       <li>
        <strong>
         The
         <code class="language-plaintext highlighter-rouge">
          fizz
         </code>
         ,
         <code class="language-plaintext highlighter-rouge">
          buzz
         </code>
         ,
         <code class="language-plaintext highlighter-rouge">
          fizzbuzz
         </code>
         , and
         <code class="language-plaintext highlighter-rouge">
          number
         </code>
         methods
        </strong>
        :
Each method is designed to be run in its own thread. They use semaphores to synchronize access to the shared resource (in this case, the console or standard output) to ensure that values are printed in the correct order.
        <ul>
         <li>
          <strong>
           <code class="language-plaintext highlighter-rouge">
            fizz
           </code>
           method
          </strong>
          : Waits for the
          <code class="language-plaintext highlighter-rouge">
           fizzSemaphore
          </code>
          to be released (i.e., a number divisible by 3 but not by 5 is encountered) and then prints âfizzâ. After printing, it releases the
          <code class="language-plaintext highlighter-rouge">
           numberSemaphore
          </code>
          to proceed with the sequence.
         </li>
         <li>
          <strong>
           <code class="language-plaintext highlighter-rouge">
            buzz
           </code>
           method
          </strong>
          : Similar to the
          <code class="language-plaintext highlighter-rouge">
           fizz
          </code>
          method but for numbers divisible by 5 but not by 3.
         </li>
         <li>
          <strong>
           <code class="language-plaintext highlighter-rouge">
            fizzbuzz
           </code>
           method
          </strong>
          : Waits for the
          <code class="language-plaintext highlighter-rouge">
           fizzbuzzSemaphore
          </code>
          to be released (i.e., a number divisible by both 3 and 5 is encountered) and then prints âfizzbuzzâ. It then releases the
          <code class="language-plaintext highlighter-rouge">
           numberSemaphore
          </code>
          .
         </li>
         <li>
          <strong>
           <code class="language-plaintext highlighter-rouge">
            number
           </code>
           method
          </strong>
          : This is where the sequence logic is implemented. For each number from 1 to
          <code class="language-plaintext highlighter-rouge">
           n
          </code>
          , it first acquires the
          <code class="language-plaintext highlighter-rouge">
           numberSemaphore
          </code>
          to ensure orderly access. It then checks the divisibility of the current number to determine which semaphore to release next, allowing the corresponding method to print the appropriate value. If the number does not meet any special criteria (not divisible by 3 or 5), it prints the number itself and releases the
          <code class="language-plaintext highlighter-rouge">
           numberSemaphore
          </code>
          to continue the sequence.
         </li>
        </ul>
       </li>
      </ol>
      <h3 id="how-it-works-together">
       How It Works Together:
      </h3>
      <ul>
       <li>
        The
        <code class="language-plaintext highlighter-rouge">
         number
        </code>
        method controls the flow of the program by releasing semaphores based on the divisibility of each number in the sequence. This ensures that only the correct thread is active at any given time for each number in the sequence.
       </li>
       <li>
        The semaphores act as locks that prevent threads from proceeding until itâs their turn, ensuring the correct order of execution and preventing race conditions or incorrect output order.
       </li>
       <li>
        This solution elegantly uses semaphores for synchronization between threads, allowing for a clear separation of logic and responsibilities among the threads.
       </li>
      </ul>
      <ul class="uk-tab" data-uk-switcher="{connect:'#b114785a-881a-4bcd-8791-db74df92a03e'}">
       <li class="uk-active">
        <a href="solution-1195.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-1195.html">
         C++
        </a>
       </li>
       <li>
        <a href="solution-1195.html">
         Python
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="b114785a-881a-4bcd-8791-db74df92a03e">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">FizzBuzz</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">n</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">FizzBuzz</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">Semaphore</span> <span class="n">fSema</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Semaphore</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">Semaphore</span> <span class="n">bSema</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Semaphore</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">Semaphore</span> <span class="n">fbSema</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Semaphore</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">Semaphore</span> <span class="n">nSema</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Semaphore</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

    <span class="c1">// printFizz.run() outputs "fizz".</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fizz</span><span class="o">(</span><span class="nc">Runnable</span> <span class="n">printFizz</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">fSema</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
                <span class="n">printFizz</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
                <span class="n">nSema</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// printBuzz.run() outputs "buzz".</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">buzz</span><span class="o">(</span><span class="nc">Runnable</span> <span class="n">printBuzz</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">bSema</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
                <span class="n">printBuzz</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
                <span class="n">nSema</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// printFizzBuzz.run() outputs "fizzbuzz".</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fizzbuzz</span><span class="o">(</span><span class="nc">Runnable</span> <span class="n">printFizzBuzz</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">15</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">15</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">fbSema</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
            <span class="n">printFizzBuzz</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
            <span class="n">nSema</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// printNumber.accept(x) outputs "x", where x is an integer.</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">number</span><span class="o">(</span><span class="nc">IntConsumer</span> <span class="n">printNumber</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">nSema</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">fbSema</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">fSema</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">bSema</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">printNumber</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
                <span class="n">nSema</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-cpp highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">FizzBuzz</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">mutex</span> <span class="n">mtx</span><span class="p">;</span>
    <span class="n">atomic</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">index</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>

    <span class="c1">// è¿éä¸»è¦è¿ç¨å°äºC++11ä¸­çRAIIé(lock_guard)çç¥è¯ã</span>
    <span class="c1">// éè¦å¼ºè°çä¸ç¹æ¯ï¼å¨è¿å¥å¾ªç¯åï¼è¦æ¶å»ä¸å¿å å¥index &lt;= nçé»è¾</span>
<span class="nl">public:</span>
    <span class="n">FizzBuzz</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">fizz</span><span class="p">(</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">()</span><span class="o">&gt;</span> <span class="n">printFizz</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">index</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lk</span><span class="p">(</span><span class="n">mtx</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">index</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="mi">0</span> <span class="o">!=</span> <span class="n">index</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="n">index</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">printFizz</span><span class="p">();</span>
                <span class="n">index</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">buzz</span><span class="p">(</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">()</span><span class="o">&gt;</span> <span class="n">printBuzz</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">index</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lk</span><span class="p">(</span><span class="n">mtx</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">index</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="mi">0</span> <span class="o">!=</span> <span class="n">index</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="n">index</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">printBuzz</span><span class="p">();</span>
                <span class="n">index</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">fizzbuzz</span><span class="p">(</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">()</span><span class="o">&gt;</span> <span class="n">printFizzBuzz</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">index</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lk</span><span class="p">(</span><span class="n">mtx</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">index</span> <span class="o">%</span> <span class="mi">15</span> <span class="o">&amp;&amp;</span> <span class="n">index</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">printFizzBuzz</span><span class="p">();</span>
                <span class="n">index</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">number</span><span class="p">(</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">printNumber</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">index</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lk</span><span class="p">(</span><span class="n">mtx</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">!=</span> <span class="n">index</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="mi">0</span> <span class="o">!=</span> <span class="n">index</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="n">index</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">printNumber</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
                <span class="n">index</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-python highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Semaphore</span>

<span class="k">class</span> <span class="nc">FizzBuzz</span><span class="p">:</span> <span class="c1"># semaphore
</span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">fizzSemaphore</span> <span class="o">=</span> <span class="n">Semaphore</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">buzzSemaphore</span> <span class="o">=</span> <span class="n">Semaphore</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">fizzbuzzSemaphore</span> <span class="o">=</span> <span class="n">Semaphore</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">numberSemaphore</span> <span class="o">=</span> <span class="n">Semaphore</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># printFizz() outputs "fizz"
</span>    <span class="k">def</span> <span class="nf">fizz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">printFizz</span><span class="p">:</span> <span class="s">'Callable[[], None]'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">fizzSemaphore</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
                <span class="n">printFizz</span><span class="p">()</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">numberSemaphore</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>

    <span class="c1"># printBuzz() outputs "buzz"
</span>    <span class="k">def</span> <span class="nf">buzz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">printBuzz</span><span class="p">:</span> <span class="s">'Callable[[], None]'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">buzzSemaphore</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
                <span class="n">printBuzz</span><span class="p">()</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">numberSemaphore</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>

    <span class="c1"># printFizzBuzz() outputs "fizzbuzz"
</span>    <span class="k">def</span> <span class="nf">fizzbuzz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">printFizzBuzz</span><span class="p">:</span> <span class="s">'Callable[[], None]'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">):</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">fizzbuzzSemaphore</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
            <span class="n">printFizzBuzz</span><span class="p">()</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">numberSemaphore</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>

    <span class="c1"># printNumber(x) outputs "x", where x is an integer.
</span>    <span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">printNumber</span><span class="p">:</span> <span class="s">'Callable[[int], None]'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">numberSemaphore</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">15</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">fizzbuzzSemaphore</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">fizzSemaphore</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">buzzSemaphore</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">printNumber</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">numberSemaphore</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>


<span class="c1">##########
</span>
<span class="c1"># ref: https://leetcode.com/problems/fizz-buzz-multithreaded/discuss/542960/python-greater99.28-a-standard-Lock()-based-solution-with-detailed-explanation
</span>
<span class="kn">import</span> <span class="nn">threading</span>

<span class="k">class</span> <span class="nc">FizzBuzz</span><span class="p">:</span> <span class="c1"># lock
</span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">fizz_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">buzz_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">fizzbuzz_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">fizz_lock</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">buzz_lock</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">fizzbuzz_lock</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">main_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Lock</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">fizz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">printFizz</span><span class="p">:</span> <span class="s">'Callable[[], None]'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">fizz_lock</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
                <span class="k">return</span>
            <span class="n">printFizz</span><span class="p">()</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">main_lock</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">buzz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">printBuzz</span><span class="p">:</span> <span class="s">'Callable[[], None]'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">buzz_lock</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">printBuzz</span><span class="p">()</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">main_lock</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">fizzbuzz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">printFizzBuzz</span><span class="p">:</span> <span class="s">'Callable[[], None]'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">fizzbuzz_lock</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">printFizzBuzz</span><span class="p">()</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">main_lock</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">printNumber</span><span class="p">:</span> <span class="s">'Callable[[int], None]'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">main_lock</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">15</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">fizzbuzz_lock</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">fizz_lock</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">buzz_lock</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">printNumber</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">main_lock</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>

        <span class="bp">self</span><span class="p">.</span><span class="n">main_lock</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">fizz_lock</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">buzz_lock</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">fizzbuzz_lock</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">return</span>

</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-1195.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
