<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-1279.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-1279.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>1279 - Traffic Light Controlled Intersection</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode 1279. Traffic Light Controlled Intersection Description There is an intersection of two roads. First road is road A where cars travel&amp;nbsp;from North to South in direction 1 and from South to North in direction 2. Second road is road B where cars travel from West...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-1279.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-1279.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-1279.html" rel="stylesheet"/>
   <link href="solution-1279.html" rel="stylesheet"/>
   <link href="solution-1279.html" rel="stylesheet"/>
   <link href="solution-1279.html" rel="stylesheet"/>
   <link href="solution-1279.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="1279 - Traffic Light Controlled Intersection" property="og:title"/>
   <meta content="Leetcode 1279. Traffic Light Controlled Intersection Description There is an intersection of two roads. First road is road A where cars travel&amp;nbsp;from North to South in direction 1 and from South to North in direction 2. Second road is road B where cars travel from West to East in direction 3 and from East to West in direction 4. There is a traffic light&amp;nbsp;located on each road before the intersection. A traffic light&amp;nbsp;can&amp;nbsp;either be green or red. Green means&amp;nbsp;cars can cross the intersection&amp;nbsp;in both directions of the road. Red means cars in both directions cannot cross the intersection and must wait until the light turns green. The traffic lights cannot be green on both roads at the same time. That means when the light is green on road A, it is red on&amp;nbsp;road B and when the light is green on road B, it is red on&amp;nbsp;road A. Initially, the traffic light is green on road A and red&amp;nbsp;on road B. When the light is green on one road, all cars can cross the intersection in both directions until the light becomes green on the other road.&amp;nbsp;No two cars traveling on different roads should cross at the same time. Design a deadlock-free&amp;nbsp;traffic light controlled system at this intersection. Implement the function&amp;nbsp;void carArrived(carId, roadId, direction, turnGreen, crossCar) where: carId&amp;nbsp;is the id of the car that arrived. roadId&amp;nbsp;is the id of the road that the car travels&amp;nbsp;on. direction&amp;nbsp;is the direction of the car. turnGreen&amp;nbsp;is a function you can call to turn the traffic light to green on the current road. crossCar&amp;nbsp;is a function you can call to let the current car cross the intersection. Your answer is considered correct if it avoids cars deadlock in the intersection.&amp;nbsp;Turning the light green on a road when it was already green is considered a&amp;nbsp;wrong answer. &amp;nbsp; Example 1: Input: cars = [1,3,5,2,4], directions = [2,1,2,4,3], arrivalTimes = [10,20,30,40,50] Output: [ &amp;quot;Car 1 Has Passed Road A In Direction 2&amp;quot;, // Traffic light on road A is green, car 1 can cross the intersection. &amp;quot;Car 3 Has Passed Road A In Direction 1&amp;quot;, // Car 3 crosses the intersection as the light is still green. &amp;quot;Car 5 Has Passed Road A In Direction 2&amp;quot;, // Car 5 crosses the intersection as the light is still green. &amp;quot;Traffic Light On Road B Is Green&amp;quot;, // Car 2 requests green light for road B. &amp;quot;Car 2 Has Passed Road B In Direction 4&amp;quot;, // Car 2 crosses as the light is green on road B now. &amp;quot;Car 4 Has Passed Road B In Direction 3&amp;quot; // Car 4 crosses the intersection as the light is still green. ] Example 2: Input: cars = [1,2,3,4,5], directions = [2,4,3,3,1], arrivalTimes = [10,20,30,40,40] Output: [ &amp;quot;Car 1 Has Passed Road A In Direction 2&amp;quot;, // Traffic light on road A is green, car 1 can cross the intersection. &amp;quot;Traffic Light On Road B Is Green&amp;quot;, // Car 2 requests green light for road B. &amp;quot;Car 2 Has..." property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2019-06-01T00:00:00-07:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2019-06-01-1279-Traffic-Light-Controlled-Intersection/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-1279.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="1279 - Traffic Light Controlled Intersection" property="twitter:title"/>
   <meta content="Leetcode 1279. Traffic Light Controlled Intersection Description There is an intersection of two roads. First road is road A where cars travel&amp;nbsp;from North to South in direction 1 and from South to North in direction 2. Second road is road B where cars travel from West to East in direction 3 and from East to West in direction 4. There is a traffic light&amp;nbsp;located on each road before the intersection. A traffic light&amp;nbsp;can&amp;nbsp;either be green or red. Green means&amp;nbsp;cars can cross the intersection&amp;nbsp;in both directions of the road. Red means cars in both directions cannot cross the intersection and must wait until the light turns green. The traffic lights cannot be green on both roads at the same time. That means when the light is green on road A, it is red on&amp;nbsp;road B and when the light is green on road B, it is red on&amp;nbsp;road A. Initially, the traffic light is green on road A and red&amp;nbsp;on road B. When the light is green on one road, all cars can cross the intersection in both directions until the light becomes green on the other road.&amp;nbsp;No two cars traveling on different roads should cross at the same time. Design a deadlock-free&amp;nbsp;traffic light controlled system at this intersection. Implement the function&amp;nbsp;void carArrived(carId, roadId, direction, turnGreen, crossCar) where: carId&amp;nbsp;is the id of the car that arrived. roadId&amp;nbsp;is the id of the road that the car travels&amp;nbsp;on. direction&amp;nbsp;is the direction of the car. turnGreen&amp;nbsp;is a function you can call to turn the traffic light to green on the current road. crossCar&amp;nbsp;is a function you can call to let the current car cross the intersection. Your answer is considered correct if it avoids cars deadlock in the intersection.&amp;nbsp;Turning the light green on a road when it was already green is considered a&amp;nbsp;wrong answer. &amp;nbsp; Example 1: Input: cars = [1,3,5,2,4], directions = [2,1,2,4,3], arrivalTimes = [10,20,30,40,50] Output: [ &amp;quot;Car 1 Has Passed Road A In Direction 2&amp;quot;, // Traffic light on road A is green, car 1 can cross the intersection. &amp;quot;Car 3 Has Passed Road A In Direction 1&amp;quot;, // Car 3 crosses the intersection as the light is still green. &amp;quot;Car 5 Has Passed Road A In Direction 2&amp;quot;, // Car 5 crosses the intersection as the light is still green. &amp;quot;Traffic Light On Road B Is Green&amp;quot;, // Car 2 requests green light for road B. &amp;quot;Car 2 Has Passed Road B In Direction 4&amp;quot;, // Car 2 crosses as the light is green on road B now. &amp;quot;Car 4 Has Passed Road B In Direction 3&amp;quot; // Car 4 crosses the intersection as the light is still green. ] Example 2: Input: cars = [1,2,3,4,5], directions = [2,4,3,3,1], arrivalTimes = [10,20,30,40,40] Output: [ &amp;quot;Car 1 Has Passed Road A In Direction 2&amp;quot;, // Traffic light on road A is green, car 1 can cross the intersection. &amp;quot;Traffic Light On Road B Is Green&amp;quot;, // Car 2 requests green light for road B. &amp;quot;Car 2 Has..." property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    1279 - Traffic Light Controlled Intersection | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="1279 - Traffic Light Controlled Intersection" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-1279.html" rel="canonical">
          <meta content="https://leetcode.ca/2019-06-01-1279-Traffic-Light-Controlled-Intersection/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2019-06-01T00:00:00-07:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"1279 - Traffic Light Controlled Intersection","dateModified":"2019-06-01T00:00:00-07:00","datePublished":"2019-06-01T00:00:00-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2019-06-01-1279-Traffic-Light-Controlled-Intersection/"},"url":"https://leetcode.ca/2019-06-01-1279-Traffic-Light-Controlled-Intersection/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <h1 id="1279-traffic-light-controlled-intersection">
       <a href="solution-1279.html">
        1279. Traffic Light Controlled Intersection
       </a>
      </h1>
      <h2 id="description">
       Description
      </h2>
      <p>
       There is an intersection of two roads. First road is road A where cars travel from North to South in direction 1 and from South to North in direction 2. Second road is road B where cars travel from West to East in direction 3 and from East to West in direction 4.
      </p>
      <p>
       <img alt="" src="https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1200-1299/1279.Traffic%20Light%20Controlled%20Intersection/images/exp.png" style="width: 600px; height: 417px;"/>
      </p>
      <p>
       There is a traffic light located on each road before the intersection. A traffic light can either be green or red.
      </p>
      <ol>
       <li>
        <strong>
         Green
        </strong>
        means cars can cross the intersection in both directions of the road.
       </li>
       <li>
        <strong>
         Red
        </strong>
        means cars in both directions cannot cross the intersection and must wait until the light turns green.
       </li>
      </ol>
      <p>
       The traffic lights cannot be green on both roads at the same time. That means when the light is green on road A, it is red on road B and when the light is green on road B, it is red on road A.
      </p>
      <p>
       Initially, the traffic light is
       <strong>
        green
       </strong>
       on road A and
       <strong>
        red
       </strong>
       on road B. When the light is green on one road, all cars can cross the intersection in both directions until the light becomes green on the other road. No two cars traveling on different roads should cross at the same time.
      </p>
      <p>
       Design a deadlock-free traffic light controlled system at this intersection.
      </p>
      <p>
       Implement the function
       <code>
        void carArrived(carId, roadId, direction, turnGreen, crossCar)
       </code>
       where:
      </p>
      <ul>
       <li>
        <code>
         carId
        </code>
        is the id of the car that arrived.
       </li>
       <li>
        <code>
         roadId
        </code>
        is the id of the road that the car travels on.
       </li>
       <li>
        <code>
         direction
        </code>
        is the direction of the car.
       </li>
       <li>
        <code>
         turnGreen
        </code>
        is a function you can call to turn the traffic light to green on the current road.
       </li>
       <li>
        <code>
         crossCar
        </code>
        is a function you can call to let the current car cross the intersection.
       </li>
      </ul>
      <p>
       Your answer is considered correct if it avoids cars deadlock in the intersection. Turning the light green on a road when it was already green is considered a wrong answer.
      </p>
      <p>
      </p>
      <p>
       <strong class="example">
        Example 1:
       </strong>
      </p>
      <pre>
<strong>Input:</strong> cars = [1,3,5,2,4], directions = [2,1,2,4,3], arrivalTimes = [10,20,30,40,50]
<strong>Output:</strong> [
"Car 1 Has Passed Road A In Direction 2",    // Traffic light on road A is green, car 1 can cross the intersection.
"Car 3 Has Passed Road A In Direction 1",    // Car 3 crosses the intersection as the light is still green.
"Car 5 Has Passed Road A In Direction 2",    // Car 5 crosses the intersection as the light is still green.
"Traffic Light On Road B Is Green",          // Car 2 requests green light for road B.
"Car 2 Has Passed Road B In Direction 4",    // Car 2 crosses as the light is green on road B now.
"Car 4 Has Passed Road B In Direction 3"     // Car 4 crosses the intersection as the light is still green.
]
</pre>
      <p>
       <strong class="example">
        Example 2:
       </strong>
      </p>
      <pre>
<strong>Input:</strong> cars = [1,2,3,4,5], directions = [2,4,3,3,1], arrivalTimes = [10,20,30,40,40]
<strong>Output:</strong> [
"Car 1 Has Passed Road A In Direction 2",    // Traffic light on road A is green, car 1 can cross the intersection.
"Traffic Light On Road B Is Green",          // Car 2 requests green light for road B.
"Car 2 Has Passed Road B In Direction 4",    // Car 2 crosses as the light is green on road B now.
"Car 3 Has Passed Road B In Direction 3",    // Car 3 crosses as the light is green on road B now.
"Traffic Light On Road A Is Green",          // Car 5 requests green light for road A.
"Car 5 Has Passed Road A In Direction 1",    // Car 5 crosses as the light is green on road A now.
"Traffic Light On Road B Is Green",          // Car 4 requests green light for road B. Car 4 blocked until car 5 crosses and then traffic light is green on road B.
"Car 4 Has Passed Road B In Direction 3"     // Car 4 crosses as the light is green on road B now.
]
<strong>Explanation:</strong> This is a dead-lock free scenario. Note that the scenario when car 4 crosses before turning light into green on road A and allowing car 5 to pass is also <strong>correct</strong> and <strong>Accepted</strong> scenario.
</pre>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         1 &lt;= cars.length &lt;= 20
        </code>
       </li>
       <li>
        <code>
         cars.length = directions.length
        </code>
       </li>
       <li>
        <code>
         cars.length = arrivalTimes.length
        </code>
       </li>
       <li>
        All values of
        <code>
         cars
        </code>
        are unique
       </li>
       <li>
        <code>
         1 &lt;= directions[i] &lt;= 4
        </code>
       </li>
       <li>
        <code>
         arrivalTimes
        </code>
        is non-decreasing
       </li>
      </ul>
      <h2 id="solutions">
       Solutions
      </h2>
      <ul class="uk-tab" data-uk-switcher="{connect:'#d1c606fa-91ff-474f-8241-05cc1b16e514'}">
       <li class="uk-active">
        <a href="solution-1279.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-1279.html">
         Python
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="d1c606fa-91ff-474f-8241-05cc1b16e514">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">TrafficLight</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">road</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">TrafficLight</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">carArrived</span><span class="o">(</span><span class="kt">int</span> <span class="n">carId</span><span class="o">,</span> <span class="c1">// ID of the car</span>
        <span class="kt">int</span> <span class="n">roadId</span><span class="o">,</span> <span class="c1">// ID of the road the car travels on. Can be 1 (road A) or 2 (road B)</span>
        <span class="kt">int</span> <span class="n">direction</span><span class="o">,</span> <span class="c1">// Direction of the car</span>
        <span class="nc">Runnable</span> <span class="n">turnGreen</span><span class="o">,</span> <span class="c1">// Use turnGreen.run() to turn light to green on current road</span>
        <span class="nc">Runnable</span> <span class="n">crossCar</span> <span class="c1">// Use crossCar.run() to make car cross the intersection</span>
    <span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">roadId</span> <span class="o">!=</span> <span class="n">road</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">turnGreen</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
            <span class="n">road</span> <span class="o">=</span> <span class="n">roadId</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">crossCar</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-py highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Lock</span>


<span class="k">class</span> <span class="nc">TrafficLight</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">lock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">road</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">carArrived</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">carId</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="c1"># ID of the car
</span>        <span class="c1"># ID of the road the car travels on. Can be 1 (road A) or 2 (road B)
</span>        <span class="n">roadId</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">direction</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="c1"># Direction of the car
</span>        <span class="c1"># Use turnGreen() to turn light to green on current road
</span>        <span class="n">turnGreen</span><span class="p">:</span> <span class="s">'Callable[[], None]'</span><span class="p">,</span>
        <span class="c1"># Use crossCar() to make car cross the intersection
</span>        <span class="n">crossCar</span><span class="p">:</span> <span class="s">'Callable[[], None]'</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">lock</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">road</span> <span class="o">!=</span> <span class="n">roadId</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">road</span> <span class="o">=</span> <span class="n">roadId</span>
            <span class="n">turnGreen</span><span class="p">()</span>
        <span class="n">crossCar</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">lock</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>

</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-1279.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
