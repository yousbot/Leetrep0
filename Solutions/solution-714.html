<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-714.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-714.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>714 - Best Time to Buy and Sell Stock with Transaction Fee</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode 714. Best Time to Buy and Sell Stock with Transaction Fee Description You are given an array prices where prices[i] is the price of a given stock on the ith day, and an integer fee representing a transaction fee. Find the maximum profit you can...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-714.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-714.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-714.html" rel="stylesheet"/>
   <link href="solution-714.html" rel="stylesheet"/>
   <link href="solution-714.html" rel="stylesheet"/>
   <link href="solution-714.html" rel="stylesheet"/>
   <link href="solution-714.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="714 - Best Time to Buy and Sell Stock with Transaction Fee" property="og:title"/>
   <meta content="Leetcode 714. Best Time to Buy and Sell Stock with Transaction Fee Description You are given an array prices where prices[i] is the price of a given stock on the ith day, and an integer fee representing a transaction fee. Find the maximum profit you can achieve. You may complete as many transactions as you like, but you need to pay the transaction fee for each transaction. Note: You may not engage in multiple transactions simultaneously (i.e., you must sell the stock before you buy again). The transaction fee is only charged once for each stock purchase and sale. &amp;nbsp; Example 1: Input: prices = [1,3,2,8,4,9], fee = 2 Output: 8 Explanation: The maximum profit can be achieved by: - Buying at prices[0] = 1 - Selling at prices[3] = 8 - Buying at prices[4] = 4 - Selling at prices[5] = 9 The total profit is ((8 - 1) - 2) + ((9 - 4) - 2) = 8. Example 2: Input: prices = [1,3,7,5,10,3], fee = 3 Output: 6 &amp;nbsp; Constraints: 1 &amp;lt;= prices.length &amp;lt;= 5 * 104 1 &amp;lt;= prices[i] &amp;lt; 5 * 104 0 &amp;lt;= fee &amp;lt; 5 * 104 Solutions Solution 1: Memoization We design a function $dfs(i, j)$, which represents the maximum profit that can be obtained starting from day $i$ with state $j$. Here, $j$ can take the values $0$ and $1$, representing not holding and holding a stock, respectively. The answer is $dfs(0, 0)$. The execution logic of the function $dfs(i, j)$ is as follows: If $i \geq n$, there are no more stocks to trade, so we return $0$. Otherwise, we can choose not to trade, in which case $dfs(i, j) = dfs(i + 1, j)$. We can also choose to trade stocks. If $j \gt 0$, it means that we currently hold a stock and can sell it. In this case, $dfs(i, j) = prices[i] + dfs(i + 1, 0) - fee$. If $j = 0$, it means that we currently do not hold a stock and can buy one. In this case, $dfs(i, j) = -prices[i] + dfs(i + 1, 1)$. We take the maximum value as the return value of the function $dfs(i, j)$. The answer is $dfs(0, 0)$. To avoid redundant calculations, we use memoization to record the return value of $dfs(i, j)$ in an array $f$. If $f[i][j]$ is not equal to $-1$, it means that we have already calculated it, so we can directly return $f[i][j]$. The time complexity is $O(n)$, and the space complexity is $O(n)$. Here, $n$ is the length of the array $prices$. Solution 2: Dynamic Programming We define $f[i][j]$ as the maximum profit that can be obtained up to day $i$ with state $j$. Here, $j$ can take the values $0$ and $1$, representing not holding and holding a stock, respectively. We initialize $f[0][0] = 0$ and $f[0][1] = -prices[0]$. When $i \geq 1$, if we do not hold a stock at the current day, then $f[i][0]$..." property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2017-11-13T00:00:00-08:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2017-11-13-714-Best-Time-to-Buy-and-Sell-Stock-with-Transaction-Fee/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-714.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="714 - Best Time to Buy and Sell Stock with Transaction Fee" property="twitter:title"/>
   <meta content="Leetcode 714. Best Time to Buy and Sell Stock with Transaction Fee Description You are given an array prices where prices[i] is the price of a given stock on the ith day, and an integer fee representing a transaction fee. Find the maximum profit you can achieve. You may complete as many transactions as you like, but you need to pay the transaction fee for each transaction. Note: You may not engage in multiple transactions simultaneously (i.e., you must sell the stock before you buy again). The transaction fee is only charged once for each stock purchase and sale. &amp;nbsp; Example 1: Input: prices = [1,3,2,8,4,9], fee = 2 Output: 8 Explanation: The maximum profit can be achieved by: - Buying at prices[0] = 1 - Selling at prices[3] = 8 - Buying at prices[4] = 4 - Selling at prices[5] = 9 The total profit is ((8 - 1) - 2) + ((9 - 4) - 2) = 8. Example 2: Input: prices = [1,3,7,5,10,3], fee = 3 Output: 6 &amp;nbsp; Constraints: 1 &amp;lt;= prices.length &amp;lt;= 5 * 104 1 &amp;lt;= prices[i] &amp;lt; 5 * 104 0 &amp;lt;= fee &amp;lt; 5 * 104 Solutions Solution 1: Memoization We design a function $dfs(i, j)$, which represents the maximum profit that can be obtained starting from day $i$ with state $j$. Here, $j$ can take the values $0$ and $1$, representing not holding and holding a stock, respectively. The answer is $dfs(0, 0)$. The execution logic of the function $dfs(i, j)$ is as follows: If $i \geq n$, there are no more stocks to trade, so we return $0$. Otherwise, we can choose not to trade, in which case $dfs(i, j) = dfs(i + 1, j)$. We can also choose to trade stocks. If $j \gt 0$, it means that we currently hold a stock and can sell it. In this case, $dfs(i, j) = prices[i] + dfs(i + 1, 0) - fee$. If $j = 0$, it means that we currently do not hold a stock and can buy one. In this case, $dfs(i, j) = -prices[i] + dfs(i + 1, 1)$. We take the maximum value as the return value of the function $dfs(i, j)$. The answer is $dfs(0, 0)$. To avoid redundant calculations, we use memoization to record the return value of $dfs(i, j)$ in an array $f$. If $f[i][j]$ is not equal to $-1$, it means that we have already calculated it, so we can directly return $f[i][j]$. The time complexity is $O(n)$, and the space complexity is $O(n)$. Here, $n$ is the length of the array $prices$. Solution 2: Dynamic Programming We define $f[i][j]$ as the maximum profit that can be obtained up to day $i$ with state $j$. Here, $j$ can take the values $0$ and $1$, representing not holding and holding a stock, respectively. We initialize $f[0][0] = 0$ and $f[0][1] = -prices[0]$. When $i \geq 1$, if we do not hold a stock at the current day, then $f[i][0]$..." property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    714 - Best Time to Buy and Sell Stock with Transaction Fee | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="714 - Best Time to Buy and Sell Stock with Transaction Fee" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-714.html" rel="canonical">
          <meta content="https://leetcode.ca/2017-11-13-714-Best-Time-to-Buy-and-Sell-Stock-with-Transaction-Fee/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2017-11-13T00:00:00-08:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"714 - Best Time to Buy and Sell Stock with Transaction Fee","dateModified":"2017-11-13T00:00:00-08:00","datePublished":"2017-11-13T00:00:00-08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2017-11-13-714-Best-Time-to-Buy-and-Sell-Stock-with-Transaction-Fee/"},"url":"https://leetcode.ca/2017-11-13-714-Best-Time-to-Buy-and-Sell-Stock-with-Transaction-Fee/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <h1 id="714-best-time-to-buy-and-sell-stock-with-transaction-fee">
       <a href="solution-714.html">
        714. Best Time to Buy and Sell Stock with Transaction Fee
       </a>
      </h1>
      <h2 id="description">
       Description
      </h2>
      <p>
       You are given an array
       <code>
        prices
       </code>
       where
       <code>
        prices[i]
       </code>
       is the price of a given stock on the
       <code>
        i
        <sup>
         th
        </sup>
       </code>
       day, and an integer
       <code>
        fee
       </code>
       representing a transaction fee.
      </p>
      <p>
       Find the maximum profit you can achieve. You may complete as many transactions as you like, but you need to pay the transaction fee for each transaction.
      </p>
      <p>
       <strong>
        Note:
       </strong>
      </p>
      <ul>
       <li>
        You may not engage in multiple transactions simultaneously (i.e., you must sell the stock before you buy again).
       </li>
       <li>
        The transaction fee is only charged once for each stock purchase and sale.
       </li>
      </ul>
      <p>
      </p>
      <p>
       <strong class="example">
        Example 1:
       </strong>
      </p>
      <pre>
<strong>Input:</strong> prices = [1,3,2,8,4,9], fee = 2
<strong>Output:</strong> 8
<strong>Explanation:</strong> The maximum profit can be achieved by:
- Buying at prices[0] = 1
- Selling at prices[3] = 8
- Buying at prices[4] = 4
- Selling at prices[5] = 9
The total profit is ((8 - 1) - 2) + ((9 - 4) - 2) = 8.
</pre>
      <p>
       <strong class="example">
        Example 2:
       </strong>
      </p>
      <pre>
<strong>Input:</strong> prices = [1,3,7,5,10,3], fee = 3
<strong>Output:</strong> 6
</pre>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         1 &lt;= prices.length &lt;= 5 * 10
         <sup>
          4
         </sup>
        </code>
       </li>
       <li>
        <code>
         1 &lt;= prices[i] &lt; 5 * 10
         <sup>
          4
         </sup>
        </code>
       </li>
       <li>
        <code>
         0 &lt;= fee &lt; 5 * 10
         <sup>
          4
         </sup>
        </code>
       </li>
      </ul>
      <h2 id="solutions">
       Solutions
      </h2>
      <p>
       <strong>
        Solution 1: Memoization
       </strong>
      </p>
      <p>
       We design a function $dfs(i, j)$, which represents the maximum profit that can be obtained starting from day $i$ with state $j$. Here, $j$ can take the values $0$ and $1$, representing not holding and holding a stock, respectively. The answer is $dfs(0, 0)$.
      </p>
      <p>
       The execution logic of the function $dfs(i, j)$ is as follows:
      </p>
      <p>
       If $i \geq n$, there are no more stocks to trade, so we return $0$.
      </p>
      <p>
       Otherwise, we can choose not to trade, in which case $dfs(i, j) = dfs(i + 1, j)$. We can also choose to trade stocks. If $j \gt 0$, it means that we currently hold a stock and can sell it. In this case, $dfs(i, j) = prices[i] + dfs(i + 1, 0) - fee$. If $j = 0$, it means that we currently do not hold a stock and can buy one. In this case, $dfs(i, j) = -prices[i] + dfs(i + 1, 1)$. We take the maximum value as the return value of the function $dfs(i, j)$.
      </p>
      <p>
       The answer is $dfs(0, 0)$.
      </p>
      <p>
       To avoid redundant calculations, we use memoization to record the return value of $dfs(i, j)$ in an array $f$. If $f[i][j]$ is not equal to $-1$, it means that we have already calculated it, so we can directly return $f[i][j]$.
      </p>
      <p>
       The time complexity is $O(n)$, and the space complexity is $O(n)$. Here, $n$ is the length of the array $prices$.
      </p>
      <p>
       <strong>
        Solution 2: Dynamic Programming
       </strong>
      </p>
      <p>
       We define $f[i][j]$ as the maximum profit that can be obtained up to day $i$ with state $j$. Here, $j$ can take the values $0$ and $1$, representing not holding and holding a stock, respectively. We initialize $f[0][0] = 0$ and $f[0][1] = -prices[0]$.
      </p>
      <p>
       When $i \geq 1$, if we do not hold a stock at the current day, then $f[i][0]$ can be obtained by transitioning from $f[i - 1][0]$ and $f[i - 1][1] + prices[i] - fee$, i.e., $f[i][0] = \max(f[i - 1][0], f[i - 1][1] + prices[i] - fee)$. If we hold a stock at the current day, then $f[i][1]$ can be obtained by transitioning from $f[i - 1][1]$ and $f[i - 1][0] - prices[i]$, i.e., $f[i][1] = \max(f[i - 1][1], f[i - 1][0] - prices[i])$. The final answer is $f[n - 1][0]$.
      </p>
      <p>
       The time complexity is $O(n)$, and the space complexity is $O(n)$. Here, $n$ is the length of the array $prices$.
      </p>
      <p>
       We notice that the transition of the state $f[i][]$ only depends on $f[i - 1][]$ and $f[i - 2][]$. Therefore, we can use two variables $f_0$ and $f_1$ to replace the array $f$, reducing the space complexity to $O(1)$.
      </p>
      <p>
       <strong>
        Solution 3: Greedy
       </strong>
      </p>
      <h5 id="variables">
       Variables
      </h5>
      <ul>
       <li>
        <code class="language-plaintext highlighter-rouge">
         f1
        </code>
        : Represents the maximum profit that can be achieved up to the current day with the last operation being a buy or hold after a buy. Itâs initialized to
        <code class="language-plaintext highlighter-rouge">
         -prices[0]
        </code>
        because if we buy the stock on the first day, our profit is negative (the cost of the stock).
       </li>
       <li>
        <code class="language-plaintext highlighter-rouge">
         f2
        </code>
        : Represents the maximum profit that can be achieved up to the current day with the last operation being a sell or hold after a sell. Itâs initialized to
        <code class="language-plaintext highlighter-rouge">
         0
        </code>
        because we havenât made any transactions yet.
       </li>
      </ul>
      <h5 id="logic">
       Logic
      </h5>
      <p>
       The idea is to iterate through each dayâs price after the first day, updating
       <code class="language-plaintext highlighter-rouge">
        f1
       </code>
       and
       <code class="language-plaintext highlighter-rouge">
        f2
       </code>
       to reflect the maximum profit that can be achieved up to that day.
      </p>
      <ol>
       <li>
        <strong>
         Updating
         <code class="language-plaintext highlighter-rouge">
          f1
         </code>
         (Buy or Hold after Buy)
        </strong>
        :
        <ul>
         <li>
          <code class="language-plaintext highlighter-rouge">
           f1
          </code>
          is updated to be the maximum of itself (
          <code class="language-plaintext highlighter-rouge">
           f1
          </code>
          ) or
          <code class="language-plaintext highlighter-rouge">
           f2 - price
          </code>
          .
         </li>
         <li>
          <code class="language-plaintext highlighter-rouge">
           f1
          </code>
          (staying in the buy state) means we are not making any new transactions; weâre just carrying forward the profit (or loss) from the previous day.
         </li>
         <li>
          <code class="language-plaintext highlighter-rouge">
           f2 - price
          </code>
          means we are considering a new buy on this day. We subtract the current dayâs price from
          <code class="language-plaintext highlighter-rouge">
           f2
          </code>
          , the best profit we could have after a sell up to the previous day, to reflect the cost of this buy.
         </li>
         <li>
          This comparison ensures that
          <code class="language-plaintext highlighter-rouge">
           f1
          </code>
          represents the best profit achievable by either continuing to hold a stock or buying anew.
         </li>
        </ul>
       </li>
       <li>
        <strong>
         Updating
         <code class="language-plaintext highlighter-rouge">
          f2
         </code>
         (Sell or Hold after Sell)
        </strong>
        :
        <ul>
         <li>
          <code class="language-plaintext highlighter-rouge">
           f2
          </code>
          is updated to be the maximum of itself (
          <code class="language-plaintext highlighter-rouge">
           f2
          </code>
          ) or
          <code class="language-plaintext highlighter-rouge">
           f1 + price - fee
          </code>
          .
         </li>
         <li>
          <code class="language-plaintext highlighter-rouge">
           f2
          </code>
          (staying in the sell state) means we are not making any new transactions; weâre just carrying forward the profit from the previous day.
         </li>
         <li>
          <code class="language-plaintext highlighter-rouge">
           f1 + price - fee
          </code>
          means we are considering a sell on this day. We add the current dayâs price to
          <code class="language-plaintext highlighter-rouge">
           f1
          </code>
          , the best profit we could have with the last operation being a buy, and subtract the transaction fee to reflect the cost of this sell.
         </li>
         <li>
          This comparison ensures that
          <code class="language-plaintext highlighter-rouge">
           f2
          </code>
          represents the best profit achievable by either continuing to hold after a sell or selling the stock.
         </li>
        </ul>
       </li>
      </ol>
      <h5 id="return-value">
       Return Value
      </h5>
      <ul>
       <li>
        After iterating through all prices,
        <code class="language-plaintext highlighter-rouge">
         f2
        </code>
        will represent the maximum profit achievable by the end of the last day, with the last operation being a sell or hold after a sell. Therefore,
        <code class="language-plaintext highlighter-rouge">
         f2
        </code>
        is returned as the solution.
       </li>
      </ul>
      <ul class="uk-tab" data-uk-switcher="{connect:'#f77da077-ef4a-497e-998e-9591e6e41db1'}">
       <li class="uk-active">
        <a href="solution-714.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-714.html">
         C++
        </a>
       </li>
       <li>
        <a href="solution-714.html">
         Python
        </a>
       </li>
       <li>
        <a href="solution-714.html">
         Go
        </a>
       </li>
       <li>
        <a href="solution-714.html">
         TypeScript
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="f77da077-ef4a-497e-998e-9591e6e41db1">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">maxProfit</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">prices</span><span class="o">,</span> <span class="kt">int</span> <span class="n">fee</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">f0</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">f1</span> <span class="o">=</span> <span class="o">-</span><span class="n">prices</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">prices</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">g0</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">f0</span><span class="o">,</span> <span class="n">f1</span> <span class="o">+</span> <span class="n">prices</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">-</span> <span class="n">fee</span><span class="o">);</span>
            <span class="n">f1</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">f1</span><span class="o">,</span> <span class="n">f0</span> <span class="o">-</span> <span class="n">prices</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
            <span class="n">f0</span> <span class="o">=</span> <span class="n">g0</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">f0</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-cpp highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">int</span> <span class="n">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prices</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fee</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">f</span><span class="p">));</span>
        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">fee</span><span class="p">);</span>
            <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-py highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">maxProfit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">fee</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span> <span class="o">=</span> <span class="o">-</span><span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">price</span> <span class="ow">in</span> <span class="n">prices</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">f1</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span> <span class="o">-</span> <span class="n">price</span><span class="p">)</span>
            <span class="n">f2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">f2</span><span class="p">,</span> <span class="n">f1</span> <span class="o">+</span> <span class="n">price</span> <span class="o">-</span> <span class="n">fee</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">f2</span>

<span class="c1">############
</span>
<span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">maxProfit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">fee</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">f0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">prices</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">f0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">f0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">+</span> <span class="n">x</span> <span class="o">-</span> <span class="n">fee</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f0</span> <span class="o">-</span> <span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">f0</span>

<span class="c1">############
</span>
<span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">maxProfit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">fee</span><span class="p">):</span>
        <span class="s">"""
        :type prices: List[int]
        :type fee: int
        :rtype: int
        """</span>
        <span class="n">cash</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">hold</span> <span class="o">=</span> <span class="o">-</span><span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)):</span>
            <span class="n">cash</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">cash</span><span class="p">,</span> <span class="n">hold</span> <span class="o">+</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">fee</span><span class="p">)</span>
            <span class="n">hold</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">hold</span><span class="p">,</span> <span class="n">cash</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">cash</span>

</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-go highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">func</span> <span class="n">maxProfit</span><span class="p">(</span><span class="n">prices</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">fee</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="n">f0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">:=</span> <span class="m">0</span><span class="p">,</span> <span class="o">-</span><span class="n">prices</span><span class="p">[</span><span class="m">0</span><span class="p">]</span>
	<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">x</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">prices</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="p">]</span> <span class="p">{</span>
		<span class="n">f0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f0</span><span class="p">,</span> <span class="n">f1</span><span class="o">+</span><span class="n">x</span><span class="o">-</span><span class="n">fee</span><span class="p">),</span> <span class="n">max</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f0</span><span class="o">-</span><span class="n">x</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">f0</span>
<span class="p">}</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-ts highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">function</span> <span class="nx">maxProfit</span><span class="p">(</span><span class="nx">prices</span><span class="p">:</span> <span class="kr">number</span><span class="p">[],</span> <span class="nx">fee</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">prices</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">let</span> <span class="p">[</span><span class="nx">f0</span><span class="p">,</span> <span class="nx">f1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="nx">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">]];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">x</span> <span class="k">of</span> <span class="nx">prices</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
        <span class="p">[</span><span class="nx">f0</span><span class="p">,</span> <span class="nx">f1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">f0</span><span class="p">,</span> <span class="nx">f1</span> <span class="o">+</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">fee</span><span class="p">),</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">f1</span><span class="p">,</span> <span class="nx">f0</span> <span class="o">-</span> <span class="nx">x</span><span class="p">)];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">f0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-714.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
