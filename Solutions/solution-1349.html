<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-1349.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-1349.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>1349 - Maximum Students Taking Exam</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode 1349. Maximum Students Taking Exam Description Given a m&amp;nbsp;* n&amp;nbsp;matrix seats&amp;nbsp;&amp;nbsp;that represent seats distributions&amp;nbsp;in a classroom.&amp;nbsp;If a seat&amp;nbsp;is&amp;nbsp;broken, it is denoted by &amp;#39;#&amp;#39; character otherwise it is denoted by a &amp;#39;.&amp;#39; character. Students can see the answers of those sitting next to the left, right,...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-1349.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-1349.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-1349.html" rel="stylesheet"/>
   <link href="solution-1349.html" rel="stylesheet"/>
   <link href="solution-1349.html" rel="stylesheet"/>
   <link href="solution-1349.html" rel="stylesheet"/>
   <link href="solution-1349.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="1349 - Maximum Students Taking Exam" property="og:title"/>
   <meta content="Leetcode 1349. Maximum Students Taking Exam Description Given a m&amp;nbsp;* n&amp;nbsp;matrix seats&amp;nbsp;&amp;nbsp;that represent seats distributions&amp;nbsp;in a classroom.&amp;nbsp;If a seat&amp;nbsp;is&amp;nbsp;broken, it is denoted by &amp;#39;#&amp;#39; character otherwise it is denoted by a &amp;#39;.&amp;#39; character. Students can see the answers of those sitting next to the left, right, upper left and upper right, but he cannot see the answers of the student sitting&amp;nbsp;directly in front or behind him. Return the maximum number of students that can take the exam together&amp;nbsp;without any cheating being possible. Students must be placed in seats in good condition. &amp;nbsp; Example 1: Input: seats = [[&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;], &amp;nbsp; [&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;], &amp;nbsp; [&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;]] Output: 4 Explanation: Teacher can place 4 students in available seats so they don&amp;#39;t cheat on the exam. Example 2: Input: seats = [[&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;], &amp;nbsp; [&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;], &amp;nbsp; [&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;], &amp;nbsp; [&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;], &amp;nbsp; [&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;]] Output: 3 Explanation: Place all students in available seats. Example 3: Input: seats = [[&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;], &amp;nbsp; [&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;], &amp;nbsp; [&amp;quot;.&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;.&amp;quot;], &amp;nbsp; [&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;], &amp;nbsp; [&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;]] Output: 10 Explanation: Place students in available seats in column 1, 3 and 5. &amp;nbsp; Constraints: seats&amp;nbsp;contains only characters&amp;nbsp;&amp;#39;.&amp;#39;&amp;nbsp;and&amp;#39;#&amp;#39;. m ==&amp;nbsp;seats.length n ==&amp;nbsp;seats[i].length 1 &amp;lt;= m &amp;lt;= 8 1 &amp;lt;= n &amp;lt;= 8 Solutions Solution 1: State Compression + Memoization Search We notice that each seat has two states: selectable and non-selectable. Therefore, we can use a binary number to represent the seat state of each row, where $1$ represents selectable, and $0$ represents non-selectable. For example, for the first row in Example 1, we can represent it as $010010$. Therefore, we convert the initial seats into a one-dimensional array $ss$, where $ss[i]$ represents the seat state of the $i$th row. Next, we design a function $dfs(seat, i)$, which represents the maximum number of students that can be accommodated starting from the $i$th row, and the seat state of the current row is $seat$. We can enumerate all the seat selection states $mask$ of the $i$th row, and judge whether $mask$ meets the following conditions: The state $mask$ cannot select seats outside of $seat$; The state $mask$ cannot select adjacent seats. If the conditions are met, we calculate the number of seats selected in the current row $cnt$. If it is the last row, update the return value of the function, that is, $ans = \max(ans, cnt)$. Otherwise, we continue to recursively solve the maximum number of the next row. The seat state of the next row is $nxt = ss[i + 1]$, and we need to exclude the left and right sides of the selected seats in the current row. Then we recursively solve the maximum number of the next row, that is, $ans = \max(ans, cnt + dfs(nxt, i + 1))$. Finally, we return $ans$ as the return value of the function. To avoid repeated calculations, we can use memoization search to save the return value of the function $dfs(seat, i)$ in a two-dimensional array $f$, where $f[seat][i]$ represents the maximum number of students that can be accommodated starting from the $i$th row, and the seat state..." property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2019-08-10T00:00:00-07:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2019-08-10-1349-Maximum-Students-Taking-Exam/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-1349.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="1349 - Maximum Students Taking Exam" property="twitter:title"/>
   <meta content="Leetcode 1349. Maximum Students Taking Exam Description Given a m&amp;nbsp;* n&amp;nbsp;matrix seats&amp;nbsp;&amp;nbsp;that represent seats distributions&amp;nbsp;in a classroom.&amp;nbsp;If a seat&amp;nbsp;is&amp;nbsp;broken, it is denoted by &amp;#39;#&amp;#39; character otherwise it is denoted by a &amp;#39;.&amp;#39; character. Students can see the answers of those sitting next to the left, right, upper left and upper right, but he cannot see the answers of the student sitting&amp;nbsp;directly in front or behind him. Return the maximum number of students that can take the exam together&amp;nbsp;without any cheating being possible. Students must be placed in seats in good condition. &amp;nbsp; Example 1: Input: seats = [[&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;], &amp;nbsp; [&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;], &amp;nbsp; [&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;]] Output: 4 Explanation: Teacher can place 4 students in available seats so they don&amp;#39;t cheat on the exam. Example 2: Input: seats = [[&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;], &amp;nbsp; [&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;], &amp;nbsp; [&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;], &amp;nbsp; [&amp;quot;#&amp;quot;,&amp;quot;#&amp;quot;], &amp;nbsp; [&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;]] Output: 3 Explanation: Place all students in available seats. Example 3: Input: seats = [[&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;], &amp;nbsp; [&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;], &amp;nbsp; [&amp;quot;.&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;.&amp;quot;], &amp;nbsp; [&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;], &amp;nbsp; [&amp;quot;#&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;.&amp;quot;,&amp;quot;#&amp;quot;]] Output: 10 Explanation: Place students in available seats in column 1, 3 and 5. &amp;nbsp; Constraints: seats&amp;nbsp;contains only characters&amp;nbsp;&amp;#39;.&amp;#39;&amp;nbsp;and&amp;#39;#&amp;#39;. m ==&amp;nbsp;seats.length n ==&amp;nbsp;seats[i].length 1 &amp;lt;= m &amp;lt;= 8 1 &amp;lt;= n &amp;lt;= 8 Solutions Solution 1: State Compression + Memoization Search We notice that each seat has two states: selectable and non-selectable. Therefore, we can use a binary number to represent the seat state of each row, where $1$ represents selectable, and $0$ represents non-selectable. For example, for the first row in Example 1, we can represent it as $010010$. Therefore, we convert the initial seats into a one-dimensional array $ss$, where $ss[i]$ represents the seat state of the $i$th row. Next, we design a function $dfs(seat, i)$, which represents the maximum number of students that can be accommodated starting from the $i$th row, and the seat state of the current row is $seat$. We can enumerate all the seat selection states $mask$ of the $i$th row, and judge whether $mask$ meets the following conditions: The state $mask$ cannot select seats outside of $seat$; The state $mask$ cannot select adjacent seats. If the conditions are met, we calculate the number of seats selected in the current row $cnt$. If it is the last row, update the return value of the function, that is, $ans = \max(ans, cnt)$. Otherwise, we continue to recursively solve the maximum number of the next row. The seat state of the next row is $nxt = ss[i + 1]$, and we need to exclude the left and right sides of the selected seats in the current row. Then we recursively solve the maximum number of the next row, that is, $ans = \max(ans, cnt + dfs(nxt, i + 1))$. Finally, we return $ans$ as the return value of the function. To avoid repeated calculations, we can use memoization search to save the return value of the function $dfs(seat, i)$ in a two-dimensional array $f$, where $f[seat][i]$ represents the maximum number of students that can be accommodated starting from the $i$th row, and the seat state..." property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    1349 - Maximum Students Taking Exam | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="1349 - Maximum Students Taking Exam" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-1349.html" rel="canonical">
          <meta content="https://leetcode.ca/2019-08-10-1349-Maximum-Students-Taking-Exam/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2019-08-10T00:00:00-07:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"1349 - Maximum Students Taking Exam","dateModified":"2019-08-10T00:00:00-07:00","datePublished":"2019-08-10T00:00:00-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2019-08-10-1349-Maximum-Students-Taking-Exam/"},"url":"https://leetcode.ca/2019-08-10-1349-Maximum-Students-Taking-Exam/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <h1 id="1349-maximum-students-taking-exam">
       <a href="solution-1349.html">
        1349. Maximum Students Taking Exam
       </a>
      </h1>
      <h2 id="description">
       Description
      </h2>
      <p>
       Given a
       <code>
        m * n
       </code>
       matrix
       <code>
        seats
       </code>
       that represent seats distributions in a classroom. If a seat is broken, it is denoted by
       <code>
        '#'
       </code>
       character otherwise it is denoted by a
       <code>
        '.'
       </code>
       character.
      </p>
      <p>
       Students can see the answers of those sitting next to the left, right, upper left and upper right, but he cannot see the answers of the student sitting directly in front or behind him. Return the
       <strong>
        maximum
       </strong>
       number of students that can take the exam together without any cheating being possible.
      </p>
      <p>
       Students must be placed in seats in good condition.
      </p>
      <p>
      </p>
      <p>
       <strong class="example">
        Example 1:
       </strong>
      </p>
      <p>
       <img height="200" src="https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1300-1399/1349.Maximum%20Students%20Taking%20Exam/images/image.png" width="339"/>
      </p>
      <pre>
<strong>Input:</strong> seats = [["#",".","#","#",".","#"],
                [".","#","#","#","#","."],
                ["#",".","#","#",".","#"]]
<strong>Output:</strong> 4
<strong>Explanation:</strong> Teacher can place 4 students in available seats so they don't cheat on the exam. 
</pre>
      <p>
       <strong class="example">
        Example 2:
       </strong>
      </p>
      <pre>
<strong>Input:</strong> seats = [[".","#"],
                ["#","#"],
                ["#","."],
                ["#","#"],
                [".","#"]]
<strong>Output:</strong> 3
<strong>Explanation:</strong> Place all students in available seats. 

</pre>
      <p>
       <strong class="example">
        Example 3:
       </strong>
      </p>
      <pre>
<strong>Input:</strong> seats = [["#",".","<strong>.</strong>",".","#"],
                ["<strong>.</strong>","#","<strong>.</strong>","#","<strong>.</strong>"],
                ["<strong>.</strong>",".","#",".","<strong>.</strong>"],
                ["<strong>.</strong>","#","<strong>.</strong>","#","<strong>.</strong>"],
                ["#",".","<strong>.</strong>",".","#"]]
<strong>Output:</strong> 10
<strong>Explanation:</strong> Place students in available seats in column 1, 3 and 5.
</pre>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         seats
        </code>
        contains only characters
        <code>
         '.'
         <font face="sans-serif, Arial, Verdana, Trebuchet MS">
          and
         </font>
        </code>
        <code>
         '#'.
        </code>
       </li>
       <li>
        <code>
         m == seats.length
        </code>
       </li>
       <li>
        <code>
         n == seats[i].length
        </code>
       </li>
       <li>
        <code>
         1 &lt;= m &lt;= 8
        </code>
       </li>
       <li>
        <code>
         1 &lt;= n &lt;= 8
        </code>
       </li>
      </ul>
      <h2 id="solutions">
       Solutions
      </h2>
      <p>
       <strong>
        Solution 1: State Compression + Memoization Search
       </strong>
      </p>
      <p>
       We notice that each seat has two states: selectable and non-selectable. Therefore, we can use a binary number to represent the seat state of each row, where $1$ represents selectable, and $0$ represents non-selectable. For example, for the first row in Example 1, we can represent it as $010010$. Therefore, we convert the initial seats into a one-dimensional array $ss$, where $ss[i]$ represents the seat state of the $i$th row.
      </p>
      <p>
       Next, we design a function $dfs(seat, i)$, which represents the maximum number of students that can be accommodated starting from the $i$th row, and the seat state of the current row is $seat$.
      </p>
      <p>
       We can enumerate all the seat selection states $mask$ of the $i$th row, and judge whether $mask$ meets the following conditions:
      </p>
      <ul>
       <li>
        The state $mask$ cannot select seats outside of $seat$;
       </li>
       <li>
        The state $mask$ cannot select adjacent seats.
       </li>
      </ul>
      <p>
       If the conditions are met, we calculate the number of seats selected in the current row $cnt$. If it is the last row, update the return value of the function, that is, $ans = \max(ans, cnt)$. Otherwise, we continue to recursively solve the maximum number of the next row. The seat state of the next row is $nxt = ss[i + 1]$, and we need to exclude the left and right sides of the selected seats in the current row. Then we recursively solve the maximum number of the next row, that is, $ans = \max(ans, cnt + dfs(nxt, i + 1))$.
      </p>
      <p>
       Finally, we return $ans$ as the return value of the function.
      </p>
      <p>
       To avoid repeated calculations, we can use memoization search to save the return value of the function $dfs(seat, i)$ in a two-dimensional array $f$, where $f[seat][i]$ represents the maximum number of students that can be accommodated starting from the $i$th row, and the seat state of the current row is $seat$.
      </p>
      <p>
       The time complexity is $O(4^n \times n \times m)$, and the space complexity is $O(2^n \times m)$. Where $m$ and $n$ are the number of rows and columns of the seats, respectively.
      </p>
      <ul class="uk-tab" data-uk-switcher="{connect:'#debcf7d7-edac-49da-aafc-696eb7eb99ca'}">
       <li class="uk-active">
        <a href="solution-1349.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-1349.html">
         C++
        </a>
       </li>
       <li>
        <a href="solution-1349.html">
         Python
        </a>
       </li>
       <li>
        <a href="solution-1349.html">
         Go
        </a>
       </li>
       <li>
        <a href="solution-1349.html">
         TypeScript
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="debcf7d7-edac-49da-aafc-696eb7eb99ca">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Integer</span><span class="o">[][]</span> <span class="n">f</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">n</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">ss</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">maxStudents</span><span class="o">(</span><span class="kt">char</span><span class="o">[][]</span> <span class="n">seats</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">seats</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">seats</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">length</span><span class="o">;</span>
        <span class="n">ss</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">m</span><span class="o">];</span>
        <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Integer</span><span class="o">[</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="o">][</span><span class="n">m</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="o">++</span><span class="n">j</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">seats</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">==</span> <span class="sc">'.'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">ss</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">j</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="nf">dfs</span><span class="o">(</span><span class="n">ss</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="mi">0</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="nf">dfs</span><span class="o">(</span><span class="kt">int</span> <span class="n">seat</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">f</span><span class="o">[</span><span class="n">seat</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">f</span><span class="o">[</span><span class="n">seat</span><span class="o">][</span><span class="n">i</span><span class="o">];</span>
        <span class="o">}</span>
        <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">mask</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">mask</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="o">++</span><span class="n">mask</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">((</span><span class="n">seat</span> <span class="o">|</span> <span class="n">mask</span><span class="o">)</span> <span class="o">!=</span> <span class="n">seat</span> <span class="o">||</span> <span class="o">(</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="o">(</span><span class="n">mask</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="o">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">continue</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">bitCount</span><span class="o">(</span><span class="n">mask</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">ss</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">ans</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">ans</span><span class="o">,</span> <span class="n">cnt</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">nxt</span> <span class="o">=</span> <span class="n">ss</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
                <span class="n">nxt</span> <span class="o">&amp;=</span> <span class="o">~(</span><span class="n">mask</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="o">);</span>
                <span class="n">nxt</span> <span class="o">&amp;=</span> <span class="o">~(</span><span class="n">mask</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="o">);</span>
                <span class="n">ans</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">ans</span><span class="o">,</span> <span class="n">cnt</span> <span class="o">+</span> <span class="n">dfs</span><span class="o">(</span><span class="n">nxt</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">f</span><span class="o">[</span><span class="n">seat</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">ans</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-cpp highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">int</span> <span class="n">maxStudents</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;&gt;&amp;</span> <span class="n">seats</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">seats</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">seats</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ss</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">));</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">seats</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'.'</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">ss</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">j</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">function</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">dfs</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="kt">int</span> <span class="n">seat</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">seat</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">seat</span><span class="p">][</span><span class="n">i</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">mask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">mask</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">mask</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">((</span><span class="n">seat</span> <span class="o">|</span> <span class="n">mask</span><span class="p">)</span> <span class="o">!=</span> <span class="n">seat</span> <span class="o">||</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">continue</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="n">__builtin_popcount</span><span class="p">(</span><span class="n">mask</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">cnt</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="kt">int</span> <span class="n">nxt</span> <span class="o">=</span> <span class="n">ss</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
                    <span class="n">nxt</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="n">mask</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">);</span>
                    <span class="n">nxt</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="n">mask</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">);</span>
                    <span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">cnt</span> <span class="o">+</span> <span class="n">dfs</span><span class="p">(</span><span class="n">nxt</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">seat</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ans</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">ss</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-py highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">maxStudents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seats</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">seat</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">seat</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="s">'.'</span><span class="p">:</span>
                    <span class="n">mask</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">i</span>
            <span class="k">return</span> <span class="n">mask</span>

        <span class="o">@</span><span class="n">cache</span>
        <span class="k">def</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">seat</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
            <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">mask</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">seat</span> <span class="o">|</span> <span class="n">mask</span><span class="p">)</span> <span class="o">!=</span> <span class="n">seat</span> <span class="ow">or</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)):</span>
                    <span class="k">continue</span>
                <span class="n">cnt</span> <span class="o">=</span> <span class="n">mask</span><span class="p">.</span><span class="n">bit_count</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">ss</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">ans</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">cnt</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">nxt</span> <span class="o">=</span> <span class="n">ss</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="n">nxt</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="n">mask</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="n">nxt</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="n">mask</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="n">ans</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">cnt</span> <span class="o">+</span> <span class="n">dfs</span><span class="p">(</span><span class="n">nxt</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">ans</span>

        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">seats</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">ss</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">seats</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">ss</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-go highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">func</span> <span class="n">maxStudents</span><span class="p">(</span><span class="n">seats</span> <span class="p">[][]</span><span class="kt">byte</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="n">seats</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">seats</span><span class="p">[</span><span class="m">0</span><span class="p">])</span>
	<span class="n">ss</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
	<span class="n">f</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([][]</span><span class="kt">int</span><span class="p">,</span> <span class="m">1</span><span class="o">&lt;&lt;</span><span class="n">n</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">seat</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">seats</span> <span class="p">{</span>
		<span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">c</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">seat</span> <span class="p">{</span>
			<span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="sc">'.'</span> <span class="p">{</span>
				<span class="n">ss</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">|=</span> <span class="m">1</span> <span class="o">&lt;&lt;</span> <span class="n">j</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">f</span> <span class="p">{</span>
		<span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">j</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">{</span>
			<span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="m">1</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">var</span> <span class="n">dfs</span> <span class="k">func</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span>
	<span class="n">dfs</span> <span class="o">=</span> <span class="k">func</span><span class="p">(</span><span class="n">seat</span><span class="p">,</span> <span class="n">i</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
		<span class="k">if</span> <span class="n">f</span><span class="p">[</span><span class="n">seat</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="m">1</span> <span class="p">{</span>
			<span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">seat</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
		<span class="p">}</span>
		<span class="n">ans</span> <span class="o">:=</span> <span class="m">0</span>
		<span class="k">for</span> <span class="n">mask</span> <span class="o">:=</span> <span class="m">0</span><span class="p">;</span> <span class="n">mask</span> <span class="o">&lt;</span> <span class="m">1</span><span class="o">&lt;&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">mask</span><span class="o">++</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">seat</span><span class="o">|</span><span class="n">mask</span><span class="p">)</span> <span class="o">!=</span> <span class="n">seat</span> <span class="o">||</span> <span class="p">(</span><span class="n">mask</span><span class="o">&amp;</span><span class="p">(</span><span class="n">mask</span><span class="o">&lt;&lt;</span><span class="m">1</span><span class="p">))</span> <span class="o">!=</span> <span class="m">0</span> <span class="p">{</span>
				<span class="k">continue</span>
			<span class="p">}</span>
			<span class="n">cnt</span> <span class="o">:=</span> <span class="n">bits</span><span class="o">.</span><span class="n">OnesCount</span><span class="p">(</span><span class="kt">uint</span><span class="p">(</span><span class="n">mask</span><span class="p">))</span>
			<span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">m</span><span class="o">-</span><span class="m">1</span> <span class="p">{</span>
				<span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">cnt</span><span class="p">)</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="n">nxt</span> <span class="o">:=</span> <span class="n">ss</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="m">1</span><span class="p">]</span> <span class="o">&amp;</span> <span class="o">^</span><span class="p">(</span><span class="n">mask</span> <span class="o">&gt;&gt;</span> <span class="m">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">^</span><span class="p">(</span><span class="n">mask</span> <span class="o">&lt;&lt;</span> <span class="m">1</span><span class="p">)</span>
				<span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">cnt</span><span class="o">+</span><span class="n">dfs</span><span class="p">(</span><span class="n">nxt</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="m">1</span><span class="p">))</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="n">f</span><span class="p">[</span><span class="n">seat</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ans</span>
		<span class="k">return</span> <span class="n">ans</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">ss</span><span class="p">[</span><span class="m">0</span><span class="p">],</span> <span class="m">0</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-ts highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">function</span> <span class="nx">maxStudents</span><span class="p">(</span><span class="nx">seats</span><span class="p">:</span> <span class="kr">string</span><span class="p">[][]):</span> <span class="kr">number</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">m</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="nx">seats</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">n</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="nx">seats</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">ss</span><span class="p">:</span> <span class="kr">number</span><span class="p">[]</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">m</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">f</span><span class="p">:</span> <span class="kr">number</span><span class="p">[][]</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">({</span> <span class="na">length</span><span class="p">:</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="nx">n</span> <span class="p">},</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">m</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">));</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">seats</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">.</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">ss</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="nx">j</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">const</span> <span class="nx">dfs</span> <span class="o">=</span> <span class="p">(</span><span class="nx">seat</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">i</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">f</span><span class="p">[</span><span class="nx">seat</span><span class="p">][</span><span class="nx">i</span><span class="p">]</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">f</span><span class="p">[</span><span class="nx">seat</span><span class="p">][</span><span class="nx">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="kd">let</span> <span class="na">ans</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">mask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">mask</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">mask</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">((</span><span class="nx">seat</span> <span class="o">|</span> <span class="nx">mask</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">seat</span> <span class="o">||</span> <span class="p">(</span><span class="nx">mask</span> <span class="o">&amp;</span> <span class="p">(</span><span class="nx">mask</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">))</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="kd">const</span> <span class="na">cnt</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="nx">mask</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">).</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">===</span> <span class="nx">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">ans</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">ans</span><span class="p">,</span> <span class="nx">cnt</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="na">nxt</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="nx">ss</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
                <span class="nx">nxt</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="nx">mask</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">);</span>
                <span class="nx">nxt</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="nx">mask</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">);</span>
                <span class="nx">ans</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">ans</span><span class="p">,</span> <span class="nx">cnt</span> <span class="o">+</span> <span class="nx">dfs</span><span class="p">(</span><span class="nx">nxt</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">f</span><span class="p">[</span><span class="nx">seat</span><span class="p">][</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ans</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">dfs</span><span class="p">(</span><span class="nx">ss</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-1349.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
