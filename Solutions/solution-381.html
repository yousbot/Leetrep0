<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-381.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-381.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>381 - Insert Delete GetRandom O(1) - Duplicates allowed</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode 381. Insert Delete GetRandom O(1) - Duplicates allowed Description RandomizedCollection is a data structure that contains a collection of numbers, possibly duplicates (i.e., a multiset). It should support inserting and removing specific elements and also reporting a random element. Implement the RandomizedCollection class: RandomizedCollection() Initializes...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-381.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-381.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-381.html" rel="stylesheet"/>
   <link href="solution-381.html" rel="stylesheet"/>
   <link href="solution-381.html" rel="stylesheet"/>
   <link href="solution-381.html" rel="stylesheet"/>
   <link href="solution-381.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="381 - Insert Delete GetRandom O(1) - Duplicates allowed" property="og:title"/>
   <meta content="Leetcode 381. Insert Delete GetRandom O(1) - Duplicates allowed Description RandomizedCollection is a data structure that contains a collection of numbers, possibly duplicates (i.e., a multiset). It should support inserting and removing specific elements and also reporting a random element. Implement the RandomizedCollection class: RandomizedCollection() Initializes the empty RandomizedCollection object. bool insert(int val) Inserts an item val into the multiset, even if the item is already present. Returns true if the item is not present, false otherwise. bool remove(int val) Removes an item val from the multiset if present. Returns true if the item is present, false otherwise. Note that if val has multiple occurrences in the multiset, we only remove one of them. int getRandom() Returns a random element from the current multiset of elements. The probability of each element being returned is linearly related to the number of the same values the multiset contains. You must implement the functions of the class such that each function works on average O(1) time complexity. Note: The test cases are generated such that getRandom will only be called if there is at least one item in the RandomizedCollection. &amp;nbsp; Example 1: Input [&amp;quot;RandomizedCollection&amp;quot;, &amp;quot;insert&amp;quot;, &amp;quot;insert&amp;quot;, &amp;quot;insert&amp;quot;, &amp;quot;getRandom&amp;quot;, &amp;quot;remove&amp;quot;, &amp;quot;getRandom&amp;quot;] [[], [1], [1], [2], [], [1], []] Output [null, true, false, true, 2, true, 1] Explanation RandomizedCollection randomizedCollection = new RandomizedCollection(); randomizedCollection.insert(1); // return true since the collection does not contain 1. // Inserts 1 into the collection. randomizedCollection.insert(1); // return false since the collection contains 1. // Inserts another 1 into the collection. Collection now contains [1,1]. randomizedCollection.insert(2); // return true since the collection does not contain 2. // Inserts 2 into the collection. Collection now contains [1,1,2]. randomizedCollection.getRandom(); // getRandom should: // - return 1 with probability 2/3, or // - return 2 with probability 1/3. randomizedCollection.remove(1); // return true since the collection contains 1. // Removes 1 from the collection. Collection now contains [1,2]. randomizedCollection.getRandom(); // getRandom should return 1 or 2, both equally likely. &amp;nbsp; Constraints: -231 &amp;lt;= val &amp;lt;= 231 - 1 At most 2 * 105 calls in total will be made to insert, remove, and getRandom. There will be at least one element in the data structure when getRandom is called. Solutions For the insert() function, we add the position of the number to be inserted in nums to the end of the m[val] array, and then add val to the end of the array nums. We judge whether there is a duplication as long as the m[val] array has only one value of val just added or there are multiple values. The remove() function is the difficulty of this problem. First, letâs see if there is a val in the HashMap, and if not, return false directly. Then we take the tail element of nums, and update the last position in the position array of the tail element HashMap to the tail element of m[val], so that we can delete the tail element of m[val]. If m[val] there is only..." property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2016-12-15T00:00:00-08:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2016-12-15-381-Insert-Delete-GetRandom-O(1)-Duplicates-allowed/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-381.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="381 - Insert Delete GetRandom O(1) - Duplicates allowed" property="twitter:title"/>
   <meta content="Leetcode 381. Insert Delete GetRandom O(1) - Duplicates allowed Description RandomizedCollection is a data structure that contains a collection of numbers, possibly duplicates (i.e., a multiset). It should support inserting and removing specific elements and also reporting a random element. Implement the RandomizedCollection class: RandomizedCollection() Initializes the empty RandomizedCollection object. bool insert(int val) Inserts an item val into the multiset, even if the item is already present. Returns true if the item is not present, false otherwise. bool remove(int val) Removes an item val from the multiset if present. Returns true if the item is present, false otherwise. Note that if val has multiple occurrences in the multiset, we only remove one of them. int getRandom() Returns a random element from the current multiset of elements. The probability of each element being returned is linearly related to the number of the same values the multiset contains. You must implement the functions of the class such that each function works on average O(1) time complexity. Note: The test cases are generated such that getRandom will only be called if there is at least one item in the RandomizedCollection. &amp;nbsp; Example 1: Input [&amp;quot;RandomizedCollection&amp;quot;, &amp;quot;insert&amp;quot;, &amp;quot;insert&amp;quot;, &amp;quot;insert&amp;quot;, &amp;quot;getRandom&amp;quot;, &amp;quot;remove&amp;quot;, &amp;quot;getRandom&amp;quot;] [[], [1], [1], [2], [], [1], []] Output [null, true, false, true, 2, true, 1] Explanation RandomizedCollection randomizedCollection = new RandomizedCollection(); randomizedCollection.insert(1); // return true since the collection does not contain 1. // Inserts 1 into the collection. randomizedCollection.insert(1); // return false since the collection contains 1. // Inserts another 1 into the collection. Collection now contains [1,1]. randomizedCollection.insert(2); // return true since the collection does not contain 2. // Inserts 2 into the collection. Collection now contains [1,1,2]. randomizedCollection.getRandom(); // getRandom should: // - return 1 with probability 2/3, or // - return 2 with probability 1/3. randomizedCollection.remove(1); // return true since the collection contains 1. // Removes 1 from the collection. Collection now contains [1,2]. randomizedCollection.getRandom(); // getRandom should return 1 or 2, both equally likely. &amp;nbsp; Constraints: -231 &amp;lt;= val &amp;lt;= 231 - 1 At most 2 * 105 calls in total will be made to insert, remove, and getRandom. There will be at least one element in the data structure when getRandom is called. Solutions For the insert() function, we add the position of the number to be inserted in nums to the end of the m[val] array, and then add val to the end of the array nums. We judge whether there is a duplication as long as the m[val] array has only one value of val just added or there are multiple values. The remove() function is the difficulty of this problem. First, letâs see if there is a val in the HashMap, and if not, return false directly. Then we take the tail element of nums, and update the last position in the position array of the tail element HashMap to the tail element of m[val], so that we can delete the tail element of m[val]. If m[val] there is only..." property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    381 - Insert Delete GetRandom O(1) - Duplicates allowed | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="381 - Insert Delete GetRandom O(1) - Duplicates allowed" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-381.html" rel="canonical">
          <meta content="https://leetcode.ca/2016-12-15-381-Insert-Delete-GetRandom-O(1)-Duplicates-allowed/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2016-12-15T00:00:00-08:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"381 - Insert Delete GetRandom O(1) - Duplicates allowed","dateModified":"2016-12-15T00:00:00-08:00","datePublished":"2016-12-15T00:00:00-08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2016-12-15-381-Insert-Delete-GetRandom-O(1)-Duplicates-allowed/"},"url":"https://leetcode.ca/2016-12-15-381-Insert-Delete-GetRandom-O(1)-Duplicates-allowed/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <h1 id="381-insert-delete-getrandom-o1---duplicates-allowed">
       <a href="solution-381.html">
        381. Insert Delete GetRandom O(1) - Duplicates allowed
       </a>
      </h1>
      <h2 id="description">
       Description
      </h2>
      <p>
       <code>
        RandomizedCollection
       </code>
       is a data structure that contains a collection of numbers, possibly duplicates (i.e., a multiset). It should support inserting and removing specific elements and also reporting a random element.
      </p>
      <p>
       Implement the
       <code>
        RandomizedCollection
       </code>
       class:
      </p>
      <ul>
       <li>
        <code>
         RandomizedCollection()
        </code>
        Initializes the empty
        <code>
         RandomizedCollection
        </code>
        object.
       </li>
       <li>
        <code>
         bool insert(int val)
        </code>
        Inserts an item
        <code>
         val
        </code>
        into the multiset, even if the item is already present. Returns
        <code>
         true
        </code>
        if the item is not present,
        <code>
         false
        </code>
        otherwise.
       </li>
       <li>
        <code>
         bool remove(int val)
        </code>
        Removes an item
        <code>
         val
        </code>
        from the multiset if present. Returns
        <code>
         true
        </code>
        if the item is present,
        <code>
         false
        </code>
        otherwise. Note that if
        <code>
         val
        </code>
        has multiple occurrences in the multiset, we only remove one of them.
       </li>
       <li>
        <code>
         int getRandom()
        </code>
        Returns a random element from the current multiset of elements. The probability of each element being returned is
        <strong>
         linearly related
        </strong>
        to the number of the same values the multiset contains.
       </li>
      </ul>
      <p>
       You must implement the functions of the class such that each function works on
       <strong>
        average
       </strong>
       <code>
        O(1)
       </code>
       time complexity.
      </p>
      <p>
       <strong>
        Note:
       </strong>
       The test cases are generated such that
       <code>
        getRandom
       </code>
       will only be called if there is
       <strong>
        at least one
       </strong>
       item in the
       <code>
        RandomizedCollection
       </code>
       .
      </p>
      <p>
      </p>
      <p>
       <strong class="example">
        Example 1:
       </strong>
      </p>
      <pre>
<strong>Input</strong>
["RandomizedCollection", "insert", "insert", "insert", "getRandom", "remove", "getRandom"]
[[], [1], [1], [2], [], [1], []]
<strong>Output</strong>
[null, true, false, true, 2, true, 1]

<strong>Explanation</strong>
RandomizedCollection randomizedCollection = new RandomizedCollection();
randomizedCollection.insert(1);   // return true since the collection does not contain 1.
                                  // Inserts 1 into the collection.
randomizedCollection.insert(1);   // return false since the collection contains 1.
                                  // Inserts another 1 into the collection. Collection now contains [1,1].
randomizedCollection.insert(2);   // return true since the collection does not contain 2.
                                  // Inserts 2 into the collection. Collection now contains [1,1,2].
randomizedCollection.getRandom(); // getRandom should:
                                  // - return 1 with probability 2/3, or
                                  // - return 2 with probability 1/3.
randomizedCollection.remove(1);   // return true since the collection contains 1.
                                  // Removes 1 from the collection. Collection now contains [1,2].
randomizedCollection.getRandom(); // getRandom should return 1 or 2, both equally likely.
</pre>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         -2
         <sup>
          31
         </sup>
         &lt;= val &lt;= 2
         <sup>
          31
         </sup>
         - 1
        </code>
       </li>
       <li>
        At most
        <code>
         2 * 10
         <sup>
          5
         </sup>
        </code>
        calls
        <strong>
         in total
        </strong>
        will be made to
        <code>
         insert
        </code>
        ,
        <code>
         remove
        </code>
        , and
        <code>
         getRandom
        </code>
        .
       </li>
       <li>
        There will be
        <strong>
         at least one
        </strong>
        element in the data structure when
        <code>
         getRandom
        </code>
        is called.
       </li>
      </ul>
      <h2 id="solutions">
       Solutions
      </h2>
      <p>
       For the
       <code class="language-plaintext highlighter-rouge">
        insert()
       </code>
       function, we add the position of the number to be inserted in nums to the end of the
       <code class="language-plaintext highlighter-rouge">
        m[val]
       </code>
       array, and then add val to the end of the array nums.
We judge whether there is a duplication as long as the
       <code class="language-plaintext highlighter-rouge">
        m[val]
       </code>
       array has only one value of val just added or there are multiple values.
      </p>
      <p>
       The
       <code class="language-plaintext highlighter-rouge">
        remove()
       </code>
       function is the difficulty of this problem. First, letâs see if there is a val in the HashMap, and if not, return false directly.
      </p>
      <p>
       Then we take the tail element of nums, and update the last position in the position array of the tail element HashMap to the tail element of
       <code class="language-plaintext highlighter-rouge">
        m[val]
       </code>
       , so that we can delete the tail element of
       <code class="language-plaintext highlighter-rouge">
        m[val]
       </code>
       . If
       <code class="language-plaintext highlighter-rouge">
        m[val]
       </code>
       there is only one element, then we delete this mapping directly. Then delete the tail element in the nums array and assign the tail element to the position of val.
      </p>
      <ul>
       <li>
        Note that we need to use a heap instead of a normal vector array when building the mapping of HashMap
       </li>
      </ul>
      <p>
       We use the priority queue to automatically sort all the coordinates of the same number, and move out the coordinates of the largest position each time.
      </p>
      <ul class="uk-tab" data-uk-switcher="{connect:'#ae00a4aa-5c4c-42db-aeaf-8ca646f6a7c4'}">
       <li class="uk-active">
        <a href="solution-381.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-381.html">
         Python
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="ae00a4aa-5c4c-42db-aeaf-8ca646f6a7c4">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">RandomizedCollection</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;&gt;</span> <span class="n">m</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">l</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Random</span> <span class="n">rnd</span><span class="o">;</span>

    <span class="cm">/** Initialize your data structure here. */</span>
    <span class="kd">public</span> <span class="nf">RandomizedCollection</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">l</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="n">rnd</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Random</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="cm">/**
     * Inserts a value to the collection. Returns true if the collection did not already contain
     * the specified element.
     */</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">insert</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">m</span><span class="o">.</span><span class="na">computeIfAbsent</span><span class="o">(</span><span class="n">val</span><span class="o">,</span> <span class="n">k</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;()).</span><span class="na">add</span><span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
        <span class="n">l</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">val</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">val</span><span class="o">).</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**
     * Removes a value from the collection. Returns true if the collection contained the specified
     * element.
     */</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">remove</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">m</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">val</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">idxSet</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">val</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">idxSet</span><span class="o">.</span><span class="na">iterator</span><span class="o">().</span><span class="na">next</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">lastIdx</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
        <span class="n">l</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">idx</span><span class="o">,</span> <span class="n">l</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">lastIdx</span><span class="o">));</span>
        <span class="n">idxSet</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">idx</span><span class="o">);</span>

        <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">lastIdxSet</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">lastIdx</span><span class="o">));</span>
        <span class="n">lastIdxSet</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">lastIdx</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">idx</span> <span class="o">&lt;</span> <span class="n">lastIdx</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">lastIdxSet</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">idx</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">idxSet</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">m</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">val</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">l</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">lastIdx</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/** Get a random element from the collection. */</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getRandom</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="n">l</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">rnd</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">size</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/**
 * Your RandomizedCollection object will be instantiated and called as such:
 * RandomizedCollection obj = new RandomizedCollection();
 * boolean param_1 = obj.insert(val);
 * boolean param_2 = obj.remove(val);
 * int param_3 = obj.getRandom();
 */</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-py highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choice</span>

<span class="k">class</span> <span class="nc">RandomizedCollection</span><span class="p">:</span> <span class="c1"># official solution
</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""
        Initialize your data structure here.
        """</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">lst</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="p">.</span><span class="nb">dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span> <span class="c1"># change from 381 (with no duplicates)
</span>

    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="s">"""
        Inserts a value to the collection. Returns true if the collection did not already contain the specified element.
        """</span>
        <span class="bp">self</span><span class="p">.</span><span class="nb">dict</span><span class="p">[</span><span class="n">val</span><span class="p">].</span><span class="n">add</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">lst</span><span class="p">))</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">lst</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="nb">dict</span><span class="p">[</span><span class="n">val</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>


    <span class="s">'''
        &gt;&gt;&gt; a = set([1,1,2,3])
        &gt;&gt;&gt; a
        {1, 2, 3}
        &gt;&gt;&gt; a.pop()
        1
        &gt;&gt;&gt; a
        {2, 3}
    '''</span>
    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="s">"""
        Removes a value from the collection. Returns true if the collection contained the specified element.
        """</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">.</span><span class="nb">dict</span><span class="p">[</span><span class="n">val</span><span class="p">]:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">remove_index</span><span class="p">,</span> <span class="n">last_val</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="nb">dict</span><span class="p">[</span><span class="n">val</span><span class="p">].</span><span class="n">pop</span><span class="p">(),</span> <span class="bp">self</span><span class="p">.</span><span class="n">lst</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># pop() on a set
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">lst</span><span class="p">[</span><span class="n">remove_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_val</span>
        <span class="bp">self</span><span class="p">.</span><span class="nb">dict</span><span class="p">[</span><span class="n">last_val</span><span class="p">].</span><span class="n">add</span><span class="p">(</span><span class="n">remove_index</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="nb">dict</span><span class="p">[</span><span class="n">last_val</span><span class="p">].</span><span class="n">discard</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">lst</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="p">.</span><span class="n">lst</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">True</span>


    <span class="k">def</span> <span class="nf">getRandom</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="s">"""
        Get a random element from the collection.
        """</span>
        <span class="k">return</span> <span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">lst</span><span class="p">)</span>

<span class="c1"># Your RandomizedCollection object will be instantiated and called as such:
# obj = RandomizedCollection()
# param_1 = obj.insert(val)
# param_2 = obj.remove(val)
# param_3 = obj.getRandom()
</span>

</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-381.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
