<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-1728.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-1728.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>1728 - Cat and Mouse II</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode Formatted question description: https://leetcode.ca/all/1728.html 1728. Cat and Mouse II Level Hard Description A game is played by a cat and a mouse named Cat and Mouse. The environment is represented by a grid of size rows x cols, where each element is a wall, floor,...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-1728.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-1728.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-1728.html" rel="stylesheet"/>
   <link href="solution-1728.html" rel="stylesheet"/>
   <link href="solution-1728.html" rel="stylesheet"/>
   <link href="solution-1728.html" rel="stylesheet"/>
   <link href="solution-1728.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="1728 - Cat and Mouse II" property="og:title"/>
   <meta content="Leetcode Formatted question description: https://leetcode.ca/all/1728.html 1728. Cat and Mouse II Level Hard Description A game is played by a cat and a mouse named Cat and Mouse. The environment is represented by a grid of size rows x cols, where each element is a wall, floor, player (Cat, Mouse), or food. Players are represented by the characters 'C'(Cat), 'M'(Mouse). Floors are represented by the character '.' and can be walked on. Walls are represented by the character '#' and cannot be walked on. Food is represented by the character 'F' and can be walked on. There is only one of each character 'C', 'M', and 'F' in grid. Mouse and Cat play according to the following rules: Mouse moves first, then they take turns to move. During each turn, Cat and Mouse can jump in one of the four directions (left, right, up, down). They cannot jump over the wall nor outside of the grid. catJump, mouseJump are the maximum lengths Cat and Mouse can jump at a time, respectively. Cat and Mouse can jump less than the maximum length. Staying in the same position is allowed. Mouse can jump over Cat. The game can end in 4 ways: If Cat occupies the same position as Mouse, Cat wins. If Cat reaches the food first, Cat wins. If Mouse reaches the food first, Mouse wins. If Mouse cannot get to the food within 1000 turns, Cat wins. Given a rows x cols matrix grid and two integers catJump and mouseJump, return true if Mouse can win the game if both Cat and Mouse play optimally, otherwise return false. Example 1: Input: grid = [â####Fâ,â#Câ¦â,âMâ¦.â], catJump = 1, mouseJump = 2 Output: true Explanation: Cat cannot catch Mouse on its turn nor can it get the food before Mouse. Example 2: Input: grid = [âM.Câ¦Fâ], catJump = 1, mouseJump = 4 Output: true Example 3: Input: grid = [âM.Câ¦Fâ], catJump = 1, mouseJump = 3 Output: false Example 4: Input: grid = [âCâ¦#â,ââ¦#Fâ,ââ¦.#â,âMâ¦.â], catJump = 2, mouseJump = 5 Output: false Example 5: Input: grid = [â.Mâ¦â,â..#..â,â#..#.â,âC#.#.â,ââ¦#Fâ], catJump = 3, mouseJump = 1 Output: true Constraints: rows == grid.length cols = grid[i].length 1 &amp;lt;= rows, cols &amp;lt;= 8 grid[i][j] consist only of characters 'C', 'M', 'F', '.', and '#'. There is only one of each character 'C', 'M', and 'F' in grid. 1 &amp;lt;= catJump, mouseJump &amp;lt;= 8 Solution Use topological sort. There are five dimensions, which are the catâs row, the catâs column, the mouseâs row, the mouseâs column, and the turn (0 for mouse to move, and 1 for cat to move). First, loop over grid and obtain the positions of the cat, the mouse and the food. Next, for all the positions that are not walls, obtain the neighbors of each position for the cat and the mouse. A neighbor is a positions such that it can be reached in one move. Use a 5D array game to store the results, where game[catRow][catColumn][mouseRow][mouseColumn][turn] represents..." property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2021-03-11T21:21:01-08:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2021-03-11-1728-Cat-and-Mouse-II/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-1728.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="1728 - Cat and Mouse II" property="twitter:title"/>
   <meta content="Leetcode Formatted question description: https://leetcode.ca/all/1728.html 1728. Cat and Mouse II Level Hard Description A game is played by a cat and a mouse named Cat and Mouse. The environment is represented by a grid of size rows x cols, where each element is a wall, floor, player (Cat, Mouse), or food. Players are represented by the characters 'C'(Cat), 'M'(Mouse). Floors are represented by the character '.' and can be walked on. Walls are represented by the character '#' and cannot be walked on. Food is represented by the character 'F' and can be walked on. There is only one of each character 'C', 'M', and 'F' in grid. Mouse and Cat play according to the following rules: Mouse moves first, then they take turns to move. During each turn, Cat and Mouse can jump in one of the four directions (left, right, up, down). They cannot jump over the wall nor outside of the grid. catJump, mouseJump are the maximum lengths Cat and Mouse can jump at a time, respectively. Cat and Mouse can jump less than the maximum length. Staying in the same position is allowed. Mouse can jump over Cat. The game can end in 4 ways: If Cat occupies the same position as Mouse, Cat wins. If Cat reaches the food first, Cat wins. If Mouse reaches the food first, Mouse wins. If Mouse cannot get to the food within 1000 turns, Cat wins. Given a rows x cols matrix grid and two integers catJump and mouseJump, return true if Mouse can win the game if both Cat and Mouse play optimally, otherwise return false. Example 1: Input: grid = [â####Fâ,â#Câ¦â,âMâ¦.â], catJump = 1, mouseJump = 2 Output: true Explanation: Cat cannot catch Mouse on its turn nor can it get the food before Mouse. Example 2: Input: grid = [âM.Câ¦Fâ], catJump = 1, mouseJump = 4 Output: true Example 3: Input: grid = [âM.Câ¦Fâ], catJump = 1, mouseJump = 3 Output: false Example 4: Input: grid = [âCâ¦#â,ââ¦#Fâ,ââ¦.#â,âMâ¦.â], catJump = 2, mouseJump = 5 Output: false Example 5: Input: grid = [â.Mâ¦â,â..#..â,â#..#.â,âC#.#.â,ââ¦#Fâ], catJump = 3, mouseJump = 1 Output: true Constraints: rows == grid.length cols = grid[i].length 1 &amp;lt;= rows, cols &amp;lt;= 8 grid[i][j] consist only of characters 'C', 'M', 'F', '.', and '#'. There is only one of each character 'C', 'M', and 'F' in grid. 1 &amp;lt;= catJump, mouseJump &amp;lt;= 8 Solution Use topological sort. There are five dimensions, which are the catâs row, the catâs column, the mouseâs row, the mouseâs column, and the turn (0 for mouse to move, and 1 for cat to move). First, loop over grid and obtain the positions of the cat, the mouse and the food. Next, for all the positions that are not walls, obtain the neighbors of each position for the cat and the mouse. A neighbor is a positions such that it can be reached in one move. Use a 5D array game to store the results, where game[catRow][catColumn][mouseRow][mouseColumn][turn] represents..." property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    1728 - Cat and Mouse II | Leetcode
   </title>
   <meta content="Jekyll v3.9.4" name="generator">
    <meta content="1728 - Cat and Mouse II" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-1728.html" rel="canonical">
          <meta content="https://leetcode.ca/2021-03-11-1728-Cat-and-Mouse-II/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2021-03-11T21:21:01-08:00" property="article:published_time">
              <script type="application/ld+json">
               {"headline":"1728 - Cat and Mouse II","dateModified":"2021-03-11T21:21:01-08:00","datePublished":"2021-03-11T21:21:01-08:00","description":"Leetcode","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2021-03-11-1728-Cat-and-Mouse-II/"},"url":"https://leetcode.ca/2021-03-11-1728-Cat-and-Mouse-II/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCDRuzBvLGzyVvgPyohrahrA" data-count="hidden" data-layout="full">
      </div>
      <p>
       Formatted question description:
       <a href="solution-1728.html">
        https://leetcode.ca/all/1728.html
       </a>
      </p>
      <h1 id="1728-cat-and-mouse-ii">
       1728. Cat and Mouse II
      </h1>
      <h2 id="level">
       Level
      </h2>
      <p>
       Hard
      </p>
      <h2 id="description">
       Description
      </h2>
      <p>
       A game is played by a cat and a mouse named Cat and Mouse.
      </p>
      <p>
       The environment is represented by a
       <code class="language-plaintext highlighter-rouge">
        grid
       </code>
       of size
       <code class="language-plaintext highlighter-rouge">
        rows x cols
       </code>
       , where each element is a wall, floor, player (Cat, Mouse), or food.
      </p>
      <ul>
       <li>
        Players are represented by the characters
        <code class="language-plaintext highlighter-rouge">
         'C'
        </code>
        (Cat),
        <code class="language-plaintext highlighter-rouge">
         'M'
        </code>
        (Mouse).
       </li>
       <li>
        Floors are represented by the character
        <code class="language-plaintext highlighter-rouge">
         '.'
        </code>
        and can be walked on.
       </li>
       <li>
        Walls are represented by the character
        <code class="language-plaintext highlighter-rouge">
         '#'
        </code>
        and cannot be walked on.
       </li>
       <li>
        Food is represented by the character
        <code class="language-plaintext highlighter-rouge">
         'F'
        </code>
        and can be walked on.
       </li>
       <li>
        There is only one of each character
        <code class="language-plaintext highlighter-rouge">
         'C'
        </code>
        ,
        <code class="language-plaintext highlighter-rouge">
         'M'
        </code>
        , and
        <code class="language-plaintext highlighter-rouge">
         'F'
        </code>
        in grid.
       </li>
      </ul>
      <p>
       Mouse and Cat play according to the following rules:
      </p>
      <ul>
       <li>
        Mouse
        <strong>
         moves first
        </strong>
        , then they take turns to move.
       </li>
       <li>
        During each turn, Cat and Mouse can jump in one of the four directions (left, right, up, down). They cannot jump over the wall nor outside of the
        <code class="language-plaintext highlighter-rouge">
         grid
        </code>
        .
       </li>
       <li>
        <code class="language-plaintext highlighter-rouge">
         catJump, mouseJump
        </code>
        are the maximum lengths Cat and Mouse can jump at a time, respectively. Cat and Mouse can jump less than the maximum length.
       </li>
       <li>
        Staying in the same position is allowed.
       </li>
       <li>
        Mouse can jump over Cat.
       </li>
      </ul>
      <p>
       The game can end in 4 ways:
      </p>
      <ul>
       <li>
        If Cat occupies the same position as Mouse, Cat wins.
       </li>
       <li>
        If Cat reaches the food first, Cat wins.
       </li>
       <li>
        If Mouse reaches the food first, Mouse wins.
       </li>
       <li>
        If Mouse cannot get to the food within 1000 turns, Cat wins.
       </li>
      </ul>
      <p>
       Given a
       <code class="language-plaintext highlighter-rouge">
        rows x cols
       </code>
       matrix
       <code class="language-plaintext highlighter-rouge">
        grid
       </code>
       and two integers
       <code class="language-plaintext highlighter-rouge">
        catJump
       </code>
       and
       <code class="language-plaintext highlighter-rouge">
        mouseJump
       </code>
       , return
       <code class="language-plaintext highlighter-rouge">
        true
       </code>
       <em>
        if Mouse can win the game if both Cat and Mouse play optimally, otherwise return
       </em>
       <code class="language-plaintext highlighter-rouge">
        false
       </code>
       .
      </p>
      <p>
       <strong>
        Example 1:
       </strong>
      </p>
      <p>
       <img alt="Image text" src="https://assets.leetcode.com/uploads/2020/09/12/sample_111_1955.png"/>
      </p>
      <p>
       <strong>
        Input:
       </strong>
       grid = [â####Fâ,â#Câ¦â,âMâ¦.â], catJump = 1, mouseJump = 2
      </p>
      <p>
       <strong>
        Output:
       </strong>
       true
      </p>
      <p>
       <strong>
        Explanation:
       </strong>
       Cat cannot catch Mouse on its turn nor can it get the food before Mouse.
      </p>
      <p>
       <strong>
        Example 2:
       </strong>
      </p>
      <p>
       <img alt="Image text" src="https://assets.leetcode.com/uploads/2020/09/12/sample_2_1955.png"/>
      </p>
      <p>
       <strong>
        Input:
       </strong>
       grid = [âM.Câ¦Fâ], catJump = 1, mouseJump = 4
      </p>
      <p>
       <strong>
        Output:
       </strong>
       true
      </p>
      <p>
       <strong>
        Example 3:
       </strong>
      </p>
      <p>
       <strong>
        Input:
       </strong>
       grid = [âM.Câ¦Fâ], catJump = 1, mouseJump = 3
      </p>
      <p>
       <strong>
        Output:
       </strong>
       false
      </p>
      <p>
       <strong>
        Example 4:
       </strong>
      </p>
      <p>
       <strong>
        Input:
       </strong>
       grid = [âCâ¦#â,ââ¦#Fâ,ââ¦.#â,âMâ¦.â], catJump = 2, mouseJump = 5
      </p>
      <p>
       <strong>
        Output:
       </strong>
       false
      </p>
      <p>
       <strong>
        Example 5:
       </strong>
      </p>
      <p>
       <strong>
        Input:
       </strong>
       grid = [â.Mâ¦â,â..#..â,â#..#.â,âC#.#.â,ââ¦#Fâ], catJump = 3, mouseJump = 1
      </p>
      <p>
       <strong>
        Output:
       </strong>
       true
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code class="language-plaintext highlighter-rouge">
         rows == grid.length
        </code>
       </li>
       <li>
        <code class="language-plaintext highlighter-rouge">
         cols = grid[i].length
        </code>
       </li>
       <li>
        <code class="language-plaintext highlighter-rouge">
         1 &lt;= rows, cols &lt;= 8
        </code>
       </li>
       <li>
        <code class="language-plaintext highlighter-rouge">
         grid[i][j]
        </code>
        consist only of characters
        <code class="language-plaintext highlighter-rouge">
         'C'
        </code>
        ,
        <code class="language-plaintext highlighter-rouge">
         'M'
        </code>
        ,
        <code class="language-plaintext highlighter-rouge">
         'F'
        </code>
        ,
        <code class="language-plaintext highlighter-rouge">
         '.'
        </code>
        , and
        <code class="language-plaintext highlighter-rouge">
         '#'
        </code>
        .
       </li>
       <li>
        There is only one of each character
        <code class="language-plaintext highlighter-rouge">
         'C'
        </code>
        ,
        <code class="language-plaintext highlighter-rouge">
         'M'
        </code>
        , and
        <code class="language-plaintext highlighter-rouge">
         'F'
        </code>
        in
        <code class="language-plaintext highlighter-rouge">
         grid
        </code>
        .
       </li>
       <li>
        <code class="language-plaintext highlighter-rouge">
         1 &lt;= catJump, mouseJump &lt;= 8
        </code>
       </li>
      </ul>
      <h2 id="solution">
       Solution
      </h2>
      <p>
       Use topological sort. There are five dimensions, which are the catâs row, the catâs column, the mouseâs row, the mouseâs column, and the turn (0 for mouse to move, and 1 for cat to move).
      </p>
      <p>
       First, loop over
       <code class="language-plaintext highlighter-rouge">
        grid
       </code>
       and obtain the positions of the cat, the mouse and the food. Next, for all the positions that are not walls, obtain the neighbors of each position for the cat and the mouse. A neighbor is a positions such that it can be reached in one move.
      </p>
      <p>
       Use a 5D array
       <code class="language-plaintext highlighter-rouge">
        game
       </code>
       to store the results, where
       <code class="language-plaintext highlighter-rouge">
        game[catRow][catColumn][mouseRow][mouseColumn][turn]
       </code>
       represents the result of the current player when the cat is at
       <code class="language-plaintext highlighter-rouge">
        (catRow, catColumn)
       </code>
       , the mouse is at
       <code class="language-plaintext highlighter-rouge">
        (mouseRow, mouseColumn)
       </code>
       and the turn is
       <code class="language-plaintext highlighter-rouge">
        turn
       </code>
       . The element is 1 when the current player can win, and the element is -1 when the current player is determined to lose.
      </p>
      <p>
       Do topological sort from the states where the cat and the mouse are at the same position, and the states where either the cat or the mouse is at the position of the food.
      </p>
      <p>
       Finally, return whether
       <code class="language-plaintext highlighter-rouge">
        game[startCatRow][startCatColumn][startMouseRow][startMouseColumn][0]
       </code>
       equals 1, where the dimensionsâ meanings were mentioned above.
      </p>
      <ul class="uk-tab" data-uk-switcher="{connect:'#955670c3-8d4b-47c8-907f-58a8f7c0cd62'}">
       <li class="uk-active">
        <a href="solution-1728.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-1728.html">
         Python
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="955670c3-8d4b-47c8-907f-58a8f7c0cd62">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">rows</span><span class="o">,</span> <span class="n">columns</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">canMouseWin</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">grid</span><span class="o">,</span> <span class="kt">int</span> <span class="n">catJump</span><span class="o">,</span> <span class="kt">int</span> <span class="n">mouseJump</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">grid</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">length</span><span class="o">();</span>
        <span class="kt">int</span><span class="o">[][][][][]</span> <span class="n">degrees</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">rows</span><span class="o">][</span><span class="n">columns</span><span class="o">][</span><span class="n">rows</span><span class="o">][</span><span class="n">columns</span><span class="o">][</span><span class="mi">2</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">startCatRow</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">startCatColumn</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">startMouseRow</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">startMouseColumn</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">foodRow</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">foodColumn</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">rows</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">row</span> <span class="o">=</span> <span class="n">grid</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">columns</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span><span class="o">)</span> <span class="o">==</span> <span class="sc">'C'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">startCatRow</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
                    <span class="n">startCatColumn</span> <span class="o">=</span> <span class="n">j</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span><span class="o">)</span> <span class="o">==</span> <span class="sc">'M'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">startMouseRow</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
                    <span class="n">startMouseColumn</span> <span class="o">=</span> <span class="n">j</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span><span class="o">)</span> <span class="o">==</span> <span class="sc">'F'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">foodRow</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
                    <span class="n">foodColumn</span> <span class="o">=</span> <span class="n">j</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">rows</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">row</span> <span class="o">=</span> <span class="n">grid</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">columns</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span><span class="o">)</span> <span class="o">!=</span> <span class="sc">'#'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">rows</span><span class="o">;</span> <span class="n">k</span><span class="o">++)</span> <span class="o">{</span>
                        <span class="nc">String</span> <span class="n">row2</span> <span class="o">=</span> <span class="n">grid</span><span class="o">[</span><span class="n">k</span><span class="o">];</span>
                        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">m</span> <span class="o">&lt;</span> <span class="n">columns</span><span class="o">;</span> <span class="n">m</span><span class="o">++)</span> <span class="o">{</span>
                            <span class="k">if</span> <span class="o">(</span><span class="n">row2</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">m</span><span class="o">)</span> <span class="o">!=</span> <span class="sc">'#'</span><span class="o">)</span> <span class="o">{</span>
                                <span class="n">degrees</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">][</span><span class="n">m</span><span class="o">][</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="n">getNeighbors</span><span class="o">(</span><span class="n">grid</span><span class="o">,</span> <span class="n">k</span><span class="o">,</span> <span class="n">m</span><span class="o">,</span> <span class="n">mouseJump</span><span class="o">).</span><span class="na">size</span><span class="o">();</span>
                                <span class="n">degrees</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">][</span><span class="n">m</span><span class="o">][</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">getNeighbors</span><span class="o">(</span><span class="n">grid</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">,</span> <span class="n">catJump</span><span class="o">).</span><span class="na">size</span><span class="o">();</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="kt">int</span><span class="o">[][][][][]</span> <span class="n">game</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">rows</span><span class="o">][</span><span class="n">columns</span><span class="o">][</span><span class="n">rows</span><span class="o">][</span><span class="n">columns</span><span class="o">][</span><span class="mi">2</span><span class="o">];</span>
        <span class="nc">Queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;</span> <span class="n">queue</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedList</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">rows</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">row</span> <span class="o">=</span> <span class="n">grid</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">columns</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span><span class="o">)</span> <span class="o">!=</span> <span class="sc">'#'</span> <span class="o">&amp;&amp;</span> <span class="n">row</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span><span class="o">)</span> <span class="o">!=</span> <span class="sc">'F'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">game</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">][</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">][</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
                    <span class="n">game</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">][</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">][</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
                    <span class="n">queue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">,</span> <span class="mi">0</span><span class="o">});</span>
                    <span class="n">queue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">,</span> <span class="mi">1</span><span class="o">});</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">rows</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">row</span> <span class="o">=</span> <span class="n">grid</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">columns</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span><span class="o">)</span> <span class="o">!=</span> <span class="sc">'#'</span> <span class="o">&amp;&amp;</span> <span class="n">row</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span><span class="o">)</span> <span class="o">!=</span> <span class="sc">'F'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">game</span><span class="o">[</span><span class="n">foodRow</span><span class="o">][</span><span class="n">foodColumn</span><span class="o">][</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">][</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
                    <span class="n">game</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">][</span><span class="n">foodRow</span><span class="o">][</span><span class="n">foodColumn</span><span class="o">][</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
                    <span class="n">queue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">foodRow</span><span class="o">,</span> <span class="n">foodColumn</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">,</span> <span class="mi">0</span><span class="o">});</span>
                    <span class="n">queue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">,</span> <span class="n">foodRow</span><span class="o">,</span> <span class="n">foodColumn</span><span class="o">,</span> <span class="mi">1</span><span class="o">});</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">while</span> <span class="o">(!</span><span class="n">queue</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="kt">int</span><span class="o">[]</span> <span class="n">state</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
            <span class="kt">int</span> <span class="n">catRow</span> <span class="o">=</span> <span class="n">state</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">catColumn</span> <span class="o">=</span> <span class="n">state</span><span class="o">[</span><span class="mi">1</span><span class="o">],</span> <span class="n">mouseRow</span> <span class="o">=</span> <span class="n">state</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span> <span class="n">mouseColumn</span> <span class="o">=</span> <span class="n">state</span><span class="o">[</span><span class="mi">3</span><span class="o">],</span> <span class="n">turn</span> <span class="o">=</span> <span class="n">state</span><span class="o">[</span><span class="mi">4</span><span class="o">];</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">turn</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;</span> <span class="n">neighbors</span> <span class="o">=</span> <span class="n">getNeighbors</span><span class="o">(</span><span class="n">grid</span><span class="o">,</span> <span class="n">catRow</span><span class="o">,</span> <span class="n">catColumn</span><span class="o">,</span> <span class="n">catJump</span><span class="o">);</span>
                <span class="k">for</span> <span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">neighbor</span> <span class="o">:</span> <span class="n">neighbors</span><span class="o">)</span> <span class="o">{</span>
                    <span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="n">neighbor</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">column</span> <span class="o">=</span> <span class="n">neighbor</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
                    <span class="n">degrees</span><span class="o">[</span><span class="n">row</span><span class="o">][</span><span class="n">column</span><span class="o">][</span><span class="n">mouseRow</span><span class="o">][</span><span class="n">mouseColumn</span><span class="o">][</span><span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">]--;</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">game</span><span class="o">[</span><span class="n">row</span><span class="o">][</span><span class="n">column</span><span class="o">][</span><span class="n">mouseRow</span><span class="o">][</span><span class="n">mouseColumn</span><span class="o">][</span><span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">if</span> <span class="o">(</span><span class="n">game</span><span class="o">[</span><span class="n">catRow</span><span class="o">][</span><span class="n">catColumn</span><span class="o">][</span><span class="n">mouseRow</span><span class="o">][</span><span class="n">mouseColumn</span><span class="o">][</span><span class="n">turn</span><span class="o">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">game</span><span class="o">[</span><span class="n">row</span><span class="o">][</span><span class="n">column</span><span class="o">][</span><span class="n">mouseRow</span><span class="o">][</span><span class="n">mouseColumn</span><span class="o">][</span><span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
                            <span class="n">queue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">row</span><span class="o">,</span> <span class="n">column</span><span class="o">,</span> <span class="n">mouseRow</span><span class="o">,</span> <span class="n">mouseColumn</span><span class="o">,</span> <span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">});</span>
                        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">degrees</span><span class="o">[</span><span class="n">row</span><span class="o">][</span><span class="n">column</span><span class="o">][</span><span class="n">mouseRow</span><span class="o">][</span><span class="n">mouseColumn</span><span class="o">][</span><span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">game</span><span class="o">[</span><span class="n">row</span><span class="o">][</span><span class="n">column</span><span class="o">][</span><span class="n">mouseRow</span><span class="o">][</span><span class="n">mouseColumn</span><span class="o">][</span><span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
                            <span class="n">queue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">row</span><span class="o">,</span> <span class="n">column</span><span class="o">,</span> <span class="n">mouseRow</span><span class="o">,</span> <span class="n">mouseColumn</span><span class="o">,</span> <span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">});</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="nc">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;</span> <span class="n">neighbors</span> <span class="o">=</span> <span class="n">getNeighbors</span><span class="o">(</span><span class="n">grid</span><span class="o">,</span> <span class="n">mouseRow</span><span class="o">,</span> <span class="n">mouseColumn</span><span class="o">,</span> <span class="n">mouseJump</span><span class="o">);</span>
                <span class="k">for</span> <span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">neighbor</span> <span class="o">:</span> <span class="n">neighbors</span><span class="o">)</span> <span class="o">{</span>
                    <span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="n">neighbor</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">column</span> <span class="o">=</span> <span class="n">neighbor</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
                    <span class="n">degrees</span><span class="o">[</span><span class="n">catRow</span><span class="o">][</span><span class="n">catColumn</span><span class="o">][</span><span class="n">row</span><span class="o">][</span><span class="n">column</span><span class="o">][</span><span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">]--;</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">game</span><span class="o">[</span><span class="n">catRow</span><span class="o">][</span><span class="n">catColumn</span><span class="o">][</span><span class="n">row</span><span class="o">][</span><span class="n">column</span><span class="o">][</span><span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">if</span> <span class="o">(</span><span class="n">game</span><span class="o">[</span><span class="n">catRow</span><span class="o">][</span><span class="n">catColumn</span><span class="o">][</span><span class="n">mouseRow</span><span class="o">][</span><span class="n">mouseColumn</span><span class="o">][</span><span class="n">turn</span><span class="o">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">game</span><span class="o">[</span><span class="n">catRow</span><span class="o">][</span><span class="n">catColumn</span><span class="o">][</span><span class="n">row</span><span class="o">][</span><span class="n">column</span><span class="o">][</span><span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
                            <span class="n">queue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">catRow</span><span class="o">,</span> <span class="n">catColumn</span><span class="o">,</span> <span class="n">row</span><span class="o">,</span> <span class="n">column</span><span class="o">,</span> <span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">});</span>
                        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">degrees</span><span class="o">[</span><span class="n">catRow</span><span class="o">][</span><span class="n">catColumn</span><span class="o">][</span><span class="n">row</span><span class="o">][</span><span class="n">column</span><span class="o">][</span><span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">game</span><span class="o">[</span><span class="n">catRow</span><span class="o">][</span><span class="n">catColumn</span><span class="o">][</span><span class="n">row</span><span class="o">][</span><span class="n">column</span><span class="o">][</span><span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
                            <span class="n">queue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">catRow</span><span class="o">,</span> <span class="n">catColumn</span><span class="o">,</span> <span class="n">row</span><span class="o">,</span> <span class="n">column</span><span class="o">,</span> <span class="n">turn</span> <span class="o">^</span> <span class="mi">1</span><span class="o">});</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">game</span><span class="o">[</span><span class="n">startCatRow</span><span class="o">][</span><span class="n">startCatColumn</span><span class="o">][</span><span class="n">startMouseRow</span><span class="o">][</span><span class="n">startMouseColumn</span><span class="o">][</span><span class="mi">0</span><span class="o">]</span> <span class="o">==</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;</span> <span class="nf">getNeighbors</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">grid</span><span class="o">,</span> <span class="kt">int</span> <span class="n">row</span><span class="o">,</span> <span class="kt">int</span> <span class="n">column</span><span class="o">,</span> <span class="kt">int</span> <span class="n">maxJump</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;</span> <span class="n">neighbors</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;();</span>
        <span class="n">neighbors</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">row</span><span class="o">,</span> <span class="n">column</span><span class="o">});</span>
        <span class="kt">int</span><span class="o">[][]</span> <span class="n">directions</span> <span class="o">=</span> <span class="o">{</span> <span class="o">{-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">},</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">},</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">},</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">}</span> <span class="o">};</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">direction</span> <span class="o">:</span> <span class="n">directions</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">curRow</span> <span class="o">=</span> <span class="n">row</span><span class="o">,</span> <span class="n">curColumn</span> <span class="o">=</span> <span class="n">column</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">maxJump</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">curRow</span> <span class="o">+=</span> <span class="n">direction</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
                <span class="n">curColumn</span> <span class="o">+=</span> <span class="n">direction</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">curRow</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">curRow</span> <span class="o">&gt;=</span> <span class="n">rows</span> <span class="o">||</span> <span class="n">curColumn</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">curColumn</span> <span class="o">&gt;=</span> <span class="n">columns</span> <span class="o">||</span> <span class="n">grid</span><span class="o">[</span><span class="n">curRow</span><span class="o">].</span><span class="na">charAt</span><span class="o">(</span><span class="n">curColumn</span><span class="o">)</span> <span class="o">==</span> <span class="sc">'#'</span><span class="o">)</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="n">neighbors</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">curRow</span><span class="o">,</span> <span class="n">curColumn</span><span class="o">});</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">neighbors</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-py highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">canMouseWin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grid</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">catJump</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">mouseJump</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">dirs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">m</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">nFloors</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">cat</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># cat's position
</span>        <span class="n">mouse</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># mouse's position
</span>
        <span class="k">def</span> <span class="nf">hash</span><span class="p">(</span><span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">i</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="n">j</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="s">"#"</span><span class="p">:</span>
                    <span class="n">nFloors</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="s">"C"</span><span class="p">:</span>
                    <span class="n">cat</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="s">"M"</span><span class="p">:</span>
                    <span class="n">mouse</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>

        <span class="c1"># dp(i, j, k) := True if mouse can win w//
</span>        <span class="c1"># Cat on (i // 8, i % 8), mouse on (j // 8, j % 8), and turns = k
</span>        <span class="o">@</span><span class="n">functools</span><span class="p">.</span><span class="n">lru_cache</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">dp</span><span class="p">(</span><span class="n">cat</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">mouse</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">turn</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="c1"># We already search whole touchable grid
</span>            <span class="k">if</span> <span class="n">turn</span> <span class="o">==</span> <span class="n">nFloors</span> <span class="o">*</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>

            <span class="k">if</span> <span class="n">turn</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># mouse's turn
</span>                <span class="n">i</span> <span class="o">=</span> <span class="n">mouse</span> <span class="o">//</span> <span class="n">n</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">mouse</span> <span class="o">%</span> <span class="n">n</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">jump</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mouseJump</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">dirs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">*</span> <span class="n">jump</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="n">dirs</span><span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">jump</span>
                        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">==</span> <span class="n">m</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span>
                            <span class="k">break</span>
                        <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="s">"#"</span><span class="p">:</span>
                            <span class="k">break</span>
                        <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="s">"F"</span><span class="p">:</span>  <span class="c1"># Mouse eats the food, so mouse win
</span>                            <span class="k">return</span> <span class="bp">True</span>
                        <span class="k">if</span> <span class="n">dp</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="nb">hash</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">turn</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                            <span class="k">return</span> <span class="bp">True</span>
                <span class="c1"># Mouse can't win, so mouse lose
</span>                <span class="k">return</span> <span class="bp">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># cat's turn
</span>                <span class="n">i</span> <span class="o">=</span> <span class="n">cat</span> <span class="o">//</span> <span class="n">n</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">cat</span> <span class="o">%</span> <span class="n">n</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">jump</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">catJump</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">dirs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">*</span> <span class="n">jump</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="n">dirs</span><span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">jump</span>
                        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">==</span> <span class="n">m</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span>
                            <span class="k">break</span>
                        <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="s">"#"</span><span class="p">:</span>
                            <span class="k">break</span>
                        <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="s">"F"</span><span class="p">:</span>  <span class="c1"># Cat eats the food, so mouse lose
</span>                            <span class="k">return</span> <span class="bp">False</span>
                        <span class="n">nextCat</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">nextCat</span> <span class="o">==</span> <span class="n">mouse</span><span class="p">:</span>  <span class="c1"># Cat catches mouse, so mouse lose
</span>                            <span class="k">return</span> <span class="bp">False</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">dp</span><span class="p">(</span><span class="n">nextCat</span><span class="p">,</span> <span class="n">mouse</span><span class="p">,</span> <span class="n">turn</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                            <span class="k">return</span> <span class="bp">False</span>
                <span class="c1"># Cat can't win, so mouse win
</span>                <span class="k">return</span> <span class="bp">True</span>

        <span class="k">return</span> <span class="n">dp</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="n">mouse</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-1728.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
