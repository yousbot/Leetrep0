<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script src="all_css_run_prettify.js">
  </script>
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
  </script>
  <script>
   window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-K108N8L891');
  </script>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   Leetcode 1500. Design a File Sharing System
  </title>
  <meta content="Check Java/C++ solution and Company Tag of Leetcode 1500 for freeãUnlock prime for Leetcode 1500" name="description"/>
  <meta content="Leetcode 1500, 1500. Design a File Sharing System, leetcode, company tag, company problem list" name="keywords"/>
  <meta content="width=device-width, initial-scale=1" name="viewport">
   <!-- Bootstrap Core CSS -->
   <link href="all_css_bootstrap.min.css" rel="stylesheet"/>
   <link href="all_css_markdown.css" rel="stylesheet"/>
   <!-- Custom CSS -->
   <style>
    .div-width{
        	width: 70%;
        	margin: auto;
        }
        @media screen and (min-width: 0px) and (max-width: 560px) {
			.div-width{
	        	width: 95%;
	        	margin: auto;
	        }
		}
   </style>
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <script src="https://apis.google.com/js/platform.js">
   </script>
  </meta>
 </head>
 <body>
  
  <div class="div-width" style="padding-top: 30px">
   <div>
    
   </div>
   <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
   </div>
  </div>
  <div class="div-width">
   <h1>
    1500. Design a File Sharing System
   </h1>
  </div>
  <div class="markdown-body div-width" style="margin-top: 20px">
   <div class="content__u3I1 question-content__JfgR">
    <div>
     <p>
      We will use a file-sharing system to share a very large file which consists of
      <code>
       m
      </code>
      small
      <b>
       chunks
      </b>
      with IDs from
      <code>
       1
      </code>
      to
      <code>
       m
      </code>
      .
     </p>
     <p>
      When users join the system, the system should assign
      <b>
       a unique
      </b>
      ID to them.
                The unique ID should be used
      <b>
       once
      </b>
      for each user, but when a user leaves the
                system, the ID can be
      <b>
       reused
      </b>
      again.
     </p>
     <p>
      Users can request a certain chunk of the file, the system should return a list of IDs
                of all the users who have this chunk. After that, if at least one other has this
                chunk, the user who requested the chunk
      <b>
       will get it
      </b>
      .
     </p>
     <p>
      <br/>
      Implement the
      <code>
       FileSharing
      </code>
      class:
     </p>
     <ul>
      <li>
       <code>
        FileSharing(int m)
       </code>
       Initializes the object with the number of the
                    chunks of the file
       <code>
        m
       </code>
       .
      </li>
      <li>
       <code>
        int join(int[] ownedChunks)
       </code>
       : A new user joined the system owning
                    some chunks of the file, the system should assign an id to the user which is the
       <b>
        smallest positive integer
       </b>
       not taken by any other user. Return the
                    assigned id.
      </li>
      <li>
       <code>
        void leave(int userID)
       </code>
       : The user with
       <code>
        userID
       </code>
       will
                    leave the system, you cannot take file chunks from them anymore.
      </li>
      <li>
       <code>
        int[] request(int userID, int chunkID)
       </code>
       : The user with
       <code>
        userID
       </code>
       requested the file chunk with
       <code>
        chunkID
       </code>
       . Return a list of the IDs of
                    all users that own this chunk sorted in ascending order.
      </li>
     </ul>
     <p>
     </p>
     <p>
      <b>
       Follow-ups:
      </b>
     </p>
     <ul>
      <li>
       What happens if the system identifies the user by their IP address instead
                    of their unique ID and users disconnect and connect from the system with the
                    same IP?
      </li>
      <li>
       If the users in the system join and leave the system frequently without
                    requesting any chunks, will your solution still be efficient?
      </li>
      <li>
       If all each user join the system one time, request all files and then leave,
                    will your solution still be efficient?
      </li>
      <li>
       If the system will be used to share
       <code>
        n
       </code>
       files where the
       <code>
        ith
       </code>
       file consists of
       <code>
        m[i]
       </code>
       , what are the changes you
                    have to do?
      </li>
     </ul>
     <p>
     </p>
     <p>
      <strong>
       Example:
      </strong>
     </p>
     <pre><b>Input:</b>
["FileSharing","join","join","join","request","request","leave","request","leave","join"]
[[4],[[1,2]],[[2,3]],[[4]],[1,3],[2,2],[1],[2,1],[2],[[]]]
<b>Output:</b>
[null,1,2,3,[2],[1,2],null,[],null,1]
<b>Explanation:</b>
FileSharing fileSharing = new FileSharing(4); // We use the system to share a file of 4 chunks.
fileSharing.join([1, 2]);    // A user who has chunks [1,2] joined the system, assign id = 1 to them and return 1.
fileSharing.join([2, 3]);    // A user who has chunks [2,3] joined the system, assign id = 2 to them and return 2.
fileSharing.join([4]);       // A user who has chunk [4] joined the system, assign id = 3 to them and return 3.
fileSharing.request(1, 3);   // The user with id = 1 requested the third file chunk, as only the user with id = 2 has the file, return [2] . Notice that user 1 now has chunks [1,2,3].
fileSharing.request(2, 2);   // The user with id = 2 requested the second file chunk, users with ids [1,2] have this chunk, thus we return [1,2]. We don't care if the user has the file and request it, we just return all the users that can give them the file.
fileSharing.leave(1);        // The user with id = 1 left the system, all the file chunks with them are no longer available for other users.
fileSharing.request(2, 1);   // The user with id = 2 requested the first file chunk, no one in the system has this chunk, we return empty list [].
fileSharing.leave(2);        // The user with id = 2 left the system, all the file chunks with them are no longer available for other users.
fileSharing.join([]);        // A user who doesn't have any chunks joined the system, assign id = 1 to them and return 1. Notice that ids 1 and 2 are free and we can reuse them.
</pre>
     <p>
     </p>
     <p>
      <strong>
       Constraints:
      </strong>
     </p>
     <ul>
      <li>
       <code>
        1 &lt;= m &lt;= 10^5
       </code>
      </li>
      <li>
       <code>
        0 &lt;= ownedChunks.length &lt;= min(100, m)
       </code>
      </li>
      <li>
       <code>
        1 &lt;= ownedChunks[i] &lt;= m
       </code>
      </li>
      <li>
       Values of
       <code>
        ownedChunks
       </code>
       are unique.
      </li>
      <li>
       <code>
        1 &lt;= chunkID &lt;= m
       </code>
      </li>
      <li>
       <code>
        userID
       </code>
       is guaranteed to be a user in the system if you
       <strong>
        assign
       </strong>
       the IDs
       <strong>
        correctly
       </strong>
       .
      </li>
      <li>
       At most
       <code>
        10^4
       </code>
       calls will be made to
       <code>
        join
       </code>
       ,
       <code>
        leave
       </code>
       and
       <code>
        request
       </code>
       .
      </li>
      <li>
       Each call to
       <code>
        leave
       </code>
       will have a matching call for
       <code>
        join
       </code>
       .
      </li>
     </ul>
    </div>
   </div>
   <div>
    <h3>
     Difficulty:
    </h3>
    <span class="label label-warning">
     Medium
    </span>
   </div>
   <div>
    <h3>
     Lock:
    </h3>
    <span class="label label-info">
     Prime
    </span>
   </div>
   
   <div style="height=20px;">
   </div>
   <div>
    
   </div>
   
  </div>
 </body>
</html>
