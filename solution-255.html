<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-255.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-255.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>255 - Verify Preorder Sequence in Binary Search Tree</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode Question Formatted question description: https://leetcode.ca/all/255.html Given an array of unique integers preorder, return true if it is the correct preorder traversal sequence of a binary search tree. &amp;nbsp; Example 1: Input: preorder = [5,2,1,3,6] Output: true Example 2: Input: preorder = [5,2,6,1,3] Output: false &amp;nbsp;...">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-255.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-255.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-255.html" rel="stylesheet"/>
   <link href="solution-255.html" rel="stylesheet"/>
   <link href="solution-255.html" rel="stylesheet"/>
   <link href="solution-255.html" rel="stylesheet"/>
   <link href="solution-255.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="255 - Verify Preorder Sequence in Binary Search Tree" property="og:title"/>
   <meta content="Leetcode Question Formatted question description: https://leetcode.ca/all/255.html Given an array of unique integers preorder, return true if it is the correct preorder traversal sequence of a binary search tree. &amp;nbsp; Example 1: Input: preorder = [5,2,1,3,6] Output: true Example 2: Input: preorder = [5,2,6,1,3] Output: false &amp;nbsp; Constraints: 1 &amp;lt;= preorder.length &amp;lt;= 104 1 &amp;lt;= preorder[i] &amp;lt;= 104 All the elements of preorder are unique. &amp;nbsp; Follow up: Could you do it using only constant space complexity? Algorithm First, initialize a variable low with a minimum possible value, then iterate through the array. If the current value is less than low, return false. For the root node, push it onto the stack, and then begin traversing backward. If an encountered number is smaller than the element at the top of the stack, it indicates that this number belongs to its left subtree, and it should continue to be pushed onto the stack. When you encounter a number greater than the stackâs top element, this number is a right child value. At this point, you need to determine the right subtree to which this node belongs. Therefore, update the low value to the value just removed and pop the top element off the stack. Continue this process, comparing with the new top element of the stack. If the current number is still greater, keep updating the low value and removing the top of the stack, until either the stack is empty or the current top element of the stack is greater than the current number. Then, stop and push the current number onto the stack. Following this procedure, if the function does not return false while traversing the entire array, it should return true at the end. Code Java C++ Python Go import java.util.Stack; public class Verify_Preorder_Sequence_in_Binary_Search_Tree { public static void main(String[] args) { Verify_Preorder_Sequence_in_Binary_Search_Tree out = new Verify_Preorder_Sequence_in_Binary_Search_Tree(); Solution_dfs s = out.new Solution_dfs(); System.out.println(s.verifyPreorder(new int[]{5,2,6,1,3})); System.out.println(s.verifyPreorder(new int[]{5,2,1,3,6})); Solution sss = out.new Solution(); System.out.println(sss.verifyPreorder(new int[]{5,2,6,1,3})); System.out.println(sss.verifyPreorder(new int[]{5,2,1,3,6})); } public class Solution { public boolean verifyPreorder(int[] preorder) { int lowBound = Integer.MIN_VALUE; Stack&amp;lt;Integer&amp;gt; sk = new Stack&amp;lt;&amp;gt;(); for (int each : preorder) { if (each &amp;lt; lowBound) { return false; } while (!sk.empty() &amp;amp;&amp;amp; each &amp;gt; sk.peek()) { // s&amp;gt;peek =&amp;gt; right value lowBound = sk.pop(); } sk.push(each); } return true; } } public class Solution_dfs { public boolean verifyPreorder(int[] preorder) { return dfs(preorder, 0, preorder.length - 1, Integer.MIN_VALUE, Integer.MAX_VALUE); } boolean dfs(int[] preorder, int start, int end, int lower, int upper) { if (start &amp;gt; end) return true; int val = preorder[start]; if (val &amp;lt;= lower || val &amp;gt;= upper) return false; int i = 0; for (i = start + 1; i &amp;lt;= end; ++i) { if (preorder[i] &amp;gt;= val) break; // @note: i stops at root's first right child, same as above &quot;if (each &amp;lt; lowBound) {&quot; } return dfs(preorder, start + 1, i - 1, lower, val) &amp;amp;&amp;amp; dfs(preorder, i, end, val, upper); } } } ############ class Solution { public boolean verifyPreorder(int[] preorder) {..." property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2016-08-11T22:21:01-07:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2016-08-11-255-Verify-Preorder-Sequence-in-Binary-Search-Tree/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-255.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="255 - Verify Preorder Sequence in Binary Search Tree" property="twitter:title"/>
   <meta content="Leetcode Question Formatted question description: https://leetcode.ca/all/255.html Given an array of unique integers preorder, return true if it is the correct preorder traversal sequence of a binary search tree. &amp;nbsp; Example 1: Input: preorder = [5,2,1,3,6] Output: true Example 2: Input: preorder = [5,2,6,1,3] Output: false &amp;nbsp; Constraints: 1 &amp;lt;= preorder.length &amp;lt;= 104 1 &amp;lt;= preorder[i] &amp;lt;= 104 All the elements of preorder are unique. &amp;nbsp; Follow up: Could you do it using only constant space complexity? Algorithm First, initialize a variable low with a minimum possible value, then iterate through the array. If the current value is less than low, return false. For the root node, push it onto the stack, and then begin traversing backward. If an encountered number is smaller than the element at the top of the stack, it indicates that this number belongs to its left subtree, and it should continue to be pushed onto the stack. When you encounter a number greater than the stackâs top element, this number is a right child value. At this point, you need to determine the right subtree to which this node belongs. Therefore, update the low value to the value just removed and pop the top element off the stack. Continue this process, comparing with the new top element of the stack. If the current number is still greater, keep updating the low value and removing the top of the stack, until either the stack is empty or the current top element of the stack is greater than the current number. Then, stop and push the current number onto the stack. Following this procedure, if the function does not return false while traversing the entire array, it should return true at the end. Code Java C++ Python Go import java.util.Stack; public class Verify_Preorder_Sequence_in_Binary_Search_Tree { public static void main(String[] args) { Verify_Preorder_Sequence_in_Binary_Search_Tree out = new Verify_Preorder_Sequence_in_Binary_Search_Tree(); Solution_dfs s = out.new Solution_dfs(); System.out.println(s.verifyPreorder(new int[]{5,2,6,1,3})); System.out.println(s.verifyPreorder(new int[]{5,2,1,3,6})); Solution sss = out.new Solution(); System.out.println(sss.verifyPreorder(new int[]{5,2,6,1,3})); System.out.println(sss.verifyPreorder(new int[]{5,2,1,3,6})); } public class Solution { public boolean verifyPreorder(int[] preorder) { int lowBound = Integer.MIN_VALUE; Stack&amp;lt;Integer&amp;gt; sk = new Stack&amp;lt;&amp;gt;(); for (int each : preorder) { if (each &amp;lt; lowBound) { return false; } while (!sk.empty() &amp;amp;&amp;amp; each &amp;gt; sk.peek()) { // s&amp;gt;peek =&amp;gt; right value lowBound = sk.pop(); } sk.push(each); } return true; } } public class Solution_dfs { public boolean verifyPreorder(int[] preorder) { return dfs(preorder, 0, preorder.length - 1, Integer.MIN_VALUE, Integer.MAX_VALUE); } boolean dfs(int[] preorder, int start, int end, int lower, int upper) { if (start &amp;gt; end) return true; int val = preorder[start]; if (val &amp;lt;= lower || val &amp;gt;= upper) return false; int i = 0; for (i = start + 1; i &amp;lt;= end; ++i) { if (preorder[i] &amp;gt;= val) break; // @note: i stops at root's first right child, same as above &quot;if (each &amp;lt; lowBound) {&quot; } return dfs(preorder, start + 1, i - 1, lower, val) &amp;amp;&amp;amp; dfs(preorder, i, end, val, upper); } } } ############ class Solution { public boolean verifyPreorder(int[] preorder) {..." property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    255 - Verify Preorder Sequence in Binary Search Tree | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="255 - Verify Preorder Sequence in Binary Search Tree" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-255.html" rel="canonical">
          <meta content="https://leetcode.ca/2016-08-11-255-Verify-Preorder-Sequence-in-Binary-Search-Tree/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2016-08-11T22:21:01-07:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"255 - Verify Preorder Sequence in Binary Search Tree","dateModified":"2016-08-11T22:21:01-07:00","datePublished":"2016-08-11T22:21:01-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2016-08-11-255-Verify-Preorder-Sequence-in-Binary-Search-Tree/"},"url":"https://leetcode.ca/2016-08-11-255-Verify-Preorder-Sequence-in-Binary-Search-Tree/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <h1 id="question">
       Question
      </h1>
      <p>
       Formatted question description:
       <a href="solution-255.html">
        https://leetcode.ca/all/255.html
       </a>
      </p>
      <p>
       Given an array of
       <strong>
        unique
       </strong>
       integers
       <code>
        preorder
       </code>
       , return
       <code>
        true
       </code>
       <em>
        if it is the correct preorder traversal sequence of a binary search tree
       </em>
       .
      </p>
      <p>
      </p>
      <p>
       <strong class="example">
        Example 1:
       </strong>
      </p>
      <p>
       <img alt="" src="https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0200-0299/0255.Verify%20Preorder%20Sequence%20in%20Binary%20Search%20Tree/images/preorder-tree.jpg" style="width: 292px; height: 302px;"/>
      </p>
      <pre>
<strong>Input:</strong> preorder = [5,2,1,3,6]
<strong>Output:</strong> true
</pre>
      <p>
       <strong class="example">
        Example 2:
       </strong>
      </p>
      <pre>
<strong>Input:</strong> preorder = [5,2,6,1,3]
<strong>Output:</strong> false
</pre>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         1 &lt;= preorder.length &lt;= 10
         <sup>
          4
         </sup>
        </code>
       </li>
       <li>
        <code>
         1 &lt;= preorder[i] &lt;= 10
         <sup>
          4
         </sup>
        </code>
       </li>
       <li>
        All the elements of
        <code>
         preorder
        </code>
        are
        <strong>
         unique
        </strong>
        .
       </li>
      </ul>
      <p>
      </p>
      <p>
       <strong>
        Follow up:
       </strong>
       Could you do it using only constant space complexity?
      </p>
      <h1 id="algorithm">
       Algorithm
      </h1>
      <p>
       First, initialize a variable
       <code class="language-plaintext highlighter-rouge">
        low
       </code>
       with a minimum possible value, then iterate through the array. If the current value is less than
       <code class="language-plaintext highlighter-rouge">
        low
       </code>
       , return
       <code class="language-plaintext highlighter-rouge">
        false
       </code>
       .
      </p>
      <p>
       For the root node, push it onto the stack, and then begin traversing backward.
      </p>
      <p>
       If an encountered number is smaller than the element at the top of the stack, it indicates that this number belongs to its left subtree, and it should continue to be pushed onto the stack.
      </p>
      <p>
       When you encounter a number greater than the stackâs top element, this number is a right child value. At this point, you need to determine the right subtree to which this node belongs.
      </p>
      <p>
       Therefore, update the
       <code class="language-plaintext highlighter-rouge">
        low
       </code>
       value to the value just removed and pop the top element off the stack. Continue this process, comparing with the new top element of the stack.
      </p>
      <p>
       If the current number is still greater, keep updating the
       <code class="language-plaintext highlighter-rouge">
        low
       </code>
       value and removing the top of the stack, until either the stack is empty or the current top element of the stack is greater than the current number. Then, stop and push the current number onto the stack.
      </p>
      <p>
       Following this procedure, if the function does not return
       <code class="language-plaintext highlighter-rouge">
        false
       </code>
       while traversing the entire array, it should return
       <code class="language-plaintext highlighter-rouge">
        true
       </code>
       at the end.
      </p>
      <h1 id="code">
       Code
      </h1>
      <ul class="uk-tab" data-uk-switcher="{connect:'#2e16c5b7-ab48-4f74-a10d-6fcbe9e42c28'}">
       <li class="uk-active">
        <a href="solution-255.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-255.html">
         C++
        </a>
       </li>
       <li>
        <a href="solution-255.html">
         Python
        </a>
       </li>
       <li>
        <a href="solution-255.html">
         Go
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="2e16c5b7-ab48-4f74-a10d-6fcbe9e42c28">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.Stack</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Verify_Preorder_Sequence_in_Binary_Search_Tree</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Verify_Preorder_Sequence_in_Binary_Search_Tree</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Verify_Preorder_Sequence_in_Binary_Search_Tree</span><span class="o">();</span>
        <span class="n">Solution_dfs</span> <span class="n">s</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="na">new</span> <span class="nf">Solution_dfs</span><span class="o">();</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">verifyPreorder</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">5</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">6</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">3</span><span class="o">}));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">verifyPreorder</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">5</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">6</span><span class="o">}));</span>


        <span class="nc">Solution</span> <span class="n">sss</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="na">new</span> <span class="nf">Solution</span><span class="o">();</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sss</span><span class="o">.</span><span class="na">verifyPreorder</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">5</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">6</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">3</span><span class="o">}));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sss</span><span class="o">.</span><span class="na">verifyPreorder</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">5</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">6</span><span class="o">}));</span>
    <span class="o">}</span>


    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">verifyPreorder</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">preorder</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">lowBound</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">MIN_VALUE</span><span class="o">;</span>
            <span class="nc">Stack</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">sk</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Stack</span><span class="o">&lt;&gt;();</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">each</span> <span class="o">:</span> <span class="n">preorder</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">each</span> <span class="o">&lt;</span> <span class="n">lowBound</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
                <span class="o">}</span>

                <span class="k">while</span> <span class="o">(!</span><span class="n">sk</span><span class="o">.</span><span class="na">empty</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="n">each</span> <span class="o">&gt;</span> <span class="n">sk</span><span class="o">.</span><span class="na">peek</span><span class="o">())</span> <span class="o">{</span> <span class="c1">// s&gt;peek =&gt; right value</span>
                    <span class="n">lowBound</span> <span class="o">=</span> <span class="n">sk</span><span class="o">.</span><span class="na">pop</span><span class="o">();</span>
                <span class="o">}</span>
                <span class="n">sk</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">each</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>


    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Solution_dfs</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">verifyPreorder</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">preorder</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="nf">dfs</span><span class="o">(</span><span class="n">preorder</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">preorder</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">MIN_VALUE</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kt">boolean</span> <span class="nf">dfs</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">preorder</span><span class="o">,</span> <span class="kt">int</span> <span class="n">start</span><span class="o">,</span> <span class="kt">int</span> <span class="n">end</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lower</span><span class="o">,</span> <span class="kt">int</span> <span class="n">upper</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">start</span> <span class="o">&gt;</span> <span class="n">end</span><span class="o">)</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>

            <span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="n">preorder</span><span class="o">[</span><span class="n">start</span><span class="o">];</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">val</span> <span class="o">&lt;=</span> <span class="n">lower</span> <span class="o">||</span> <span class="n">val</span> <span class="o">&gt;=</span> <span class="n">upper</span><span class="o">)</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>

            <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">preorder</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&gt;=</span> <span class="n">val</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span> <span class="c1">// @note: i stops at root's first right child, same as above "if (each &lt; lowBound) {"</span>
            <span class="o">}</span>

            <span class="k">return</span> <span class="nf">dfs</span><span class="o">(</span><span class="n">preorder</span><span class="o">,</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">lower</span><span class="o">,</span> <span class="n">val</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">dfs</span><span class="o">(</span><span class="n">preorder</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">end</span><span class="o">,</span> <span class="n">val</span><span class="o">,</span> <span class="n">upper</span><span class="o">);</span>
        <span class="o">}</span>

    <span class="o">}</span>
<span class="o">}</span>

<span class="err">############</span>

<span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">verifyPreorder</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">preorder</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Deque</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">stk</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayDeque</span><span class="o">&lt;&gt;();</span>
        <span class="kt">int</span> <span class="n">last</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">MIN_VALUE</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">:</span> <span class="n">preorder</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">last</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">while</span> <span class="o">(!</span><span class="n">stk</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="n">stk</span><span class="o">.</span><span class="na">peek</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">last</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
            <span class="o">}</span>
            <span class="n">stk</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-cpp highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="c1">// OJ: https://leetcode.com/problems/verify-preorder-sequence-in-binary-search-tree/</span>
<span class="c1">// Time: O(N)</span>
<span class="c1">// Space: O(N)</span>
<span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">bool</span> <span class="n">verifyPreorder</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">A</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">s</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">mn</span> <span class="o">=</span> <span class="n">INT_MIN</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span> <span class="o">:</span> <span class="n">A</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;</span> <span class="n">mn</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">mn</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
                <span class="n">s</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="n">s</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-python highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">verifyPreorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preorder</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">stk</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">last</span> <span class="o">=</span> <span class="o">-</span><span class="n">inf</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">preorder</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">last</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
            <span class="k">while</span> <span class="n">stk</span> <span class="ow">and</span> <span class="n">stk</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">:</span>
                <span class="n">last</span> <span class="o">=</span> <span class="n">stk</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="n">stk</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>


<span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>  <span class="c1"># o(N) but modifying input list
</span>    <span class="k">def</span> <span class="nf">verifyPreorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preorder</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">low</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="p">.</span><span class="n">inf</span>
        <span class="n">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">preorder</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">p</span> <span class="o">&lt;</span> <span class="n">low</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
            <span class="k">while</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">preorder</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">p</span><span class="p">:</span>
                <span class="n">low</span> <span class="o">=</span> <span class="n">preorder</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">preorder</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span>

        <span class="k">return</span> <span class="bp">True</span>

<span class="c1">############
</span>
<span class="k">class</span> <span class="nc">Solution</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

  <span class="c1"># O(n) sapce complexity, **stack**
</span>  <span class="k">def</span> <span class="nf">verifyPreorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preorder</span><span class="p">):</span>
    <span class="s">"""
    :type preorder: List[int]
    :rtype: bool
    """</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">preorder</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
      <span class="k">return</span> <span class="bp">True</span>
    <span class="n">stack</span><span class="p">,</span> <span class="n">lastElem</span> <span class="o">=</span> <span class="p">[</span><span class="n">preorder</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">preorder</span><span class="p">)):</span>
      <span class="k">if</span> <span class="n">lastElem</span> <span class="o">&gt;</span> <span class="n">preorder</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">False</span>
      <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">stack</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">preorder</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">lastElem</span> <span class="o">=</span> <span class="n">stack</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
      <span class="n">stack</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">preorder</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

    <span class="k">return</span> <span class="bp">True</span>

</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-go highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">func</span> <span class="n">verifyPreorder</span><span class="p">(</span><span class="n">preorder</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
	<span class="k">var</span> <span class="n">stk</span> <span class="p">[]</span><span class="kt">int</span>
	<span class="n">last</span> <span class="o">:=</span> <span class="n">math</span><span class="o">.</span><span class="n">MinInt32</span>
	<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">x</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">preorder</span> <span class="p">{</span>
		<span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">last</span> <span class="p">{</span>
			<span class="k">return</span> <span class="no">false</span>
		<span class="p">}</span>
		<span class="k">for</span> <span class="nb">len</span><span class="p">(</span><span class="n">stk</span><span class="p">)</span> <span class="o">&gt;</span> <span class="m">0</span> <span class="o">&amp;&amp;</span> <span class="n">stk</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">stk</span><span class="p">)</span><span class="o">-</span><span class="m">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">x</span> <span class="p">{</span>
			<span class="n">last</span> <span class="o">=</span> <span class="n">stk</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">stk</span><span class="p">)</span><span class="o">-</span><span class="m">1</span><span class="p">]</span>
			<span class="n">stk</span> <span class="o">=</span> <span class="n">stk</span><span class="p">[</span><span class="m">0</span> <span class="o">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">stk</span><span class="p">)</span><span class="o">-</span><span class="m">1</span><span class="p">]</span>
		<span class="p">}</span>
		<span class="n">stk</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">stk</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="no">true</span>
<span class="p">}</span>
</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-255.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
