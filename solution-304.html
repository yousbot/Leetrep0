<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <link href="solution-304.html" rel="shortcut icon" type="image/png"/>
  <link href="solution-304.html" rel="stylesheet">
   <script src="assets_js_uikit.min.js" type="text/javascript">
   </script>
   <script src="assets_js_uikit-icons.min.js" type="text/javascript">
   </script>
   <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        packages: {'[+]': ['ams']}  // Include the 'ams' package
      },
      svg: {
        fontCache: 'global'
      }
    };
   </script>
   <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
   </script>
   <!-- below block is overlapping with SEO plugin generated title and description   -->
   <!-- 
  <title>304 - Range Sum Query 2D - Immutable</title>

  
  <meta name="author" content="Leetcode">
  

  
  <meta name="description" content="Leetcode 304. Range Sum Query 2D - Immutable Description Given a 2D matrix matrix, handle multiple queries of the following type: Calculate the sum of the elements of matrix inside the rectangle defined by its upper left corner (row1, col1) and lower right corner (row2, col2)....">
   -->
   <meta content="LeetCode, Solution, Company Tag, Unlock Prime, Java, C++, Interview, Job, Algorithm, SQL, Canada" name="keywords"/>
   <link href="solution-304.html" rel="alternate" title="Leetcode" type="application/rss+xml"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K108N8L891">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K108N8L891');
   </script>
   <!-- End Google Analytics -->
   <script async="" data-ad-client="ca-pub-6766885420008650" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
   </script>
   <link crossorigin="anonymous" href="solution-304.html" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet"/>
   <link href="solution-304.html" rel="stylesheet"/>
   <link href="solution-304.html" rel="stylesheet"/>
   <link href="solution-304.html" rel="stylesheet"/>
   <link href="solution-304.html" rel="stylesheet"/>
   <link href="solution-304.html" rel="stylesheet"/>
   <meta content="Leetcode" property="og:site_name"/>
   <meta content="304 - Range Sum Query 2D - Immutable" property="og:title"/>
   <meta content="Leetcode 304. Range Sum Query 2D - Immutable Description Given a 2D matrix matrix, handle multiple queries of the following type: Calculate the sum of the elements of matrix inside the rectangle defined by its upper left corner (row1, col1) and lower right corner (row2, col2). Implement the NumMatrix class: NumMatrix(int[][] matrix) Initializes the object with the integer matrix matrix. int sumRegion(int row1, int col1, int row2, int col2) Returns the sum of the elements of matrix inside the rectangle defined by its upper left corner (row1, col1) and lower right corner (row2, col2). You must design an algorithm where sumRegion works on O(1) time complexity. &amp;nbsp; Example 1: Input [&amp;quot;NumMatrix&amp;quot;, &amp;quot;sumRegion&amp;quot;, &amp;quot;sumRegion&amp;quot;, &amp;quot;sumRegion&amp;quot;] [[[[3, 0, 1, 4, 2], [5, 6, 3, 2, 1], [1, 2, 0, 1, 5], [4, 1, 0, 1, 7], [1, 0, 3, 0, 5]]], [2, 1, 4, 3], [1, 1, 2, 2], [1, 2, 2, 4]] Output [null, 8, 11, 12] Explanation NumMatrix numMatrix = new NumMatrix([[3, 0, 1, 4, 2], [5, 6, 3, 2, 1], [1, 2, 0, 1, 5], [4, 1, 0, 1, 7], [1, 0, 3, 0, 5]]); numMatrix.sumRegion(2, 1, 4, 3); // return 8 (i.e sum of the red rectangle) numMatrix.sumRegion(1, 1, 2, 2); // return 11 (i.e sum of the green rectangle) numMatrix.sumRegion(1, 2, 2, 4); // return 12 (i.e sum of the blue rectangle) &amp;nbsp; Constraints: m == matrix.length n == matrix[i].length 1 &amp;lt;= m, n &amp;lt;= 200 -104 &amp;lt;= matrix[i][j] &amp;lt;= 104 0 &amp;lt;= row1 &amp;lt;= row2 &amp;lt; m 0 &amp;lt;= col1 &amp;lt;= col2 &amp;lt; n At most 104 calls will be made to sumRegion. Solutions Solution 1: Two-dimensional Prefix Sum We use $s[i + 1][j + 1]$ to represent the sum of all elements in the upper left part of the $i$th row and $j$th column, where indices $i$ and $j$ both start from $0$. We can get the following prefix sum formula: \[s[i + 1][j + 1] = s[i + 1][j] + s[i][j + 1] - s[i][j] + nums[i][j]\] Then, the sum of the elements of the rectangle with $(x_1, y_1)$ and $(x_2, y_2)$ as the upper left corner and lower right corner respectively is: \[s[x_2 + 1][y_2 + 1] - s[x_2 + 1][y_1] - s[x_1][y_2 + 1] + s[x_1][y_1]\] In the initialization method, we preprocess the prefix sum array $s$, and in the query method, we directly return the result of the above formula. The time complexity for initializing is $O(m \times n)$, and the time complexity for querying is $O(1)$. The space complexity is $O(m \times n)$. Java C++ Python Go TypeScript Javascript RenderScript class NumMatrix { private int[][] s; public NumMatrix(int[][] matrix) { int m = matrix.length, n = matrix[0].length; s = new int[m + 1][n + 1]; for (int i = 0; i &amp;lt; m; ++i) { for (int j = 0; j &amp;lt; n; ++j) { s[i + 1][j + 1] = s[i + 1][j] + s[i][j + 1] - s[i][j] + matrix[i][j]; } } } public..." property="og:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" property="og:image"/>
   <!-- remove canonical below to use SEO plugin -->
   <meta content="article" property="og:type"/>
   <meta content="Leetcode" property="og:article:author"/>
   <meta content="2016-09-29T00:00:00-07:00" property="og:article:published_time"/>
   <meta content="https://leetcode.ca/2016-09-29-304-Range-Sum-Query-2D-Immutable/" property="og:url"/>
   <!-- <link rel="canonical" href="solution-304.html"> -->
   <meta content="summary" name="twitter:card"/>
   <meta content="@" name="twitter:site"/>
   <meta content="@" name="twitter:creator"/>
   <meta content="304 - Range Sum Query 2D - Immutable" property="twitter:title"/>
   <meta content="Leetcode 304. Range Sum Query 2D - Immutable Description Given a 2D matrix matrix, handle multiple queries of the following type: Calculate the sum of the elements of matrix inside the rectangle defined by its upper left corner (row1, col1) and lower right corner (row2, col2). Implement the NumMatrix class: NumMatrix(int[][] matrix) Initializes the object with the integer matrix matrix. int sumRegion(int row1, int col1, int row2, int col2) Returns the sum of the elements of matrix inside the rectangle defined by its upper left corner (row1, col1) and lower right corner (row2, col2). You must design an algorithm where sumRegion works on O(1) time complexity. &amp;nbsp; Example 1: Input [&amp;quot;NumMatrix&amp;quot;, &amp;quot;sumRegion&amp;quot;, &amp;quot;sumRegion&amp;quot;, &amp;quot;sumRegion&amp;quot;] [[[[3, 0, 1, 4, 2], [5, 6, 3, 2, 1], [1, 2, 0, 1, 5], [4, 1, 0, 1, 7], [1, 0, 3, 0, 5]]], [2, 1, 4, 3], [1, 1, 2, 2], [1, 2, 2, 4]] Output [null, 8, 11, 12] Explanation NumMatrix numMatrix = new NumMatrix([[3, 0, 1, 4, 2], [5, 6, 3, 2, 1], [1, 2, 0, 1, 5], [4, 1, 0, 1, 7], [1, 0, 3, 0, 5]]); numMatrix.sumRegion(2, 1, 4, 3); // return 8 (i.e sum of the red rectangle) numMatrix.sumRegion(1, 1, 2, 2); // return 11 (i.e sum of the green rectangle) numMatrix.sumRegion(1, 2, 2, 4); // return 12 (i.e sum of the blue rectangle) &amp;nbsp; Constraints: m == matrix.length n == matrix[i].length 1 &amp;lt;= m, n &amp;lt;= 200 -104 &amp;lt;= matrix[i][j] &amp;lt;= 104 0 &amp;lt;= row1 &amp;lt;= row2 &amp;lt; m 0 &amp;lt;= col1 &amp;lt;= col2 &amp;lt; n At most 104 calls will be made to sumRegion. Solutions Solution 1: Two-dimensional Prefix Sum We use $s[i + 1][j + 1]$ to represent the sum of all elements in the upper left part of the $i$th row and $j$th column, where indices $i$ and $j$ both start from $0$. We can get the following prefix sum formula: \[s[i + 1][j + 1] = s[i + 1][j] + s[i][j + 1] - s[i][j] + nums[i][j]\] Then, the sum of the elements of the rectangle with $(x_1, y_1)$ and $(x_2, y_2)$ as the upper left corner and lower right corner respectively is: \[s[x_2 + 1][y_2 + 1] - s[x_2 + 1][y_1] - s[x_1][y_2 + 1] + s[x_1][y_1]\] In the initialization method, we preprocess the prefix sum array $s$, and in the query method, we directly return the result of the above formula. The time complexity for initializing is $O(m \times n)$, and the time complexity for querying is $O(1)$. The space complexity is $O(m \times n)$. Java C++ Python Go TypeScript Javascript RenderScript class NumMatrix { private int[][] s; public NumMatrix(int[][] matrix) { int m = matrix.length, n = matrix[0].length; s = new int[m + 1][n + 1]; for (int i = 0; i &amp;lt; m; ++i) { for (int j = 0; j &amp;lt; n; ++j) { s[i + 1][j + 1] = s[i + 1][j] + s[i][j + 1] - s[i][j] + matrix[i][j]; } } } public..." property="twitter:description"/>
   <meta content="https://leetcode.ca/assets/img/avatar-icon.jpg" name="twitter:image"/>
   <!-- Begin Jekyll SEO tag v2.6.1 -->
   <title>
    304 - Range Sum Query 2D - Immutable | Leetcode
   </title>
   <meta content="Jekyll v3.10.0" name="generator">
    <meta content="304 - Range Sum Query 2D - Immutable" property="og:title">
     <meta content="Leetcode" name="author">
      <meta content="en_US" property="og:locale">
       <meta content="Leetcode" name="description">
        <meta content="Leetcode" property="og:description">
         <link href="solution-304.html" rel="canonical">
          <meta content="https://leetcode.ca/2016-09-29-304-Range-Sum-Query-2D-Immutable/" property="og:url">
           <meta content="Leetcode" property="og:site_name">
            <meta content="article" property="og:type">
             <meta content="2016-09-29T00:00:00-07:00" property="article:published_time">
              <script type="application/ld+json">
               {"description":"Leetcode","headline":"304 - Range Sum Query 2D - Immutable","dateModified":"2016-09-29T00:00:00-07:00","datePublished":"2016-09-29T00:00:00-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leetcode.ca/2016-09-29-304-Range-Sum-Query-2D-Immutable/"},"url":"https://leetcode.ca/2016-09-29-304-Range-Sum-Query-2D-Immutable/","author":{"@type":"Person","name":"Leetcode"},"@type":"BlogPosting","@context":"https://schema.org"}
              </script>
              <!-- End Jekyll SEO tag -->
             </meta>
            </meta>
           </meta>
          </meta>
         </link>
        </meta>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </link>
 </head>
 <body>
  
  <!-- TODO this file has become a mess, refactor it -->
  
  <div class="container-md">
   <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
     <article class="blog-post" role="main">
      
      <script src="https://apis.google.com/js/platform.js">
      </script>
      <div class="g-ytsubscribe" data-channelid="UCslk3mmaMJy1enit3L9vWig" data-count="hidden" data-layout="full">
      </div>
      <h1 id="304-range-sum-query-2d---immutable">
       <a href="solution-304.html">
        304. Range Sum Query 2D - Immutable
       </a>
      </h1>
      <h2 id="description">
       Description
      </h2>
      <p>
       Given a 2D matrix
       <code>
        matrix
       </code>
       , handle multiple queries of the following type:
      </p>
      <ul>
       <li>
        Calculate the
        <strong>
         sum
        </strong>
        of the elements of
        <code>
         matrix
        </code>
        inside the rectangle defined by its
        <strong>
         upper left corner
        </strong>
        <code>
         (row1, col1)
        </code>
        and
        <strong>
         lower right corner
        </strong>
        <code>
         (row2, col2)
        </code>
        .
       </li>
      </ul>
      <p>
       Implement the
       <code>
        NumMatrix
       </code>
       class:
      </p>
      <ul>
       <li>
        <code>
         NumMatrix(int[][] matrix)
        </code>
        Initializes the object with the integer matrix
        <code>
         matrix
        </code>
        .
       </li>
       <li>
        <code>
         int sumRegion(int row1, int col1, int row2, int col2)
        </code>
        Returns the
        <strong>
         sum
        </strong>
        of the elements of
        <code>
         matrix
        </code>
        inside the rectangle defined by its
        <strong>
         upper left corner
        </strong>
        <code>
         (row1, col1)
        </code>
        and
        <strong>
         lower right corner
        </strong>
        <code>
         (row2, col2)
        </code>
        .
       </li>
      </ul>
      <p>
       You must design an algorithm where
       <code>
        sumRegion
       </code>
       works on
       <code>
        O(1)
       </code>
       time complexity.
      </p>
      <p>
      </p>
      <p>
       <strong class="example">
        Example 1:
       </strong>
      </p>
      <p>
       <img alt="" src="https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0300-0399/0304.Range%20Sum%20Query%202D%20-%20Immutable/images/sum-grid.jpg" style="width: 415px; height: 415px;"/>
      </p>
      <pre>
<strong>Input</strong>
["NumMatrix", "sumRegion", "sumRegion", "sumRegion"]
[[[[3, 0, 1, 4, 2], [5, 6, 3, 2, 1], [1, 2, 0, 1, 5], [4, 1, 0, 1, 7], [1, 0, 3, 0, 5]]], [2, 1, 4, 3], [1, 1, 2, 2], [1, 2, 2, 4]]
<strong>Output</strong>
[null, 8, 11, 12]

<strong>Explanation</strong>
NumMatrix numMatrix = new NumMatrix([[3, 0, 1, 4, 2], [5, 6, 3, 2, 1], [1, 2, 0, 1, 5], [4, 1, 0, 1, 7], [1, 0, 3, 0, 5]]);
numMatrix.sumRegion(2, 1, 4, 3); // return 8 (i.e sum of the red rectangle)
numMatrix.sumRegion(1, 1, 2, 2); // return 11 (i.e sum of the green rectangle)
numMatrix.sumRegion(1, 2, 2, 4); // return 12 (i.e sum of the blue rectangle)

</pre>
      <p>
      </p>
      <p>
       <strong>
        Constraints:
       </strong>
      </p>
      <ul>
       <li>
        <code>
         m == matrix.length
        </code>
       </li>
       <li>
        <code>
         n == matrix[i].length
        </code>
       </li>
       <li>
        <code>
         1 &lt;= m, n &lt;= 200
        </code>
       </li>
       <li>
        <code>
         -10
         <sup>
          4
         </sup>
         &lt;= matrix[i][j] &lt;= 10
         <sup>
          4
         </sup>
        </code>
       </li>
       <li>
        <code>
         0 &lt;= row1 &lt;= row2 &lt; m
        </code>
       </li>
       <li>
        <code>
         0 &lt;= col1 &lt;= col2 &lt; n
        </code>
       </li>
       <li>
        At most
        <code>
         10
         <sup>
          4
         </sup>
        </code>
        calls will be made to
        <code>
         sumRegion
        </code>
        .
       </li>
      </ul>
      <h2 id="solutions">
       Solutions
      </h2>
      <p>
       <strong>
        Solution 1: Two-dimensional Prefix Sum
       </strong>
      </p>
      <p>
       We use $s[i + 1][j + 1]$ to represent the sum of all elements in the upper left part of the $i$th row and $j$th column, where indices $i$ and $j$ both start from $0$. We can get the following prefix sum formula:
      </p>
      \[s[i + 1][j + 1] = s[i + 1][j] + s[i][j + 1] - s[i][j] + nums[i][j]\]
      <p>
       Then, the sum of the elements of the rectangle with $(x_1, y_1)$ and $(x_2, y_2)$ as the upper left corner and lower right corner respectively is:
      </p>
      \[s[x_2 + 1][y_2 + 1] - s[x_2 + 1][y_1] - s[x_1][y_2 + 1] + s[x_1][y_1]\]
      <p>
       In the initialization method, we preprocess the prefix sum array $s$, and in the query method, we directly return the result of the above formula.
      </p>
      <p>
       The time complexity for initializing is $O(m \times n)$, and the time complexity for querying is $O(1)$. The space complexity is $O(m \times n)$.
      </p>
      <ul class="uk-tab" data-uk-switcher="{connect:'#52032df4-09e7-4c9f-8a7f-dd8d5a03d5a5'}">
       <li class="uk-active">
        <a href="solution-304.html">
         Java
        </a>
       </li>
       <li>
        <a href="solution-304.html">
         C++
        </a>
       </li>
       <li>
        <a href="solution-304.html">
         Python
        </a>
       </li>
       <li>
        <a href="solution-304.html">
         Go
        </a>
       </li>
       <li>
        <a href="solution-304.html">
         TypeScript
        </a>
       </li>
       <li>
        <a href="solution-304.html">
         Javascript
        </a>
       </li>
       <li>
        <a href="solution-304.html">
         RenderScript
        </a>
       </li>
      </ul>
      <ul class="uk-switcher uk-margin" id="52032df4-09e7-4c9f-8a7f-dd8d5a03d5a5">
       <li>
        <div class="language-java highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nc">NumMatrix</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span><span class="o">[][]</span> <span class="n">s</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">NumMatrix</span><span class="o">(</span><span class="kt">int</span><span class="o">[][]</span> <span class="n">matrix</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">matrix</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">length</span><span class="o">;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="o">][</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="o">++</span><span class="n">j</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">s</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">s</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">+</span> <span class="n">s</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span> <span class="o">-</span> <span class="n">s</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">+</span> <span class="n">matrix</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">];</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">sumRegion</span><span class="o">(</span><span class="kt">int</span> <span class="n">row1</span><span class="o">,</span> <span class="kt">int</span> <span class="n">col1</span><span class="o">,</span> <span class="kt">int</span> <span class="n">row2</span><span class="o">,</span> <span class="kt">int</span> <span class="n">col2</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">s</span><span class="o">[</span><span class="n">row2</span> <span class="o">+</span> <span class="mi">1</span><span class="o">][</span><span class="n">col2</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span> <span class="o">-</span> <span class="n">s</span><span class="o">[</span><span class="n">row2</span> <span class="o">+</span> <span class="mi">1</span><span class="o">][</span><span class="n">col1</span><span class="o">]</span> <span class="o">-</span> <span class="n">s</span><span class="o">[</span><span class="n">row1</span><span class="o">][</span><span class="n">col2</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span> <span class="o">+</span> <span class="n">s</span><span class="o">[</span><span class="n">row1</span><span class="o">][</span><span class="n">col1</span><span class="o">];</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/**
 * Your NumMatrix object will be instantiated and called as such:
 * NumMatrix obj = new NumMatrix(matrix);
 * int param_1 = obj.sumRegion(row1,col1,row2,col2);
 */</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-cpp highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">class</span> <span class="nc">NumMatrix</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">s</span><span class="p">;</span>

    <span class="n">NumMatrix</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">matrix</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">n</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="n">s</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">s</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">sumRegion</span><span class="p">(</span><span class="kt">int</span> <span class="n">row1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">row2</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col2</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">s</span><span class="p">[</span><span class="n">row2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">col2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">s</span><span class="p">[</span><span class="n">row2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">col1</span><span class="p">]</span> <span class="o">-</span> <span class="n">s</span><span class="p">[</span><span class="n">row1</span><span class="p">][</span><span class="n">col2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="n">row1</span><span class="p">][</span><span class="n">col1</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="cm">/**
 * Your NumMatrix object will be instantiated and called as such:
 * NumMatrix* obj = new NumMatrix(matrix);
 * int param_1 = obj-&gt;sumRegion(row1,col1,row2,col2);
 */</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-py highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="s">'''
&gt;&gt;&gt; a = [ [1,2,3], [4,5,6] ]
&gt;&gt;&gt; b = a.copy()
&gt;&gt;&gt; b
[[1, 2, 3], [4, 5, 6]]
'''</span>
<span class="k">class</span> <span class="nc">NumMatrix</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]):</span>
        <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">matrix</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">s</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">matrix</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">s</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="p">.</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">s</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="p">.</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">v</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">sumRegion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">col1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">row2</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">col2</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">s</span><span class="p">[</span><span class="n">row2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">col2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="o">-</span> <span class="bp">self</span><span class="p">.</span><span class="n">s</span><span class="p">[</span><span class="n">row2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">col1</span><span class="p">]</span>
            <span class="o">-</span> <span class="bp">self</span><span class="p">.</span><span class="n">s</span><span class="p">[</span><span class="n">row1</span><span class="p">][</span><span class="n">col2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">s</span><span class="p">[</span><span class="n">row1</span><span class="p">][</span><span class="n">col1</span><span class="p">]</span>
        <span class="p">)</span>


<span class="c1"># Your NumMatrix object will be instantiated and called as such:
# obj = NumMatrix(matrix)
# param_1 = obj.sumRegion(row1,col1,row2,col2)
</span>
<span class="c1">############
</span>
<span class="k">class</span> <span class="nc">NumMatrix</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix</span><span class="p">):</span>
    <span class="s">"""
    initialize your data structure here.
    :type matrix: List[List[int]]
    """</span>
    <span class="bp">self</span><span class="p">.</span><span class="n">dp</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">matrix</span><span class="p">))]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">matrix</span><span class="p">)):</span>
      <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">])):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
          <span class="bp">self</span><span class="p">.</span><span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
          <span class="bp">self</span><span class="p">.</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="bp">self</span><span class="p">.</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="p">.</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>

  <span class="k">def</span> <span class="nf">sumRegion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row1</span><span class="p">,</span> <span class="n">col1</span><span class="p">,</span> <span class="n">row2</span><span class="p">,</span> <span class="n">col2</span><span class="p">):</span>
    <span class="s">"""
    sum of elements matrix[(row1,col1)..(row2,col2)], inclusive.
    :type row1: int
    :type col1: int
    :type row2: int
    :type col2: int
    :rtype: int
    """</span>
    <span class="n">dp</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">dp</span>

    <span class="n">diagSum</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">row1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">col1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">totalSum</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">row2</span><span class="p">][</span><span class="n">col2</span><span class="p">]</span>
    <span class="n">leftSum</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">row2</span><span class="p">][</span><span class="n">col1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">upSum</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">row1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">col2</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">row1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">upSum</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="n">diagSum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">col1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">leftSum</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="n">diagSum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">totalSum</span> <span class="o">-</span> <span class="n">leftSum</span> <span class="o">-</span> <span class="n">upSum</span> <span class="o">+</span> <span class="n">diagSum</span>


</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-go highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="k">type</span> <span class="n">NumMatrix</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">s</span> <span class="p">[][]</span><span class="kt">int</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">Constructor</span><span class="p">(</span><span class="n">matrix</span> <span class="p">[][]</span><span class="kt">int</span><span class="p">)</span> <span class="n">NumMatrix</span> <span class="p">{</span>
	<span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="n">matrix</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="m">0</span><span class="p">])</span>
	<span class="n">s</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([][]</span><span class="kt">int</span><span class="p">,</span> <span class="n">m</span><span class="o">+</span><span class="m">1</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">s</span> <span class="p">{</span>
		<span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="m">1</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">matrix</span> <span class="p">{</span>
		<span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">row</span> <span class="p">{</span>
			<span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="m">1</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="m">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="m">1</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="m">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">v</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">NumMatrix</span><span class="p">{</span><span class="n">s</span><span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">this</span> <span class="o">*</span><span class="n">NumMatrix</span><span class="p">)</span> <span class="n">SumRegion</span><span class="p">(</span><span class="n">row1</span> <span class="kt">int</span><span class="p">,</span> <span class="n">col1</span> <span class="kt">int</span><span class="p">,</span> <span class="n">row2</span> <span class="kt">int</span><span class="p">,</span> <span class="n">col2</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="k">return</span> <span class="n">this</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">row2</span><span class="o">+</span><span class="m">1</span><span class="p">][</span><span class="n">col2</span><span class="o">+</span><span class="m">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">this</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">row2</span><span class="o">+</span><span class="m">1</span><span class="p">][</span><span class="n">col1</span><span class="p">]</span> <span class="o">-</span> <span class="n">this</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">row1</span><span class="p">][</span><span class="n">col2</span><span class="o">+</span><span class="m">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">this</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">row1</span><span class="p">][</span><span class="n">col1</span><span class="p">]</span>
<span class="p">}</span>

<span class="c">/**
 * Your NumMatrix object will be instantiated and called as such:
 * obj := Constructor(matrix);
 * param_1 := obj.SumRegion(row1,col1,row2,col2);
 */</span>
</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-ts highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="kd">class</span> <span class="nx">NumMatrix</span> <span class="p">{</span>
    <span class="k">private</span> <span class="nx">s</span><span class="p">:</span> <span class="kr">number</span><span class="p">[][];</span>

    <span class="kd">constructor</span><span class="p">(</span><span class="nx">matrix</span><span class="p">:</span> <span class="kr">number</span><span class="p">[][])</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">matrix</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">map</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="nx">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="nx">j</span><span class="p">]</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]</span> <span class="o">+</span> <span class="nx">matrix</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">sumRegion</span><span class="p">(</span><span class="nx">row1</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">col1</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">row2</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">col2</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">row2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="nx">col2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">row2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="nx">col1</span><span class="p">]</span> <span class="o">-</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">row1</span><span class="p">][</span><span class="nx">col2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">row1</span><span class="p">][</span><span class="nx">col1</span><span class="p">]</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**
 * Your NumMatrix object will be instantiated and called as such:
 * var obj = new NumMatrix(matrix)
 * var param_1 = obj.sumRegion(row1,col1,row2,col2)
 */</span>

</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-js highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="cm">/**
 * @param {number[][]} matrix
 */</span>
<span class="kd">var</span> <span class="nx">NumMatrix</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">matrix</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">matrix</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">map</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="nx">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="nx">j</span><span class="p">]</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]</span> <span class="o">+</span> <span class="nx">matrix</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="cm">/**
 * @param {number} row1
 * @param {number} col1
 * @param {number} row2
 * @param {number} col2
 * @return {number}
 */</span>
<span class="nx">NumMatrix</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">sumRegion</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">row1</span><span class="p">,</span> <span class="nx">col1</span><span class="p">,</span> <span class="nx">row2</span><span class="p">,</span> <span class="nx">col2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">row2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="nx">col2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">row2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="nx">col1</span><span class="p">]</span> <span class="o">-</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">row1</span><span class="p">][</span><span class="nx">col2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">[</span><span class="nx">row1</span><span class="p">][</span><span class="nx">col1</span><span class="p">]</span>
    <span class="p">);</span>
<span class="p">};</span>

<span class="cm">/**
 * Your NumMatrix object will be instantiated and called as such:
 * var obj = new NumMatrix(matrix)
 * var param_1 = obj.sumRegion(row1,col1,row2,col2)
 */</span>

</code></pre>
         </div>
        </div>
       </li>
       <li>
        <div class="language-rs highlighter-rouge">
         <div class="highlight">
          <pre class="highlight"><code><span class="cd">/**
 * Your NumMatrix object will be instantiated and called as such:
 * let obj = NumMatrix::new(matrix);
 * let ret_1: i32 = obj.sum_region(row1, col1, row2, col2);
 */</span>

<span class="k">struct</span> <span class="n">NumMatrix</span> <span class="p">{</span>
    <span class="c1">// Of size (N + 1) * (M + 1)</span>
    <span class="n">prefix_vec</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;&gt;</span><span class="p">,</span>
    <span class="n">n</span><span class="p">:</span> <span class="nb">usize</span><span class="p">,</span>
    <span class="n">m</span><span class="p">:</span> <span class="nb">usize</span><span class="p">,</span>
    <span class="n">is_initialized</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">ref_vec</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;&gt;</span><span class="p">,</span>
<span class="p">}</span>

<span class="cd">/**
 * `&amp;self` means the method takes an immutable reference.
 * If you need a mutable reference, change it to `&amp;mut self` instead.
 */</span>
<span class="k">impl</span> <span class="n">NumMatrix</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">matrix</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;&gt;</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="k">Self</span> <span class="p">{</span>
        <span class="n">NumMatrix</span> <span class="p">{</span>
            <span class="n">prefix_vec</span><span class="p">:</span> <span class="nd">vec!</span><span class="p">[</span><span class="nd">vec!</span><span class="p">[</span><span class="mi">0</span><span class="p">;</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="nf">.len</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span> <span class="n">matrix</span><span class="nf">.len</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span>
            <span class="n">n</span><span class="p">:</span> <span class="n">matrix</span><span class="nf">.len</span><span class="p">(),</span>
            <span class="n">m</span><span class="p">:</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="nf">.len</span><span class="p">(),</span>
            <span class="n">is_initialized</span><span class="p">:</span> <span class="k">false</span><span class="p">,</span>
            <span class="n">ref_vec</span><span class="p">:</span> <span class="n">matrix</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">fn</span> <span class="nf">sum_region</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">,</span> <span class="n">row1</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span> <span class="n">col1</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span> <span class="n">row2</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span> <span class="n">col2</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
        <span class="k">if</span> <span class="o">!</span><span class="k">self</span><span class="py">.is_initialized</span> <span class="p">{</span>
            <span class="k">self</span><span class="nf">.initialize_prefix_vec</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="c1">// Since i32 will let `rustc` complain, just make it happy</span>
        <span class="k">let</span> <span class="n">row1</span><span class="p">:</span> <span class="nb">usize</span> <span class="o">=</span> <span class="n">row1</span> <span class="k">as</span> <span class="nb">usize</span><span class="p">;</span>
        <span class="k">let</span> <span class="n">col1</span><span class="p">:</span> <span class="nb">usize</span> <span class="o">=</span> <span class="n">col1</span> <span class="k">as</span> <span class="nb">usize</span><span class="p">;</span>
        <span class="k">let</span> <span class="n">row2</span><span class="p">:</span> <span class="nb">usize</span> <span class="o">=</span> <span class="n">row2</span> <span class="k">as</span> <span class="nb">usize</span><span class="p">;</span>
        <span class="k">let</span> <span class="n">col2</span><span class="p">:</span> <span class="nb">usize</span> <span class="o">=</span> <span class="n">col2</span> <span class="k">as</span> <span class="nb">usize</span><span class="p">;</span>
        <span class="c1">// Return the value in O(1)</span>
        <span class="k">self</span><span class="py">.prefix_vec</span><span class="p">[</span><span class="n">row2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">col2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span>
            <span class="k">self</span><span class="py">.prefix_vec</span><span class="p">[</span><span class="n">row2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">col1</span><span class="p">]</span> <span class="o">-</span>
            <span class="k">self</span><span class="py">.prefix_vec</span><span class="p">[</span><span class="n">row1</span><span class="p">][</span><span class="n">col2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span>
            <span class="k">self</span><span class="py">.prefix_vec</span><span class="p">[</span><span class="n">row1</span><span class="p">][</span><span class="n">col1</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="k">fn</span> <span class="nf">initialize_prefix_vec</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Initialize the prefix sum vector</span>
        <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">..</span><span class="k">self</span><span class="py">.n</span> <span class="p">{</span>
            <span class="k">for</span> <span class="n">j</span> <span class="k">in</span> <span class="mi">0</span><span class="o">..</span><span class="k">self</span><span class="py">.m</span> <span class="p">{</span>
                <span class="k">self</span><span class="py">.prefix_vec</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span>
                    <span class="k">self</span><span class="py">.prefix_vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span>
                    <span class="k">self</span><span class="py">.prefix_vec</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span>
                    <span class="k">self</span><span class="py">.prefix_vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span>
                    <span class="k">self</span><span class="py">.ref_vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">self</span><span class="py">.is_initialized</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>
         </div>
        </div>
       </li>
      </ul>
      
     </article>
     
     
     <div class="disqus-comments">
      <div class="comments">
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'leetcodeca';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="solution-304.html">
         comments powered by Disqus.
        </a>
       </noscript>
      </div>
     </div>
    </div>
   </div>
  </div>
  
  <script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
  </script>
  <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
  <script src="assets_js_beautifuljekyll.js">
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <script src="assets_js_anchor-js-config.js">
  </script>
 </body>
</html>
